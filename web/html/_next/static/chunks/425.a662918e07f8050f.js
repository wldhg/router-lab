(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{401:function(e,n,r){r(2406),r(9874),r(9236),r(2578),r(6699)},203:function(e){e.exports=THREE.ColladaLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ColladaLoader.prototype={constructor:THREE.ColladaLoader,crossOrigin:"anonymous",load:function(e,n,r,i){var o=this,a=void 0===o.path?THREE.LoaderUtils.extractUrlBase(e):o.path,s=new THREE.FileLoader(o.manager);s.setPath(o.path),s.load(e,function(e){n(o.parse(e,a))},r,i)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},options:{set convertUpAxis(value){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,n){function r(e,n){for(var r=[],i=e.childNodes,o=0,a=i.length;o<a;o++){var s=i[o];s.nodeName===n&&r.push(s)}return r}function i(e){if(0===e.length)return[];for(var n=e.trim().split(/\s+/),r=Array(n.length),i=0,o=n.length;i<o;i++)r[i]=parseFloat(n[i]);return r}function o(e){if(0===e.length)return[];for(var n=e.trim().split(/\s+/),r=Array(n.length),i=0,o=n.length;i<o;i++)r[i]=parseInt(n[i]);return r}function a(e){return e.substring(1)}function s(e){return 0===Object.keys(e).length}function l(e,n,i,o){var a=r(e,n)[0];if(void 0!==a)for(var s=r(a,i),l=0;l<s.length;l++)o(s[l])}function c(e,n){for(var r in e)e[r].build=n(e[r])}function u(e,n){return void 0!==e.build||(e.build=n(e)),e.build}function h(e){var n=[],r=e.channels,i=e.samplers,o=e.sources;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],l=i[s.sampler],c=l.inputs.INPUT,u=l.inputs.OUTPUT;(function(e,n){for(var r=e.keyframes,i=e.name,o=[],a=[],s=[],l=[],c=0,u=r.length;c<u;c++){var h=r[c],d=h.time,f=h.value;I.fromArray(f).transpose(),I.decompose(y,w,b),o.push(d),a.push(y.x,y.y,y.z),s.push(w.x,w.y,w.z,w.w),l.push(b.x,b.y,b.z)}a.length>0&&n.push(new THREE.VectorKeyframeTrack(i+".position",o,a)),s.length>0&&n.push(new THREE.QuaternionKeyframeTrack(i+".quaternion",o,s)),l.length>0&&n.push(new THREE.VectorKeyframeTrack(i+".scale",o,l))})(function(e,n,r){var i,o,a,s,l,c,u=et.nodes[e.id],h=K(u.id),d=u.transforms[e.sid],f=u.matrix.clone().transpose(),p={};switch(d){case"matrix":for(a=0,s=n.array.length;a<s;a++)if(i=n.array[a],o=a*r.stride,void 0===p[i]&&(p[i]={}),!0===e.arraySyntax){var g=r.array[o],m=e.indices[0]+4*e.indices[1];p[i][m]=g}else for(l=0,c=r.stride;l<c;l++)p[i][l]=r.array[o+l];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',d)}var v=function(e,n){var r=[];for(var i in e)r.push({time:parseFloat(i),value:e[i]});r.sort(function(e,n){return e.time-n.time});for(var o=0;o<16;o++)(function(e,n,r){var i,o,a,s=!0;for(o=0,a=e.length;o<a;o++)void 0===(i=e[o]).value[n]?i.value[n]=null:s=!1;if(!0===s)for(o=0,a=e.length;o<a;o++)(i=e[o]).value[n]=r;else(function(e,n){for(var r,i,o=0,a=e.length;o<a;o++){var s=e[o];if(null===s.value[n]){if(r=function(e,n,r){for(;n>=0;){var i=e[n];if(null!==i.value[r])return i;n--}return null}(e,o,n),i=function(e,n,r){for(;n<e.length;){var i=e[n];if(null!==i.value[r])return i;n++}return null}(e,o,n),null===r){s.value[n]=i.value[n];continue}if(null===i){s.value[n]=r.value[n];continue}(function(e,n,r,i){if(r.time-n.time==0){e.value[i]=n.value[i];return}e.value[i]=(e.time-n.time)*(r.value[i]-n.value[i])/(r.time-n.time)+n.value[i]})(s,r,i,n)}}})(e,n)})(r,o,n.elements[o]);return r}(p,f);return{name:h.uuid,keyframes:v}}(s,o[c],o[u]),n)}return n}function d(e){return u(et.animations[e],h)}var f,p,g,m,v,y=new THREE.Vector3,b=new THREE.Vector3,w=new THREE.Quaternion;function x(e){for(var n=[],r=e.name,i=e.end-e.start||-1,o=e.animations,a=0,s=o.length;a<s;a++)for(var l=d(o[a]),c=0,u=l.length;c<u;c++)n.push(l[c]);return new THREE.AnimationClip(r,i,n)}function E(e){var n={id:e.id},r=et.geometries[n.id];return void 0!==e.skin&&(n.skin=function(e){var n,r,i,o={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},a=e.sources,s=e.vertexWeights,l=s.vcount,c=s.v,u=s.inputs.JOINT.offset,h=s.inputs.WEIGHT.offset,d=e.sources[e.joints.inputs.JOINT],f=e.sources[e.joints.inputs.INV_BIND_MATRIX],p=a[s.inputs.WEIGHT.id].array,g=0;for(n=0,i=l.length;n<i;n++){var m=l[n],v=[];for(r=0;r<m;r++){var y=c[g+u],b=p[c[g+h]];v.push({index:y,weight:b}),g+=2}for(v.sort(_),r=0;r<4;r++){var w=v[r];void 0!==w?(o.indices.array.push(w.index),o.weights.array.push(w.weight)):(o.indices.array.push(0),o.weights.array.push(0))}}for(e.bindShapeMatrix?o.bindMatrix=new THREE.Matrix4().fromArray(e.bindShapeMatrix).transpose():o.bindMatrix=new THREE.Matrix4().identity(),n=0,i=d.array.length;n<i;n++){var x=d.array[n],E=new THREE.Matrix4().fromArray(f.array,n*f.stride).transpose();o.joints.push({name:x,boneInverse:E})}return o;function _(e,n){return n.weight-e.weight}}(e.skin),r.sources.skinIndices=n.skin.indices,r.sources.skinWeights=n.skin.weights),n}function _(e){return void 0!==e.build?e.build:e.init_from}function k(e){var n=et.images[e];return void 0!==n?u(n,_):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function T(e){for(var n={},r=0,o=e.childNodes.length;r<o;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"color":n[a.nodeName]=i(a.textContent);break;case"float":n[a.nodeName]=parseFloat(a.textContent);break;case"texture":n[a.nodeName]={id:a.getAttribute("texture"),extra:function(e){for(var n={technique:{}},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];1===o.nodeType&&"extra"===o.nodeName&&function(e,n){for(var r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];1===o.nodeType&&"technique"===o.nodeName&&function(e,n){for(var r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":n.technique[o.nodeName]=parseFloat(o.textContent);break;case"wrapU":case"wrapV":"TRUE"===o.textContent.toUpperCase()?n.technique[o.nodeName]=1:"FALSE"===o.textContent.toUpperCase()?n.technique[o.nodeName]=0:n.technique[o.nodeName]=parseInt(o.textContent)}}}(o,n)}}(o,n)}return n}(a)}}}return n}function O(e){return e}function C(e){var n,r,i=(n=e.url,u(et.effects[n],O)),o=i.profile.technique,a=i.profile.extra;switch(o.type){case"phong":case"blinn":r=new THREE.MeshPhongMaterial;break;case"lambert":r=new THREE.MeshLambertMaterial;break;default:r=new THREE.MeshBasicMaterial}function l(e){var n,r,o,a=i.profile.samplers[e.id],l=null;if(void 0!==a?l=k(i.profile.surfaces[a.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),l=k(e.id)),null===l)return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null;var c="tga"===(o=(o=(n=l).slice((n.lastIndexOf(".")-1>>>0)+2)).toLowerCase())?v:Y;if(void 0===c)return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",l),null;var u=c.load(l),h=e.extra;if(void 0!==h&&void 0!==h.technique&&!1===s(h.technique)){var d=h.technique;u.wrapS=d.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,u.wrapT=d.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,u.offset.set(d.offsetU||0,d.offsetV||0),u.repeat.set(d.repeatU||1,d.repeatV||1)}else u.wrapS=THREE.RepeatWrapping,u.wrapT=THREE.RepeatWrapping;return u}r.name=e.name;var c=o.parameters;for(var h in c){var d=c[h];switch(h){case"diffuse":d.color&&r.color.fromArray(d.color),d.texture&&(r.map=l(d.texture));break;case"specular":d.color&&r.specular&&r.specular.fromArray(d.color),d.texture&&(r.specularMap=l(d.texture));break;case"bump":d.texture&&(r.normalMap=l(d.texture));break;case"ambient":d.texture&&(r.lightMap=l(d.texture));break;case"shininess":d.float&&r.shininess&&(r.shininess=d.float);break;case"emission":d.color&&r.emissive&&r.emissive.fromArray(d.color),d.texture&&(r.emissiveMap=l(d.texture))}}var f=c.transparent,p=c.transparency;if(void 0===p&&f&&(p={float:1}),void 0===f&&p&&(f={opaque:"A_ONE",data:{color:[1,1,1,1]}}),f&&p){if(f.data.texture)r.transparent=!0;else{var g=f.data.color;switch(f.opaque){case"A_ONE":r.opacity=g[3]*p.float;break;case"RGB_ZERO":r.opacity=1-g[0]*p.float;break;case"A_ZERO":r.opacity=1-g[3]*p.float;break;case"RGB_ONE":r.opacity=g[0]*p.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',f.opaque)}r.opacity<1&&(r.transparent=!0)}}return void 0!==a&&void 0!==a.technique&&1===a.technique.double_sided&&(r.side=THREE.DoubleSide),r}function A(e){var n;switch(e.optics.technique){case"perspective":n=new THREE.PerspectiveCamera(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var r=e.optics.parameters.ymag,i=e.optics.parameters.xmag,o=e.optics.parameters.aspect_ratio;i=void 0===i?r*o:i,r=void 0===r?i/o:r,i*=.5,r*=.5,n=new THREE.OrthographicCamera(-i,i,r,-r,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:n=new THREE.PerspectiveCamera}return n.name=e.name,n}function S(e){var n;switch(e.technique){case"directional":n=new THREE.DirectionalLight;break;case"point":n=new THREE.PointLight;break;case"spot":n=new THREE.SpotLight;break;case"ambient":n=new THREE.AmbientLight}return e.parameters.color&&n.color.copy(e.parameters.color),e.parameters.distance&&(n.distance=e.parameters.distance),n}function M(e){for(var n={array:[],stride:3},o=0;o<e.childNodes.length;o++){var a=e.childNodes[o];if(1===a.nodeType)switch(a.nodeName){case"float_array":n.array=i(a.textContent);break;case"Name_array":n.array=function(e){if(0===e.length)return[];for(var n=e.trim().split(/\s+/),r=Array(n.length),i=0,o=n.length;i<o;i++)r[i]=n[i];return r}(a.textContent);break;case"technique_common":var s=r(a,"accessor")[0];void 0!==s&&(n.stride=parseInt(s.getAttribute("stride")))}}return n}function R(e){var n={},r=e.sources,i=e.vertices,o=e.primitives;if(0===o.length)return{};var a=function(e){for(var n={},r=0;r<e.length;r++){var i=e[r];void 0===n[i.type]&&(n[i.type]=[]),n[i.type].push(i)}return n}(o);for(var s in a){var l=a[s];(function(e){for(var n=0,r=0,i=e.length;r<i;r++)!0===e[r].hasUV&&n++;n>0&&n<e.length&&(e.uvsNeedsFix=!0)})(l),n[s]=function(e,n,r){for(var i={},o={array:[],stride:0},a={array:[],stride:0},s={array:[],stride:0},l={array:[],stride:0},c={array:[],stride:0},u={array:[],stride:4},h={array:[],stride:4},d=new THREE.BufferGeometry,f=[],p=0,g=0;g<e.length;g++){var m=e[g],v=m.inputs,y=0;switch(m.type){case"lines":case"linestrips":y=2*m.count;break;case"triangles":y=3*m.count;break;case"polylist":for(var b=0;b<m.count;b++){var w=m.vcount[b];switch(w){case 3:y+=3;break;case 4:y+=6;break;default:y+=(w-2)*3}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",m.type)}for(var x in d.addGroup(p,y,g),p+=y,m.material&&f.push(m.material),v){var E=v[x];switch(x){case"VERTEX":for(var _ in r){var k=r[_];switch(_){case"POSITION":var T=o.array.length;if(j(m,n[k],E.offset,o.array),o.stride=n[k].stride,n.skinWeights&&n.skinIndices&&(j(m,n.skinIndices,E.offset,u.array),j(m,n.skinWeights,E.offset,h.array)),!1===m.hasUV&&!0===e.uvsNeedsFix)for(var y=(o.array.length-T)/o.stride,O=0;O<y;O++)s.array.push(0,0);break;case"NORMAL":j(m,n[k],E.offset,a.array),a.stride=n[k].stride;break;case"COLOR":j(m,n[k],E.offset,c.array),c.stride=n[k].stride;break;case"TEXCOORD":j(m,n[k],E.offset,s.array),s.stride=n[k].stride;break;case"TEXCOORD1":j(m,n[k],E.offset,l.array),s.stride=n[k].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',_)}}break;case"NORMAL":j(m,n[E.id],E.offset,a.array),a.stride=n[E.id].stride;break;case"COLOR":j(m,n[E.id],E.offset,c.array),c.stride=n[E.id].stride;break;case"TEXCOORD":j(m,n[E.id],E.offset,s.array),s.stride=n[E.id].stride;break;case"TEXCOORD1":j(m,n[E.id],E.offset,l.array),l.stride=n[E.id].stride}}}return o.array.length>0&&d.addAttribute("position",new THREE.Float32BufferAttribute(o.array,o.stride)),a.array.length>0&&d.addAttribute("normal",new THREE.Float32BufferAttribute(a.array,a.stride)),c.array.length>0&&d.addAttribute("color",new THREE.Float32BufferAttribute(c.array,c.stride)),s.array.length>0&&d.addAttribute("uv",new THREE.Float32BufferAttribute(s.array,s.stride)),l.array.length>0&&d.addAttribute("uv2",new THREE.Float32BufferAttribute(l.array,l.stride)),u.array.length>0&&d.addAttribute("skinIndex",new THREE.Float32BufferAttribute(u.array,u.stride)),h.array.length>0&&d.addAttribute("skinWeight",new THREE.Float32BufferAttribute(h.array,h.stride)),i.data=d,i.type=e[0].type,i.materialKeys=f,i}(l,r,i)}return n}function j(e,n,r,i){var o=e.p,a=e.stride,s=e.vcount;function l(e){for(var n=o[e+r]*u,a=n+u;n<a;n++)i.push(c[n])}var c=n.array,u=n.stride;if(void 0!==e.vcount)for(var h=0,d=0,f=s.length;d<f;d++){var p=s[d];if(4===p){var g=h+0*a,m=h+1*a,v=h+2*a,y=h+3*a;l(g),l(m),l(y),l(m),l(v),l(y)}else if(3===p){var g=h+0*a,m=h+1*a,v=h+2*a;l(g),l(m),l(v)}else if(p>4)for(var b=1,w=p-2;b<=w;b++){var g=h+0*a,m=h+a*b,v=h+a*(b+1);l(g),l(m),l(v)}h+=a*p}else for(var d=0,f=o.length;d<f;d+=a)l(d)}function P(e){return u(et.geometries[e],R)}function N(e){return void 0!==e.build?e.build:e}function D(e){var n={type:e.nodeName},r=i(e.textContent);switch(n.type){case"matrix":n.obj=new THREE.Matrix4,n.obj.fromArray(r).transpose();break;case"translate":n.obj=new THREE.Vector3,n.obj.fromArray(r);break;case"rotate":n.obj=new THREE.Vector3,n.obj.fromArray(r),n.angle=THREE.Math.degToRad(r[3])}return n}function L(e){return void 0!==e.build?e.build:e}var I=new THREE.Matrix4,z=new THREE.Vector3;function H(e){for(var n={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new THREE.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"node":n.nodes.push(o.getAttribute("id")),H(o);break;case"instance_camera":n.instanceCameras.push(a(o.getAttribute("url")));break;case"instance_controller":n.instanceControllers.push(F(o));break;case"instance_light":n.instanceLights.push(a(o.getAttribute("url")));break;case"instance_geometry":n.instanceGeometries.push(F(o));break;case"instance_node":n.instanceNodes.push(a(o.getAttribute("url")));break;case"matrix":var s=i(o.textContent);n.matrix.multiply(I.fromArray(s).transpose()),n.transforms[o.getAttribute("sid")]=o.nodeName;break;case"translate":var s=i(o.textContent);z.fromArray(s),n.matrix.multiply(I.makeTranslation(z.x,z.y,z.z)),n.transforms[o.getAttribute("sid")]=o.nodeName;break;case"rotate":var s=i(o.textContent),l=THREE.Math.degToRad(s[3]);n.matrix.multiply(I.makeRotationAxis(z.fromArray(s),l)),n.transforms[o.getAttribute("sid")]=o.nodeName;break;case"scale":var s=i(o.textContent);n.matrix.scale(z.fromArray(s)),n.transforms[o.getAttribute("sid")]=o.nodeName;break;case"extra":break;default:console.log(o)}}return q(n.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",n.id):et.nodes[n.id]=n,n}function F(e){for(var n={id:a(e.getAttribute("url")),materials:{},skeletons:[]},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];switch(i.nodeName){case"bind_material":for(var o=i.getElementsByTagName("instance_material"),s=0;s<o.length;s++){var l=o[s],c=l.getAttribute("symbol"),u=l.getAttribute("target");n.materials[c]=a(u)}break;case"skeleton":n.skeletons.push(a(i.textContent))}}return n}function B(e,n,r){e.traverse(function(e){if(!0===e.isBone){for(var i,o=0;o<n.length;o++){var a=n[o];if(a.name===e.name){i=a.boneInverse;break}}void 0===i&&(i=new THREE.Matrix4),r.push({bone:e,boneInverse:i,processed:!1})}})}function V(e){for(var n,r=[],i=e.matrix,o=e.nodes,a=e.type,s=e.instanceCameras,l=e.instanceControllers,c=e.instanceLights,h=e.instanceGeometries,d=e.instanceNodes,f=0,p=o.length;f<p;f++)r.push(K(o[f]));for(var f=0,p=s.length;f<p;f++){var g=function(e){var n=et.cameras[e];return void 0!==n?u(n,A):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}(s[f]);null!==g&&r.push(g.clone())}for(var f=0,p=l.length;f<p;f++)for(var m,v=l[f],y=(m=v.id,u(et.controllers[m],E)),b=P(y.id),w=G(b,v.materials),x=function(e,n){var r=[],i=[];for(o=0;o<e.length;o++){var o,a,s,l,c=e[o];if(q(c))B(l=K(c),n,r);else if(void 0!==et.visualScenes[c])for(var u=et.visualScenes[c].children,a=0;a<u.length;a++){var h=u[a];if("JOINT"===h.type){var l=K(h.id);B(l,n,r)}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",c)}for(o=0;o<n.length;o++)for(a=0;a<r.length;a++)if((s=r[a]).bone.name===n[o].name){i[o]=s,s.processed=!0;break}for(o=0;o<r.length;o++)!1===(s=r[o]).processed&&(i.push(s),s.processed=!0);var d=[],f=[];for(o=0;o<i.length;o++)s=i[o],d.push(s.bone),f.push(s.boneInverse);return new THREE.Skeleton(d,f)}(v.skeletons,y.skin.joints),_=0,k=w.length;_<k;_++){var n=w[_];n.isSkinnedMesh&&(n.bind(x,y.skin.bindMatrix),n.normalizeSkinWeights()),r.push(n)}for(var f=0,p=c.length;f<p;f++){var T=function(e){var n=et.lights[e];return void 0!==n?u(n,S):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}(c[f]);null!==T&&r.push(T.clone())}for(var f=0,p=h.length;f<p;f++)for(var v=h[f],b=P(v.id),w=G(b,v.materials),_=0,k=w.length;_<k;_++)r.push(w[_]);for(var f=0,p=d.length;f<p;f++)r.push(K(d[f]).clone());if(0===o.length&&1===r.length)n=r[0];else{n="JOINT"===a?new THREE.Bone:new THREE.Group;for(var f=0;f<r.length;f++)n.add(r[f])}return""===n.name&&(n.name="JOINT"===a?e.sid:e.name),n.matrix.copy(i),n.matrix.decompose(n.position,n.quaternion,n.scale),n}var U=new THREE.MeshBasicMaterial({color:16711935});function G(e,n){var r=[];for(var i in e){var o,a=e[i],s=function(e,n){for(var r=[],i=0,o=e.length;i<o;i++){var a=n[e[i]];void 0===a?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[i]),r.push(U)):r.push(u(et.materials[a],C))}return r}(a.materialKeys,n);0===s.length&&("lines"===i||"linestrips"===i?s.push(new THREE.LineBasicMaterial):s.push(new THREE.MeshPhongMaterial));var l=void 0!==a.data.attributes.skinIndex;if(l)for(var c=0,h=s.length;c<h;c++)s[c].skinning=!0;var d=1===s.length?s[0]:s;switch(i){case"lines":o=new THREE.LineSegments(a.data,d);break;case"linestrips":o=new THREE.Line(a.data,d);break;case"triangles":case"polylist":o=l?new THREE.SkinnedMesh(a.data,d):new THREE.Mesh(a.data,d)}r.push(o)}return r}function q(e){return void 0!==et.nodes[e]}function K(e){return u(et.nodes[e],V)}function Z(e){var n=new THREE.Group;n.name=e.name;for(var r=e.children,i=0;i<r.length;i++){var o=r[i];n.add(K(o.id))}return n}function $(e){return u(et.visualScenes[e],Z)}if(0===e.length)return{scene:new THREE.Scene};var W=r(new DOMParser().parseFromString(e,"application/xml"),"COLLADA")[0];console.log("THREE.ColladaLoader: File version",W.getAttribute("version"));var X=(g=r(W,"asset")[0],{unit:void 0!==(f=r(g,"unit")[0])&&!0===f.hasAttribute("meter")?parseFloat(f.getAttribute("meter")):1,upAxis:void 0!==(p=r(g,"up_axis")[0])?p.textContent:"Y_UP"}),Y=new THREE.TextureLoader(this.manager);Y.setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin),THREE.TGALoader&&(v=new THREE.TGALoader(this.manager)).setPath(this.resourcePath||n);var Q=[],J={},ee=0,et={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};l(W,"library_animations","animation",function(e){for(var n={sources:{},samplers:{},channels:{}},r=0,i=e.childNodes.length;r<i;r++){var o,s=e.childNodes[r];if(1===s.nodeType)switch(s.nodeName){case"source":o=s.getAttribute("id"),n.sources[o]=M(s);break;case"sampler":o=s.getAttribute("id"),n.samplers[o]=function(e){for(var n={inputs:{}},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];if(1===o.nodeType&&"input"===o.nodeName){var s=a(o.getAttribute("source")),l=o.getAttribute("semantic");n.inputs[l]=s}}return n}(s);break;case"channel":o=s.getAttribute("target"),n.channels[o]=function(e){var n={},r=e.getAttribute("target").split("/"),i=r.shift(),o=r.shift(),s=-1!==o.indexOf("("),l=-1!==o.indexOf(".");if(l)o=(r=o.split(".")).shift(),n.member=r.shift();else if(s){var c=o.split("(");o=c.shift();for(var u=0;u<c.length;u++)c[u]=parseInt(c[u].replace(/\)/,""));n.indices=c}return n.id=i,n.sid=o,n.arraySyntax=s,n.memberSyntax=l,n.sampler=a(e.getAttribute("source")),n}(s);break;default:console.log(s)}}et.animations[e.getAttribute("id")]=n}),l(W,"library_animation_clips","animation_clip",function(e){for(var n={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];1===o.nodeType&&"instance_animation"===o.nodeName&&n.animations.push(a(o.getAttribute("url")))}et.clips[e.getAttribute("id")]=n}),l(W,"library_controllers","controller",function(e){for(var n={},r=0,s=e.childNodes.length;r<s;r++){var l=e.childNodes[r];if(1===l.nodeType)switch(l.nodeName){case"skin":n.id=a(l.getAttribute("source")),n.skin=function(e){for(var n={sources:{}},r=0,s=e.childNodes.length;r<s;r++){var l=e.childNodes[r];if(1===l.nodeType)switch(l.nodeName){case"bind_shape_matrix":n.bindShapeMatrix=i(l.textContent);break;case"source":var c=l.getAttribute("id");n.sources[c]=M(l);break;case"joints":n.joints=function(e){for(var n={inputs:{}},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];if(1===o.nodeType&&"input"===o.nodeName){var s=o.getAttribute("semantic"),l=a(o.getAttribute("source"));n.inputs[s]=l}}return n}(l);break;case"vertex_weights":n.vertexWeights=function(e){for(var n={inputs:{}},r=0,i=e.childNodes.length;r<i;r++){var s=e.childNodes[r];if(1===s.nodeType)switch(s.nodeName){case"input":var l=s.getAttribute("semantic"),c=a(s.getAttribute("source")),u=parseInt(s.getAttribute("offset"));n.inputs[l]={id:c,offset:u};break;case"vcount":n.vcount=o(s.textContent);break;case"v":n.v=o(s.textContent)}}return n}(l)}}return n}(l);break;case"morph":n.id=a(l.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}et.controllers[e.getAttribute("id")]=n}),l(W,"library_images","image",function(e){var n={init_from:r(e,"init_from")[0].textContent};et.images[e.getAttribute("id")]=n}),l(W,"library_effects","effect",function(e){for(var n={},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];1===o.nodeType&&"profile_COMMON"===o.nodeName&&(n.profile=function(e){for(var n={surfaces:{},samplers:{}},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"newparam":(function(e,n){for(var r=e.getAttribute("sid"),i=0,o=e.childNodes.length;i<o;i++){var a=e.childNodes[i];if(1===a.nodeType)switch(a.nodeName){case"surface":n.surfaces[r]=function(e){for(var n={},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];1===o.nodeType&&"init_from"===o.nodeName&&(n.init_from=o.textContent)}return n}(a);break;case"sampler2D":n.samplers[r]=function(e){for(var n={},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];1===o.nodeType&&"source"===o.nodeName&&(n.source=o.textContent)}return n}(a)}}})(o,n);break;case"technique":n.technique=function(e){for(var n={},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"constant":case"lambert":case"blinn":case"phong":n.type=o.nodeName,n.parameters=function(e){for(var n={},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":n[o.nodeName]=T(o);break;case"transparent":n[o.nodeName]={opaque:o.getAttribute("opaque"),data:T(o)}}}return n}(o)}}return n}(o);break;case"extra":n.extra=function(e){for(var n={},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];1===o.nodeType&&"technique"===o.nodeName&&(n.technique=function(e){for(var n={},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];1===o.nodeType&&"double_sided"===o.nodeName&&(n[o.nodeName]=parseInt(o.textContent))}return n}(o))}return n}(o)}}return n}(o))}et.effects[e.getAttribute("id")]=n}),l(W,"library_materials","material",function(e){for(var n={name:e.getAttribute("name")},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];1===o.nodeType&&"instance_effect"===o.nodeName&&(n.url=a(o.getAttribute("url")))}et.materials[e.getAttribute("id")]=n}),l(W,"library_cameras","camera",function(e){for(var n={name:e.getAttribute("name")},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];1===o.nodeType&&"optics"===o.nodeName&&(n.optics=function(e){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if("technique_common"===r.nodeName)return function(e){for(var n={},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];switch(i.nodeName){case"perspective":case"orthographic":n.technique=i.nodeName,n.parameters=function(e){for(var n={},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];switch(i.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":n[i.nodeName]=parseFloat(i.textContent)}}return n}(i)}}return n}(r)}return{}}(o))}et.cameras[e.getAttribute("id")]=n}),l(W,"library_lights","light",function(e){for(var n={},r=0,o=e.childNodes.length;r<o;r++){var a=e.childNodes[r];1===a.nodeType&&"technique_common"===a.nodeName&&(n=function(e){for(var n={},r=0,o=e.childNodes.length;r<o;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"directional":case"point":case"spot":case"ambient":n.technique=a.nodeName,n.parameters=function(e){for(var n={},r=0,o=e.childNodes.length;r<o;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"color":var s=i(a.textContent);n.color=new THREE.Color().fromArray(s);break;case"falloff_angle":n.falloffAngle=parseFloat(a.textContent);break;case"quadratic_attenuation":var l=parseFloat(a.textContent);n.distance=l?Math.sqrt(1/l):0}}return n}(a)}}return n}(a))}et.lights[e.getAttribute("id")]=n}),l(W,"library_geometries","geometry",function(e){var n={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},i=r(e,"mesh")[0];if(void 0!==i){for(var s=0;s<i.childNodes.length;s++){var l=i.childNodes[s];if(1===l.nodeType){var c=l.getAttribute("id");switch(l.nodeName){case"source":n.sources[c]=M(l);break;case"vertices":n.vertices=function(e){for(var n={},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];1===i.nodeType&&(n[i.getAttribute("semantic")]=a(i.getAttribute("source")))}return n}(l);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",l.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":n.primitives.push(function(e){for(var n={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},r=0,i=e.childNodes.length;r<i;r++){var s=e.childNodes[r];if(1===s.nodeType)switch(s.nodeName){case"input":var l=a(s.getAttribute("source")),c=s.getAttribute("semantic"),u=parseInt(s.getAttribute("offset")),h=parseInt(s.getAttribute("set")),d=h>0?c+h:c;n.inputs[d]={id:l,offset:u},n.stride=Math.max(n.stride,u+1),"TEXCOORD"===c&&(n.hasUV=!0);break;case"vcount":n.vcount=o(s.textContent);break;case"p":n.p=o(s.textContent)}}return n}(l));break;default:console.log(l)}}}et.geometries[e.getAttribute("id")]=n}}),l(W,"library_nodes","node",H),l(W,"library_visual_scenes","visual_scene",function(e){var n={name:e.getAttribute("name"),children:[]};!function(e){for(var n=e.getElementsByTagName("node"),r=0;r<n.length;r++){var i=n[r];!1===i.hasAttribute("id")&&i.setAttribute("id","three_default_"+ee++)}}(e);for(var i=r(e,"node"),o=0;o<i.length;o++)n.children.push(H(i[o]));et.visualScenes[e.getAttribute("id")]=n}),l(W,"library_kinematics_models","kinematics_model",function(e){for(var n={name:e.getAttribute("name")||"",joints:{},links:[]},r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];1===o.nodeType&&"technique_common"===o.nodeName&&function(e,n){for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"joint":n.joints[o.getAttribute("sid")]=function(e){for(var n,r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"prismatic":case"revolute":n=function(e,n){for(var n={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new THREE.Vector3,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0},r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"axis":var a=i(o.textContent);n.axis.fromArray(a);break;case"limits":var s=o.getElementsByTagName("max")[0],l=o.getElementsByTagName("min")[0];n.limits.max=parseFloat(s.textContent),n.limits.min=parseFloat(l.textContent)}}return n.limits.min>=n.limits.max&&(n.static=!0),n.middlePosition=(n.limits.min+n.limits.max)/2,n}(o)}}return n}(o);break;case"link":n.links.push(function e(n){for(var r={sid:n.getAttribute("sid"),name:n.getAttribute("name")||"",attachments:[],transforms:[]},i=0;i<n.childNodes.length;i++){var o=n.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"attachment_full":r.attachments.push(function(n){for(var r={joint:n.getAttribute("joint").split("/").pop(),transforms:[],links:[]},i=0;i<n.childNodes.length;i++){var o=n.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"link":r.links.push(e(o));break;case"matrix":case"translate":case"rotate":r.transforms.push(D(o))}}return r}(o));break;case"matrix":case"translate":case"rotate":r.transforms.push(D(o))}}return r}(o))}}}(o,n)}et.kinematicsModels[e.getAttribute("id")]=n}),l(W,"library_physics_models","physics_model",function(e){for(var n={name:e.getAttribute("name")||"",rigidBodies:{}},r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];1===o.nodeType&&"rigid_body"===o.nodeName&&(n.rigidBodies[o.getAttribute("name")]={},function(e,n){for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];1===o.nodeType&&"technique_common"===o.nodeName&&function(e,n){for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"inertia":n.inertia=i(o.textContent);break;case"mass":n.mass=i(o.textContent)[0]}}}(o,n)}}(o,n.rigidBodies[o.getAttribute("name")]))}et.physicsModels[e.getAttribute("id")]=n}),l(W,"scene","instance_kinematics_scene",function(e){for(var n={bindJointAxis:[]},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];1===i.nodeType&&"bind_joint_axis"===i.nodeName&&n.bindJointAxis.push(function(e){for(var n={target:e.getAttribute("target").split("/").pop()},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(1===i.nodeType&&"axis"===i.nodeName){var o=i.getElementsByTagName("param")[0];n.axis=o.textContent;var a=n.axis.split("inst_").pop().split("axis")[0];n.jointIndex=a.substr(0,a.length-1)}}return n}(i))}et.kinematicsScenes[a(e.getAttribute("url"))]=n}),c(et.animations,h),c(et.clips,x),c(et.controllers,E),c(et.images,_),c(et.effects,O),c(et.materials,C),c(et.cameras,A),c(et.lights,S),c(et.geometries,R),c(et.visualScenes,Z),function(){var e,n=et.clips;if(!0===s(n)){if(!1===s(et.animations)){var r=[];for(var i in et.animations)for(var o=d(i),a=0,l=o.length;a<l;a++)r.push(o[a]);Q.push(new THREE.AnimationClip("default",-1,r))}}else for(var i in n)Q.push((e=i,u(et.clips[e],x)))}(),function(){var e=Object.keys(et.kinematicsModels)[0],n=Object.keys(et.kinematicsScenes)[0],r=Object.keys(et.visualScenes)[0];if(void 0!==e&&void 0!==n){for(var o=u(et.kinematicsModels[e],N),a=u(et.kinematicsScenes[n],L),s=$(r),l=a.bindJointAxis,c={},h=0,d=l.length;h<d;h++){var f=l[h],p=W.querySelector('[sid="'+f.target+'"]');if(p){var g=p.parentElement;(function(e,n){var r=n.getAttribute("name"),a=o.joints[e];s.traverse(function(o){o.name===r&&(c[e]={object:o,transforms:function(e){for(var n=[],r=W.querySelector('[id="'+e.id+'"]'),o=0;o<r.childNodes.length;o++){var a=r.childNodes[o];if(1===a.nodeType)switch(a.nodeName){case"matrix":var s=i(a.textContent),l=new THREE.Matrix4().fromArray(s).transpose();n.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:l});break;case"translate":case"scale":var s=i(a.textContent),c=new THREE.Vector3().fromArray(s);n.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:c});break;case"rotate":var s=i(a.textContent),c=new THREE.Vector3().fromArray(s),u=THREE.Math.degToRad(s[3]);n.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:c,angle:u})}}return n}(n),joint:a,position:a.zeroPosition})})})(f.jointIndex,g)}}var m=new THREE.Matrix4;J={joints:o&&o.joints,getJointValue:function(e){var n=c[e];if(n)return n.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,n){var r=c[e];if(r){var i=r.joint;if(n>i.limits.max||n<i.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+n+" outside of limits (min: "+i.limits.min+", max: "+i.limits.max+").");else if(i.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var o=r.object,a=i.axis,s=r.transforms;I.identity();for(var l=0;l<s.length;l++){var u=s[l];if(u.sid&&-1!==u.sid.indexOf(e))switch(i.type){case"revolute":I.multiply(m.makeRotationAxis(a,THREE.Math.degToRad(n)));break;case"prismatic":I.multiply(m.makeTranslation(a.x*n,a.y*n,a.z*n));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+i.type)}else switch(u.type){case"matrix":I.multiply(u.obj);break;case"translate":I.multiply(m.makeTranslation(u.obj.x,u.obj.y,u.obj.z));break;case"scale":I.scale(u.obj);break;case"rotate":I.multiply(m.makeRotationAxis(u.obj,u.angle))}}o.matrix.copy(I),o.matrix.decompose(o.position,o.quaternion,o.scale),c[e].position=n}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}}();var en=(m=r(W,"scene")[0],$(a(r(m,"instance_visual_scene")[0].getAttribute("url"))));return"Z_UP"===X.upAxis&&en.quaternion.setFromEuler(new THREE.Euler(-Math.PI/2,0,0)),en.scale.multiplyScalar(X.unit),{animations:Q,kinematics:J,library:et,scene:en}}}},9434:function(e){e.exports=THREE.FBXLoader=function(){function e(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager}function n(e){this.textureLoader=e}function r(){}function i(){}function o(){}function a(){}function s(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===n||n}function l(){}function c(e){var n=e.match(/FBXVersion: (\d+)/);if(n)return parseInt(n[1]);throw Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function u(e){return e/46186158e3}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,n,r,i){var o=this,a=THREE.LoaderUtils.extractUrlBase(e),s=new THREE.FileLoader(this.manager);s.setResponseType("arraybuffer"),s.load(e,function(r){try{var s=o.parse(r,a);n(s)}catch(n){setTimeout(function(){i&&i(n),o.manager.itemError(e)},0)}},r,i)},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,r){if(i="Kaydara FBX Binary  \x00",e.byteLength>=i.length&&i===k(e,0,i.length))h=new a().parse(e);else{var i,s=k(e);if(!function(e){for(var n=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0,i=0;i<n.length;++i)if(function(n){var i=e[n-1];return e=e.slice(r+n),r++,i}(1)===n[i])return!1;return!0}(s))throw Error("THREE.FBXLoader: Unknown format.");if(7e3>c(s))throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+c(s));h=new o().parse(s)}var l=new THREE.TextureLoader(this.manager).setPath(r).setCrossOrigin(this.crossOrigin);return new n(l).parse(h)}},n.prototype={constructor:n,parse:function(){d=this.parseConnections();var e=this.parseImages(),n=this.parseTextures(e),i=this.parseMaterials(n),o=this.parseDeformers(),a=new r().parse(o);return this.parseScene(o,a,i),f},parseConnections:function(){var e=new Map;return"Connections"in h&&h.Connections.connections.forEach(function(n){var r=n[0],i=n[1],o=n[2];e.has(r)||e.set(r,{parents:[],children:[]}),e.get(r).parents.push({ID:i,relationship:o}),e.has(i)||e.set(i,{parents:[],children:[]}),e.get(i).children.push({ID:r,relationship:o})}),e},parseImages:function(){var e={},n={};if("Video"in h.Objects){var r=h.Objects.Video;for(var i in r){var o=r[i],a=parseInt(i);if(e[a]=o.RelativeFilename||o.Filename,"Content"in o){var s=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,l="string"==typeof o.Content&&""!==o.Content;if(s||l){var c=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=c}}}}for(var a in e){var u=e[a];void 0!==n[u]?e[a]=n[u]:e[a]=e[a].split("\\").pop()}return e},parseImage:function(e){var n,r=e.Content,i=e.RelativeFilename||e.Filename,o=i.slice(i.lastIndexOf(".")+1).toLowerCase();switch(o){case"bmp":n="image/bmp";break;case"jpg":case"jpeg":n="image/jpeg";break;case"png":n="image/png";break;case"tif":n="image/tiff";break;case"tga":if("function"!=typeof THREE.TGALoader){console.warn("FBXLoader: THREE.TGALoader is required to load TGA textures");return}null===THREE.Loader.Handlers.get(".tga")&&THREE.Loader.Handlers.add(/\.tga$/i,new THREE.TGALoader),n="image/tga";break;default:console.warn('FBXLoader: Image type "'+o+'" is not supported.');return}if("string"==typeof r)return"data:"+n+";base64,"+r;var a=new Uint8Array(r);return window.URL.createObjectURL(new Blob([a],{type:n}))},parseTextures:function(e){var n=new Map;if("Texture"in h.Objects){var r=h.Objects.Texture;for(var i in r){var o=this.parseTexture(r[i],e);n.set(parseInt(i),o)}}return n},parseTexture:function(e,n){var r=this.loadTexture(e,n);r.ID=e.id,r.name=e.attrName;var i=e.WrapModeU,o=e.WrapModeV,a=void 0!==i?i.value:0,s=void 0!==o?o.value:0;if(r.wrapS=0===a?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,r.wrapT=0===s?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,"Scaling"in e){var l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}return r},loadTexture:function(e,n){var r,i,o=this.textureLoader.path,a=d.get(e.id).children;void 0!==a&&a.length>0&&void 0!==n[a[0].ID]&&(0===(r=n[a[0].ID]).indexOf("blob:")||0===r.indexOf("data:"))&&this.textureLoader.setPath(void 0);var s=e.FileName.slice(-3).toLowerCase();if("tga"===s){var l=THREE.Loader.Handlers.get(".tga");null===l?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",r),i=new THREE.Texture):i=l.load(r)}else"psd"===s?(console.warn("FBXLoader: PSD textures are not supported, creating empty placeholder texture for",r),i=new THREE.Texture):i=this.textureLoader.load(r);return this.textureLoader.setPath(o),i},parseMaterials:function(e){var n=new Map;if("Material"in h.Objects){var r=h.Objects.Material;for(var i in r){var o=this.parseMaterial(r[i],e);null!==o&&n.set(parseInt(i),o)}}return n},parseMaterial:function(e,n){var r,i=e.id,o=e.attrName,a=e.ShadingModel;if("object"==typeof a&&(a=a.value),!d.has(i))return null;var s=this.parseParameters(e,n,i);switch(a.toLowerCase()){case"phong":r=new THREE.MeshPhongMaterial;break;case"lambert":r=new THREE.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),r=new THREE.MeshPhongMaterial({color:3342591})}return r.setValues(s),r.name=o,r},parseParameters:function(e,n,r){var i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new THREE.Color().fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(i.color=new THREE.Color().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new THREE.Color().fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(i.emissive=new THREE.Color().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new THREE.Color().fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=new THREE.Color().fromArray(e.SpecularColor.value));var o=this;return d.get(r).children.forEach(function(e){var r=e.relationship;switch(r){case"Bump":i.bumpMap=o.getTexture(n,e.ID);break;case"DiffuseColor":i.map=o.getTexture(n,e.ID);break;case"DisplacementColor":i.displacementMap=o.getTexture(n,e.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(n,e.ID);break;case"NormalMap":i.normalMap=o.getTexture(n,e.ID);break;case"ReflectionColor":i.envMap=o.getTexture(n,e.ID),i.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case"SpecularColor":i.specularMap=o.getTexture(n,e.ID);break;case"TransparentColor":i.alphaMap=o.getTexture(n,e.ID),i.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r)}}),i},getTexture:function(e,n){return"LayeredTexture"in h.Objects&&n in h.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=d.get(n).children[0].ID),e.get(n)},parseDeformers:function(){var e={},n={};if("Deformer"in h.Objects){var r=h.Objects.Deformer;for(var i in r){var o=r[i],a=d.get(parseInt(i));if("Skin"===o.attrType){var s=this.parseSkeleton(a,r);s.ID=i,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),s.geometryID=a.parents[0].ID,e[i]=s}else if("BlendShape"===o.attrType){var l={id:i};l.rawTargets=this.parseMorphTargets(a,r),l.id=i,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[i]=l}}}return{skeletons:e,morphTargets:n}},parseSkeleton:function(e,n){var r=[];return e.children.forEach(function(e){var i=n[e.ID];if("Cluster"===i.attrType){var o={ID:e.ID,indices:[],weights:[],transform:new THREE.Matrix4().fromArray(i.Transform.a),transformLink:new THREE.Matrix4().fromArray(i.TransformLink.a),linkMode:i.Mode};"Indexes"in i&&(o.indices=i.Indexes.a,o.weights=i.Weights.a),r.push(o)}}),{rawBones:r,bones:[]}},parseMorphTargets:function(e,n){for(var r=[],i=0;i<e.children.length;i++){if(8===i){console.warn("FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.");break}var o=e.children[i],a=n[o.ID],s={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;d.get(parseInt(o.ID)).children.forEach(function(e){void 0===e.relationship&&(s.geoID=e.ID)}),r.push(s)}return r},parseScene:function(e,n,r){f=new THREE.Group;var o=this.parseModels(e.skeletons,n,r),a=h.Objects.Model,s=this;o.forEach(function(e){var n=a[e.ID];s.setLookAtProperties(e,n),d.get(e.ID).parents.forEach(function(n){var r=o.get(n.ID);void 0!==r&&r.add(e)}),null===e.parent&&f.add(e)}),this.bindSkeleton(e.skeletons,n,o),this.createAmbientLight(),this.setupMorphMaterials();var l=new i().parse();1===f.children.length&&f.children[0].isGroup&&(f.children[0].animations=l,f=f.children[0]),f.animations=l},parseModels:function(e,n,r){var i=new Map,o=h.Objects.Model;for(var a in o){var s=parseInt(a),l=o[a],c=d.get(s),u=this.buildSkeleton(c,e,s,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,n,r);break;case"NurbsCurve":u=this.createCurve(c,n);break;default:u=new THREE.Group}u.name=THREE.PropertyBinding.sanitizeNodeName(l.attrName),u.ID=s}this.setModelTransforms(u,l),i.set(s,u)}return i},buildSkeleton:function(e,n,r,i){var o=null;return e.parents.forEach(function(e){for(var a in n){var s=n[a];s.rawBones.forEach(function(n,a){if(n.ID===e.ID){var l=o;(o=new THREE.Bone).matrixWorld.copy(n.transformLink),o.name=THREE.PropertyBinding.sanitizeNodeName(i),o.ID=r,s.bones[a]=o,null!==l&&o.add(l)}})}}),o},createCamera:function(e){if(e.children.forEach(function(e){var n=h.Objects.NodeAttribute[e.ID];void 0!==n&&(r=n)}),void 0===r)n=new THREE.Object3D;else{var n,r,i=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(i=1);var o=1;void 0!==r.NearPlane&&(o=r.NearPlane.value/1e3);var a=1e3;void 0!==r.FarPlane&&(a=r.FarPlane.value/1e3);var s=window.innerWidth,l=window.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(s=r.AspectWidth.value,l=r.AspectHeight.value);var c=s/l,u=45;void 0!==r.FieldOfView&&(u=r.FieldOfView.value);var d=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:n=new THREE.PerspectiveCamera(u,c,o,a),null!==d&&n.setFocalLength(d);break;case 1:n=new THREE.OrthographicCamera(-s/2,s/2,l/2,-l/2,o,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),n=new THREE.Object3D}}return n},createLight:function(e){if(e.children.forEach(function(e){var n=h.Objects.NodeAttribute[e.ID];void 0!==n&&(r=n)}),void 0===r)n=new THREE.Object3D;else{i=void 0===r.LightType?0:r.LightType.value;var n,r,i,o=16777215;void 0!==r.Color&&(o=new THREE.Color().fromArray(r.Color.value));var a=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(a=0);var s=0;switch(void 0!==r.FarAttenuationEnd&&(s=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value),i){case 0:n=new THREE.PointLight(o,a,s,1);break;case 1:n=new THREE.DirectionalLight(o,a);break;case 2:var l=Math.PI/3;void 0!==r.InnerAngle&&(l=THREE.Math.degToRad(r.InnerAngle.value));var c=0;void 0!==r.OuterAngle&&(c=Math.max(c=THREE.Math.degToRad(r.OuterAngle.value),1)),n=new THREE.SpotLight(o,a,s,l,c,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a THREE.PointLight."),n=new THREE.PointLight(o,a)}void 0!==r.CastShadows&&1===r.CastShadows.value&&(n.castShadow=!0)}return n},createMesh:function(e,n,r){var i,o=null,a=null,s=[];return e.children.forEach(function(e){n.has(e.ID)&&(o=n.get(e.ID)),r.has(e.ID)&&s.push(r.get(e.ID))}),s.length>1?a=s:s.length>0?a=s[0]:(a=new THREE.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in o.attributes&&s.forEach(function(e){e.vertexColors=THREE.VertexColors}),o.FBX_Deformer?(s.forEach(function(e){e.skinning=!0}),i=new THREE.SkinnedMesh(o,a)):i=new THREE.Mesh(o,a),i},createCurve:function(e,n){var r=e.children.reduce(function(e,r){return n.has(r.ID)&&(e=n.get(r.ID)),e},null),i=new THREE.LineBasicMaterial({color:3342591,linewidth:1});return new THREE.Line(r,i)},setModelTransforms:function(e,n){var r={};"RotationOrder"in n&&(r.eulerOrder=parseInt(n.RotationOrder.value)),"Lcl_Translation"in n&&(r.translation=n.Lcl_Translation.value),"RotationOffset"in n&&(r.rotationOffset=n.RotationOffset.value),"Lcl_Rotation"in n&&(r.rotation=n.Lcl_Rotation.value),"PreRotation"in n&&(r.preRotation=n.PreRotation.value),"PostRotation"in n&&(r.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(r.scale=n.Lcl_Scaling.value);var i=x(r);e.applyMatrix(i)},setLookAtProperties:function(e,n){"LookAtProperty"in n&&d.get(e.ID).children.forEach(function(n){if("LookAtProperty"===n.relationship){var r=h.Objects.Model[n.ID];if("Lcl_Translation"in r){var i=r.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(i),f.add(e.target)):e.lookAt(new THREE.Vector3().fromArray(i))}}})},bindSkeleton:function(e,n,r){var i=this.parsePoseNodes();for(var o in e){var a=e[o];d.get(parseInt(a.ID)).parents.forEach(function(e){if(n.has(e.ID)){var o=e.ID;d.get(o).parents.forEach(function(e){r.has(e.ID)&&r.get(e.ID).bind(new THREE.Skeleton(a.bones),i[e.ID])})}})}},parsePoseNodes:function(){var e={};if("Pose"in h.Objects){var n=h.Objects.Pose;for(var r in n)if("BindPose"===n[r].attrType){var i=n[r].PoseNode;Array.isArray(i)?i.forEach(function(n){e[n.Node]=new THREE.Matrix4().fromArray(n.Matrix.a)}):e[i.Node]=new THREE.Matrix4().fromArray(i.Matrix.a)}}return e},createAmbientLight:function(){if("GlobalSettings"in h&&"AmbientColor"in h.GlobalSettings){var e=h.GlobalSettings.AmbientColor.value,n=e[0],r=e[1],i=e[2];if(0!==n||0!==r||0!==i){var o=new THREE.Color(n,r,i);f.add(new THREE.AmbientLight(o,1))}}},setupMorphMaterials:function(){f.traverse(function(e){if(e.isMesh&&(e.geometry.morphAttributes.position||e.geometry.morphAttributes.normal)){var n=e.uuid,r=e.material.uuid,i=!1;f.traverse(function(e){e.isMesh&&e.material.uuid===r&&e.uuid!==n&&(i=!0)}),!0===i&&(e.material=e.material.clone()),e.material.morphTargets=!0}})}},r.prototype={constructor:r,parse:function(e){var n=new Map;if("Geometry"in h.Objects){var r=h.Objects.Geometry;for(var i in r){var o=d.get(parseInt(i)),a=this.parseGeometry(o,r[i],e);n.set(parseInt(i),a)}}return n},parseGeometry:function(e,n,r){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,r);case"NurbsCurve":return this.parseNurbsGeometry(n)}},parseMeshGeometry:function(e,n,r){var i=r.skeletons,o=r.morphTargets,a=e.parents.map(function(e){return h.Objects.Model[e.ID]});if(0!==a.length){var s=e.children.reduce(function(e,n){return void 0!==i[n.ID]&&(e=i[n.ID]),e},null),l=e.children.reduce(function(e,n){return void 0!==o[n.ID]&&(e=o[n.ID]),e},null),c=a[0],u={};"RotationOrder"in c&&(u.eulerOrder=c.RotationOrder.value),"GeometricTranslation"in c&&(u.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(u.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(u.scale=c.GeometricScaling.value);var d=x(u);return this.genGeometry(n,s,l,d)}},genGeometry:function(e,n,r,i){var o=new THREE.BufferGeometry;e.attrName&&(o.name=e.attrName);var a=this.parseGeoNode(e,n),s=this.genBuffers(a),l=new THREE.Float32BufferAttribute(s.vertex,3);if(i.applyToBufferAttribute(l),o.addAttribute("position",l),s.colors.length>0&&o.addAttribute("color",new THREE.Float32BufferAttribute(s.colors,3)),n&&(o.addAttribute("skinIndex",new THREE.Uint16BufferAttribute(s.weightsIndices,4)),o.addAttribute("skinWeight",new THREE.Float32BufferAttribute(s.vertexWeights,4)),o.FBX_Deformer=n),s.normal.length>0){var c=new THREE.Float32BufferAttribute(s.normal,3);new THREE.Matrix3().getNormalMatrix(i).applyToBufferAttribute(c),o.addAttribute("normal",c)}if(s.uvs.forEach(function(e,n){var r="uv"+(n+1).toString();0===n&&(r="uv"),o.addAttribute(r,new THREE.Float32BufferAttribute(s.uvs[n],2))}),a.material&&"AllSame"!==a.material.mappingType){var u=s.materialIndex[0],h=0;if(s.materialIndex.forEach(function(e,n){e!==u&&(o.addGroup(h,n-h,u),u=e,h=n)}),o.groups.length>0){var d=o.groups[o.groups.length-1],f=d.start+d.count;f!==s.materialIndex.length&&o.addGroup(f,s.materialIndex.length-f,u)}0===o.groups.length&&o.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(o,e,r,i),o},parseGeoNode:function(e,n){var r={};if(r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];for(var i=0;e.LayerElementUV[i];)r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},null!==n&&(r.skeleton=n,n.rawBones.forEach(function(e,n){e.indices.forEach(function(i,o){void 0===r.weightTable[i]&&(r.weightTable[i]=[]),r.weightTable[i].push({id:n,weight:e.weights[o]})})})),r},genBuffers:function(e){var n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},r=0,i=0,o=!1,a=[],s=[],l=[],c=[],u=[],h=[],d=this;return e.vertexIndices.forEach(function(f,p){var m=!1;f<0&&(f^=-1,m=!0);var v=[],y=[];if(a.push(3*f,3*f+1,3*f+2),e.color){var b=g(p,r,f,e.color);l.push(b[0],b[1],b[2])}if(e.skeleton){if(void 0!==e.weightTable[f]&&e.weightTable[f].forEach(function(e){y.push(e.weight),v.push(e.id)}),y.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);var w=[0,0,0,0],x=[0,0,0,0];y.forEach(function(e,n){var r=e,i=v[n];x.forEach(function(e,n,o){if(r>e){o[n]=r,r=e;var a=w[n];w[n]=i,i=a}})}),v=w,y=x}for(;y.length<4;)y.push(0),v.push(0);for(var E=0;E<4;++E)u.push(y[E]),h.push(v[E])}if(e.normal){var b=g(p,r,f,e.normal);s.push(b[0],b[1],b[2])}if(e.material&&"AllSame"!==e.material.mappingType)var _=g(p,r,f,e.material)[0];e.uv&&e.uv.forEach(function(e,n){var i=g(p,r,f,e);void 0===c[n]&&(c[n]=[]),c[n].push(i[0]),c[n].push(i[1])}),i++,m&&(d.genFace(n,e,a,_,s,l,c,u,h,i),r++,i=0,a=[],s=[],l=[],c=[],u=[],h=[])}),n},genFace:function(e,n,r,i,o,a,s,l,c,u){for(var h=2;h<u;h++)e.vertex.push(n.vertexPositions[r[0]]),e.vertex.push(n.vertexPositions[r[1]]),e.vertex.push(n.vertexPositions[r[2]]),e.vertex.push(n.vertexPositions[r[(h-1)*3]]),e.vertex.push(n.vertexPositions[r[(h-1)*3+1]]),e.vertex.push(n.vertexPositions[r[(h-1)*3+2]]),e.vertex.push(n.vertexPositions[r[3*h]]),e.vertex.push(n.vertexPositions[r[3*h+1]]),e.vertex.push(n.vertexPositions[r[3*h+2]]),n.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(h-1)*4]),e.vertexWeights.push(l[(h-1)*4+1]),e.vertexWeights.push(l[(h-1)*4+2]),e.vertexWeights.push(l[(h-1)*4+3]),e.vertexWeights.push(l[4*h]),e.vertexWeights.push(l[4*h+1]),e.vertexWeights.push(l[4*h+2]),e.vertexWeights.push(l[4*h+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(h-1)*4]),e.weightsIndices.push(c[(h-1)*4+1]),e.weightsIndices.push(c[(h-1)*4+2]),e.weightsIndices.push(c[(h-1)*4+3]),e.weightsIndices.push(c[4*h]),e.weightsIndices.push(c[4*h+1]),e.weightsIndices.push(c[4*h+2]),e.weightsIndices.push(c[4*h+3])),n.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[(h-1)*3]),e.colors.push(a[(h-1)*3+1]),e.colors.push(a[(h-1)*3+2]),e.colors.push(a[3*h]),e.colors.push(a[3*h+1]),e.colors.push(a[3*h+2])),n.material&&"AllSame"!==n.material.mappingType&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),n.normal&&(e.normal.push(o[0]),e.normal.push(o[1]),e.normal.push(o[2]),e.normal.push(o[(h-1)*3]),e.normal.push(o[(h-1)*3+1]),e.normal.push(o[(h-1)*3+2]),e.normal.push(o[3*h]),e.normal.push(o[3*h+1]),e.normal.push(o[3*h+2])),n.uv&&n.uv.forEach(function(n,r){void 0===e.uvs[r]&&(e.uvs[r]=[]),e.uvs[r].push(s[r][0]),e.uvs[r].push(s[r][1]),e.uvs[r].push(s[r][(h-1)*2]),e.uvs[r].push(s[r][(h-1)*2+1]),e.uvs[r].push(s[r][2*h]),e.uvs[r].push(s[r][2*h+1])})},addMorphTargets:function(e,n,r,i){if(null!==r){e.morphAttributes.position=[],e.morphAttributes.normal=[];var o=this;r.rawTargets.forEach(function(r){var a=h.Objects.Geometry[r.geoID];void 0!==a&&o.genMorphGeometry(e,n,a,i)})}},genMorphGeometry:function(e,n,r,i){var o=new THREE.BufferGeometry;r.attrName&&(o.name=r.attrName);for(var a=void 0!==n.PolygonVertexIndex?n.PolygonVertexIndex.a:[],s=void 0!==n.Vertices?n.Vertices.a.slice():[],l=void 0!==r.Vertices?r.Vertices.a:[],c=void 0!==r.Indexes?r.Indexes.a:[],u=0;u<c.length;u++){var h=3*c[u];s[h]+=l[3*u],s[h+1]+=l[3*u+1],s[h+2]+=l[3*u+2]}var d=this.genBuffers({vertexIndices:a,vertexPositions:s}),f=new THREE.Float32BufferAttribute(d.vertex,3);f.name=r.attrName,i.applyToBufferAttribute(f),e.morphAttributes.position.push(f)},parseNormals:function(e){var n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a,o=[];return"IndexToDirect"===r&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:o,mappingType:n,referenceType:r}},parseUVs:function(e){var n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a,o=[];return"IndexToDirect"===r&&(o=e.UVIndex.a),{dataSize:2,buffer:i,indices:o,mappingType:n,referenceType:r}},parseVertexColors:function(e){var n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a,o=[];return"IndexToDirect"===r&&(o=e.ColorIndex.a),{dataSize:4,buffer:i,indices:o,mappingType:n,referenceType:r}},parseMaterialIndices:function(e){var n=e.MappingInformationType,r=e.ReferenceInformationType;if("NoMappingInformation"===n)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};for(var i=e.Materials.a,o=[],a=0;a<i.length;++a)o.push(a);return{dataSize:1,buffer:i,indices:o,mappingType:n,referenceType:r}},parseNurbsGeometry:function(e){if(void 0===THREE.NURBSCurve)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new THREE.BufferGeometry;var n,r,i=parseInt(e.Order);if(isNaN(i))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new THREE.BufferGeometry;for(var o=i-1,a=e.KnotVector.a,s=[],l=e.Points.a,c=0,u=l.length;c<u;c+=4)s.push(new THREE.Vector4().fromArray(l,c));if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form){n=o,r=a.length-1-n;for(var c=0;c<o;++c)s.push(s[c])}var h=new THREE.NURBSCurve(o,a,s,n,r).getPoints(7*s.length),d=new Float32Array(3*h.length);h.forEach(function(e,n){e.toArray(d,3*n)});var f=new THREE.BufferGeometry;return f.addAttribute("position",new THREE.BufferAttribute(d,3)),f}},i.prototype={constructor:i,parse:function(){var e=[],n=this.parseClips();if(void 0===n)return e;for(var r in n){var i=n[r],o=this.addClip(i);e.push(o)}return e},parseClips:function(){if(void 0!==h.Objects.AnimationCurve){var e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);var n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}},parseAnimationCurveNodes:function(){var e=h.Objects.AnimationCurveNode,n=new Map;for(var r in e){var i=e[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n},parseAnimationCurves:function(e){var n=h.Objects.AnimationCurve;for(var r in n){var i={id:n[r].id,times:n[r].KeyTime.a.map(u),values:n[r].KeyValueFloat.a},o=d.get(i.id);if(void 0!==o){var a=o.parents[0].ID,s=o.parents[0].relationship;s.match(/X/)?e.get(a).curves.x=i:s.match(/Y/)?e.get(a).curves.y=i:s.match(/Z/)?e.get(a).curves.z=i:s.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=i)}}},parseAnimationLayers:function(e){var n=h.Objects.AnimationLayer,r=new Map;for(var i in n){var o=[],a=d.get(parseInt(i));if(void 0!==a){var s=a.children,l=this;s.forEach(function(n,r){if(e.has(n.ID)){var i=e.get(n.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===o[r]){d.get(n.ID).parents.forEach(function(e){void 0!==e.relationship&&(a=e.ID)});var a,s=h.Objects.Model[a.toString()],c={modelName:THREE.PropertyBinding.sanitizeNodeName(s.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1],transform:l.getModelAnimTransform(s)};"PreRotation"in s&&(c.preRotations=s.PreRotation.value),"PostRotation"in s&&(c.postRotations=s.PostRotation.value),o[r]=c}o[r][i.attr]=i}else if(void 0!==i.curves.morph){if(void 0===o[r]){d.get(n.ID).parents.forEach(function(e){void 0!==e.relationship&&(u=e.ID)});var u,f=d.get(u).parents[0].ID,p=d.get(f).parents[0].ID,a=d.get(p).parents[0].ID,s=h.Objects.Model[a],c={modelName:THREE.PropertyBinding.sanitizeNodeName(s.attrName),morphName:h.Objects.Deformer[u].attrName};o[r]=c}o[r][i.attr]=i}}}),r.set(parseInt(i),o)}}return r},getModelAnimTransform:function(e){var n={};return"RotationOrder"in e&&(n.eulerOrder=parseInt(e.RotationOrder.value)),"Lcl_Translation"in e&&(n.translation=e.Lcl_Translation.value),"RotationOffset"in e&&(n.rotationOffset=e.RotationOffset.value),"Lcl_Rotation"in e&&(n.rotation=e.Lcl_Rotation.value),"PreRotation"in e&&(n.preRotation=e.PreRotation.value),"PostRotation"in e&&(n.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(n.scale=e.Lcl_Scaling.value),x(n)},parseAnimStacks:function(e){var n=h.Objects.AnimationStack,r={};for(var i in n){var o=d.get(parseInt(i)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var a=e.get(o[0].ID);r[i]={name:n[i].attrName,layer:a}}return r},addClip:function(e){var n=[],r=this;return e.layer.forEach(function(e){n=n.concat(r.generateTracks(e))}),new THREE.AnimationClip(e.name,-1,n)},generateTracks:function(e){var n=[],r=new THREE.Vector3,i=new THREE.Quaternion,o=new THREE.Vector3;if(e.transform&&e.transform.decompose(r,i,o),r=r.toArray(),i=new THREE.Euler().setFromQuaternion(i).toArray(),o=o.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var a=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");void 0!==a&&n.push(a)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var s=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotations,e.postRotations);void 0!==s&&n.push(s)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var l=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");void 0!==l&&n.push(l)}if(void 0!==e.DeformPercent){var c=this.generateMorphTrack(e);void 0!==c&&n.push(c)}return n},generateVectorTrack:function(e,n,r,i){var o=this.getTimesForAllAxes(n),a=this.getKeyframeTrackValues(o,n,r);return new THREE.VectorKeyframeTrack(e+"."+i,o,a)},generateRotationTrack:function(e,n,r,i,o){void 0!==n.x&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(THREE.Math.degToRad)),void 0!==n.y&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(THREE.Math.degToRad)),void 0!==n.z&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(THREE.Math.degToRad));var a=this.getTimesForAllAxes(n),s=this.getKeyframeTrackValues(a,n,r);void 0!==i&&((i=i.map(THREE.Math.degToRad)).push("ZYX"),i=new THREE.Euler().fromArray(i),i=new THREE.Quaternion().setFromEuler(i)),void 0!==o&&((o=o.map(THREE.Math.degToRad)).push("ZYX"),o=new THREE.Euler().fromArray(o),o=new THREE.Quaternion().setFromEuler(o).inverse());for(var l=new THREE.Quaternion,c=new THREE.Euler,u=[],h=0;h<s.length;h+=3)c.set(s[h],s[h+1],s[h+2],"ZYX"),l.setFromEuler(c),void 0!==i&&l.premultiply(i),void 0!==o&&l.multiply(o),l.toArray(u,h/3*4);return new THREE.QuaternionKeyframeTrack(e+".quaternion",a,u)},generateMorphTrack:function(e){var n=e.DeformPercent.curves.morph,r=n.values.map(function(e){return e/100}),i=f.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new THREE.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+i+"]",n.times,r)},getTimesForAllAxes:function(e){var n=[];return void 0!==e.x&&(n=n.concat(e.x.times)),void 0!==e.y&&(n=n.concat(e.y.times)),void 0!==e.z&&(n=n.concat(e.z.times)),n=n.sort(function(e,n){return e-n}).filter(function(e,n,r){return r.indexOf(e)==n})},getKeyframeTrackValues:function(e,n,r){var i=r,o=[],a=-1,s=-1,l=-1;return e.forEach(function(e){if(n.x&&(a=n.x.times.indexOf(e)),n.y&&(s=n.y.times.indexOf(e)),n.z&&(l=n.z.times.indexOf(e)),-1!==a){var r=n.x.values[a];o.push(r),i[0]=r}else o.push(i[0]);if(-1!==s){var c=n.y.values[s];o.push(c),i[1]=c}else o.push(i[1]);if(-1!==l){var u=n.z.values[l];o.push(u),i[2]=u}else o.push(i[2])}),o},interpolateRotations:function(e){for(var n=1;n<e.values.length;n++){var r=e.values[n-1],i=e.values[n]-r,o=Math.abs(i);if(o>=180){for(var a=o/180,s=i/a,l=r+s,c=e.times[n-1],u=(e.times[n]-c)/a,h=c+u,d=[],f=[];h<e.times[n];)d.push(h),h+=u,f.push(l),l+=s;e.times=T(e.times,n,d),e.values=T(e.values,n,f)}}}},o.prototype={constructor:o,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,n){this.currentProp=e,this.currentPropName=n},parse:function(e){this.currentIndent=0,console.log("FBXTree: ",l),this.allNodes=new l,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var n=this,r=e.split(/[\r\n]+/);return r.forEach(function(e,i){var o=e.match(/^[\s\t]*;/),a=e.match(/^[\s\t]*$/);if(!o&&!a){var s=e.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),l=e.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=e.match("^\\t{"+(n.currentIndent-1)+"}}");s?n.parseNodeBegin(e,s):l?n.parseNodeProperty(e,l,r[++i]):c?n.popStack():e.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(e)}}),this.allNodes},parseNodeBegin:function(e,n){var r=n[1].trim().replace(/^"/,"").replace(/"$/,""),i=n[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:r},a=this.parseNodeAttr(i),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(r,o):r in s?("PoseNode"===r?s.PoseNode.push(o):void 0!==s[r].id&&(s[r]={},s[r][s[r].id]=s[r]),""!==a.id&&(s[r][a.id]=o)):"number"==typeof a.id?(s[r]={},s[r][a.id]=o):"Properties70"!==r&&("PoseNode"===r?s[r]=[o]:s[r]=o),"number"==typeof a.id&&(o.id=a.id),""!==a.name&&(o.attrName=a.name),""!==a.type&&(o.attrType=a.type),this.pushStack(o)},parseNodeAttr:function(e){var n=e[0];""!==e[0]&&isNaN(n=parseInt(e[0]))&&(n=e[0]);var r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:n,name:r,type:i}},parseNodeProperty:function(e,n,r){var i=n[1].replace(/^"/,"").replace(/"$/,"").trim(),o=n[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===i&&","===o&&(o=r.replace(/"/g,"").replace(/,$/,"").trim());var a=this.getCurrentNode();if("Properties70"===a.name){this.parseNodeSpecialProperty(e,i,o);return}if("C"===i){var s=o.split(",").slice(1),l=parseInt(s[0]),c=parseInt(s[1]),u=o.split(",").slice(3);u=u.map(function(e){return e.trim().replace(/^"/,"")}),i="connections",function(e,n){for(var r=0,i=e.length,o=n.length;r<o;r++,i++)e[i]=n[r]}(o=[l,c],u),void 0===a[i]&&(a[i]=[])}"Node"===i&&(a.id=o),i in a&&Array.isArray(a[i])?a[i].push(o):"a"!==i?a[i]=o:a.a=o,this.setCurrentProp(a,i),"a"===i&&","!==o.slice(-1)&&(a.a=_(o))},parseNodePropertyContinued:function(e){var n=this.getCurrentNode();n.a+=e,","!==e.slice(-1)&&(n.a=_(n.a))},parseNodeSpecialProperty:function(e,n,r){var i=r.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=i[0],a=i[1],s=i[2],l=i[3],c=i[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=_(c)}this.getPrevNode()[o]={type:a,type2:s,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),o)}},a.prototype={constructor:a,parse:function(e){var n=new s(e);n.skip(23);var r=n.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+r);for(var i=new l;!this.endOfContent(n);){var o=this.parseNode(n,r);null!==o&&i.add(o.name,o)}return i},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,n){var r={},i=n>=7500?e.getUint64():e.getUint32(),o=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();var a=e.getUint8(),s=e.getString(a);if(0===i)return null;for(var l=[],c=0;c<o;c++)l.push(this.parseProperty(e));var u=l.length>0?l[0]:"",h=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(r.singleProperty=1===o&&e.getOffset()===i;i>e.getOffset();){var f=this.parseNode(e,n);null!==f&&this.parseSubNode(s,r,f)}return r.propertyList=l,"number"==typeof u&&(r.id=u),""!==h&&(r.attrName=h),""!==d&&(r.attrType=d),""!==s&&(r.name=s),r},parseSubNode:function(e,n,r){if(!0===r.singleProperty){var i=r.propertyList[0];Array.isArray(i)?(n[r.name]=r,r.a=i):n[r.name]=i}else if("Connections"===e&&"C"===r.name){var o=[];r.propertyList.forEach(function(e,n){0!==n&&o.push(e)}),void 0===n.connections&&(n.connections=[]),n.connections.push(o)}else if("Properties70"===r.name)Object.keys(r).forEach(function(e){n[e]=r[e]});else if("Properties70"===e&&"P"===r.name){var a,s=r.propertyList[0],l=r.propertyList[1],c=r.propertyList[2],u=r.propertyList[3];0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),0===l.indexOf("Lcl ")&&(l=l.replace("Lcl ","Lcl_")),a="Color"===l||"ColorRGB"===l||"Vector"===l||"Vector3D"===l||0===l.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],n[s]={type:l,type2:c,flag:u,value:a}}else void 0===n[r.name]?"number"==typeof r.id?(n[r.name]={},n[r.name][r.id]=r):n[r.name]=r:"PoseNode"===r.name?(Array.isArray(n[r.name])||(n[r.name]=[n[r.name]]),n[r.name].push(r)):void 0===n[r.name][r.id]&&(n[r.name][r.id]=r)},parseProperty:function(e){var n=e.getString(1);switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var r=e.getUint32();return e.getArrayBuffer(r);case"S":var r=e.getUint32();return e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var i=e.getUint32(),o=e.getUint32(),a=e.getUint32();if(0===o)switch(n){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}"undefined"==typeof Zlib&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var l=new Zlib.Inflate(new Uint8Array(e.getArrayBuffer(a))),c=new s(l.decompress().buffer);switch(n){case"b":case"c":return c.getBooleanArray(i);case"d":return c.getFloat64Array(i);case"f":return c.getFloat32Array(i);case"i":return c.getInt32Array(i);case"l":return c.getInt64Array(i)}default:throw Error("THREE.FBXLoader: Unknown property type "+n)}}},s.prototype={constructor:s,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return(1&this.getUint8())==1},getBooleanArray:function(e){for(var n=[],r=0;r<e;r++)n.push(this.getBoolean());return n},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var n=[],r=0;r<e;r++)n.push(this.getInt32());return n},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,n;return(this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),2147483648&n)?(n=4294967295&~n,4294967295==(e=4294967295&~e)&&(n=n+1&4294967295),-(4294967296*n+(e=e+1&4294967295))):4294967296*n+e},getInt64Array:function(e){for(var n=[],r=0;r<e;r++)n.push(this.getInt64());return n},getUint64:function(){var e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),4294967296*n+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var n=[],r=0;r<e;r++)n.push(this.getFloat32());return n},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var n=[],r=0;r<e;r++)n.push(this.getFloat64());return n},getArrayBuffer:function(e){var n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n},getString:function(e){for(var n=[],r=0;r<e;r++)n[r]=this.getUint8();var i=n.indexOf(0);return i>=0&&(n=n.slice(0,i)),THREE.LoaderUtils.decodeText(new Uint8Array(n))}},l.prototype={constructor:l,add:function(e,n){this[e]=n}};var h,d,f,p=[];function g(e,n,r,i){switch(i.mappingType){case"ByPolygonVertex":o=e;break;case"ByPolygon":o=n;break;case"ByVertice":o=r;break;case"AllSame":o=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}"IndexToDirect"===i.referenceType&&(o=i.indices[o]);var o,a=o*i.dataSize,s=a+i.dataSize;return function(e,n,r,i){for(var o=r,a=0;o<i;o++,a++)e[a]=n[o];return e}(p,i.buffer,a,s)}var m=new THREE.Matrix4,v=new THREE.Euler,y=new THREE.Vector3,b=new THREE.Vector3,w=new THREE.Matrix4;function x(e){var n=new THREE.Matrix4;b.set(0,0,0),w.identity();var r=e.eulerOrder?E(e.eulerOrder):E(0);if(e.translation&&b.fromArray(e.translation),e.rotationOffset&&b.add(y.fromArray(e.rotationOffset)),e.rotation){var i=e.rotation.map(THREE.Math.degToRad);i.push(r),w.makeRotationFromEuler(v.fromArray(i))}if(e.preRotation){var i=e.preRotation.map(THREE.Math.degToRad);i.push(r),m.makeRotationFromEuler(v.fromArray(i)),w.premultiply(m)}if(e.postRotation){var i=e.postRotation.map(THREE.Math.degToRad);i.push(r),m.makeRotationFromEuler(v.fromArray(i)),m.getInverse(m),w.multiply(m)}return e.scale&&n.scale(y.fromArray(e.scale)),n.setPosition(b),n.multiply(w),n}function E(e){return 6===e?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),"ZYX"):["ZYX","YZX","XZY","ZXY","YXZ","XYZ"][e]}function _(e){return e.split(",").map(function(e){return parseFloat(e)})}function k(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=e.byteLength),THREE.LoaderUtils.decodeText(new Uint8Array(e,n,r))}function T(e,n,r){return e.slice(0,n).concat(r).concat(e.slice(n))}return e}()},6453:function(e){e.exports=Object.assign(function(){},{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16})},4379:function(e){e.exports=function(e,n,r){this.type=e,this.index=n,this.pressed=r.pressed,this.value=r.value}},2667:function(e){e.exports={size:5,cellSize:10,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5},autogenerated:!0,cells:[{q:-1,r:0,s:1,h:1,walkable:!0,userData:{}},{q:0,r:-1,s:1,h:1,walkable:!0,userData:{}},{q:0,r:0,s:0,h:1,walkable:!0,userData:{}},{q:1,r:-1,s:0,h:1,walkable:!0,userData:{}},{q:-1,r:1,s:0,h:0,walkable:!0,userData:{}},{q:0,r:1,s:-1,h:0,walkable:!0,userData:{}},{q:1,r:0,s:-1,h:0,walkable:!0,userData:{}}]}},4657:function(e){function n(e){let n=document.getElementById(e),r=n.parentNode;try{r&&r.removeChild(n)}catch(e){}}e.exports=function(e){return e=e||{},function(r,i){var o;return o=i=i||{},new(e.Promise||Promise)(function(e,i){var a;let s=o.timeout||5e3,l="script_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),c=((a=document.createElement("script")).type="text/javascript",a.async=!0,a.id=l,a.src=r,a),u=setTimeout(function(){i(Error("Script request to "+r+" timed out")),n(l)},s),h=function(e){clearTimeout(e)};c.addEventListener("load",function(r){e({ok:!0}),h(u),n(l)}),c.addEventListener("error",function(e){i(Error("Script request to "+r+" failed "+e)),h(u),n(l)}),function(e){let n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}(c)})}}},3471:function(e){var n,r,i,o,a=e.exports={VERSION:"0.1.1",PI:Math.PI,TAU:2*Math.PI,DEG_TO_RAD:.0174532925,RAD_TO_DEG:57.2957795,SQRT3:Math.sqrt(3),TILE:"tile",ENT:"entity",STR:"structure",HEX:"hex",SQR:"square",ABS:"abstract"};a.Board=function(e,n){if(!e)throw Error("You must pass in a grid system for the board to use.");this.tiles=[],this.tileGroup=null,this.group=new THREE.Object3D,this.grid=null,this.overlay=null,this.finder=new a.AStarFinder(n),a.Loader.init(),this.setGrid(e)},a.Board.prototype={setEntityOnTile:function(e,n){var r=this.grid.cellToPixel(n.cell);e.position.copy(r),e.position.y+=e.heightOffset||0,e.tile&&(e.tile.entity=null),e.tile=n,n.entity=e},addTile:function(e){-1===this.tiles.indexOf(e)&&(this.tiles.push(e),this.snapTileToGrid(e),e.position.y=0,this.tileGroup.add(e.mesh),this.grid.add(e.cell),e.cell.tile=e)},removeTile:function(e){if(e){var n=this.tiles.indexOf(e);this.grid.remove(e.cell),-1!==n&&this.tiles.splice(n,1),e.dispose()}},removeAllTiles:function(){if(this.tileGroup)for(var e=this.tileGroup.children,n=0;n<e.length;n++)this.tileGroup.remove(e[n])},getTileAtCell:function(e){var n=this.grid.cellToHash(e);return e.tile||(void 0!==this.grid.cells[n]?this.grid.cells[n].tile:null)},snapToGrid:function(e){var n=this.grid.pixelToCell(e);e.copy(this.grid.cellToPixel(n))},snapTileToGrid:function(e){if(e.cell)e.position.copy(this.grid.cellToPixel(e.cell));else{var n=this.grid.pixelToCell(e.position);e.position.copy(this.grid.cellToPixel(n))}return e},getRandomTile:function(){var e=a.Tools.randomInt(0,this.tiles.length-1);return this.tiles[e]},findPath:function(e,n,r){return this.finder.findPath(e.cell,n.cell,r,this.grid)},setGrid:function(e){this.group.remove(this.tileGroup),this.grid&&e!==this.grid&&(this.removeAllTiles(),this.tiles.forEach(function(e){this.grid.remove(e.cell),e.dispose()}),this.grid.dispose()),this.grid=e,this.tiles=[],this.tileGroup=new THREE.Object3D,this.group.add(this.tileGroup)},generateOverlay:function(e){var n=new THREE.LineBasicMaterial({color:0,opacity:.3});this.overlay&&this.group.remove(this.overlay),this.overlay=new THREE.Object3D,this.grid.generateOverlay(e,this.overlay,n),this.group.add(this.overlay)},generateTilemap:function(e){this.reset();var n=this.grid.generateTiles(e);this.tiles=n,this.tileGroup=new THREE.Object3D;for(var r=0;r<n.length;r++)this.tileGroup.add(n[r].mesh);this.group.add(this.tileGroup)},reset:function(){this.removeAllTiles(),this.tileGroup&&this.group.remove(this.tileGroup)}},a.Board.prototype.constructor=a.Board,a.Cell=function(e,n,r,i){this.q=e||0,this.r=n||0,this.s=r||0,this.h=i||1,this.tile=null,this.userData={},this.walkable=!0,this._calcCost=0,this._priority=0,this._visited=!1,this._parent=null,this.uniqueID=a.LinkedList.generateID()},a.Cell.prototype={set:function(e,n,r){return this.q=e,this.r=n,this.s=r,this},copy:function(e){return this.q=e.q,this.r=e.r,this.s=e.s,this.h=e.h,this.tile=e.tile||null,this.userData=e.userData||{},this.walkable=e.walkable,this},add:function(e){return this.q+=e.q,this.r+=e.r,this.s+=e.s,this},equals:function(e){return this.q===e.q&&this.r===e.r&&this.s===e.s}},a.Cell.prototype.constructor=a.Cell,a.HexGrid=function(e){e=e||{},this.type=a.HEX,this.size=5,this.cellSize=void 0===e.cellSize?10:e.cellSize,this.cells={},this.numCells=0,this.extrudeSettings=null,this.autogenerated=!1;var n,r=[];for(n=0;6>n;n++)r.push(this._createVertex(n));for(this.cellShape=new THREE.Shape,this.cellShape.moveTo(r[0].x,r[0].y),n=1;6>n;n++)this.cellShape.lineTo(r[n].x,r[n].y);this.cellShape.lineTo(r[0].x,r[0].y),this.cellShape.autoClose=!0,this.cellGeo=new THREE.Geometry,this.cellGeo.vertices=r,this.cellGeo.verticesNeedUpdate=!0,this.cellShapeGeo=new THREE.ShapeGeometry(this.cellShape),this._cellWidth=2*this.cellSize,this._cellLength=.5*a.SQRT3*this._cellWidth,this._hashDelimeter=".",this._directions=[new a.Cell(1,-1,0),new a.Cell(1,0,-1),new a.Cell(0,1,-1),new a.Cell(-1,1,0),new a.Cell(-1,0,1),new a.Cell(0,-1,1)],this._diagonals=[new a.Cell(2,-1,-1),new a.Cell(1,1,-2),new a.Cell(-1,2,-1),new a.Cell(-2,1,1),new a.Cell(-1,-1,2),new a.Cell(1,-2,1)],this._list=[],this._vec3=new THREE.Vector3,this._cel=new a.Cell,this._conversionVec=new THREE.Vector3,this._geoCache=[],this._matCache=[]},a.HexGrid.TWO_THIRDS=2/3,a.HexGrid.prototype={cellToPixel:function(e){return this._vec3.x=e.q*this._cellWidth*.75,this._vec3.y=e.h,this._vec3.z=-((e.s-e.r)*this._cellLength*.5),this._vec3},pixelToCell:function(e){var n=e.x*(a.HexGrid.TWO_THIRDS/this.cellSize),r=(-e.x/3+a.SQRT3/3*e.z)/this.cellSize;return this._cel.set(n,r,-n-r),this._cubeRound(this._cel)},getCellAt:function(e){var n=e.x*(a.HexGrid.TWO_THIRDS/this.cellSize),r=(-e.x/3+a.SQRT3/3*e.z)/this.cellSize;return this._cel.set(n,r,-n-r),this._cubeRound(this._cel),this.cells[this.cellToHash(this._cel)]},getNeighbors:function(e,n,r){var i,o,a=this._directions.length;for(this._list.length=0,i=0;a>i;i++)this._cel.copy(e),this._cel.add(this._directions[i]),(o=this.cells[this.cellToHash(this._cel)])&&(!r||r(e,o))&&this._list.push(o);if(n)for(i=0;a>i;i++)this._cel.copy(e),this._cel.add(this._diagonals[i]),(o=this.cells[this.cellToHash(this._cel)])&&(!r||r(e,o))&&this._list.push(o);return this._list},getRandomCell:function(){var e,n=0,r=a.Tools.randomInt(0,this.numCells);for(e in this.cells){if(n===r)break;n++}return this.cells[e]},cellToHash:function(e){return e.q+this._hashDelimeter+e.r+this._hashDelimeter+e.s},distance:function(e,n){return Math.max(Math.abs(e.q-n.q),Math.abs(e.r-n.r),Math.abs(e.s-n.s))+(n.h-e.h)},clearPath:function(){var e,n;for(e in this.cells)(n=this.cells[e])._calcCost=0,n._priority=0,n._parent=null,n._visited=!1},traverse:function(e){var n;for(n in this.cells)e(this.cells[n])},generateTile:function(e,n,r){var i=Math.abs(e.h);1>i&&(i=1);var o=this._geoCache[i];o||(this.extrudeSettings.amount=i,o=new THREE.ExtrudeGeometry(this.cellShape,this.extrudeSettings),this._geoCache[i]=o);var s=new a.Tile({size:this.cellSize,scale:n,cell:e,geometry:o,material:r});return e.tile=s,s},generateTiles:function(e){e=e||{};var n,r,i,o=[],s={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5}};for(n in s=a.Tools.merge(s,e),this.cellSize=s.cellSize,this._cellWidth=2*this.cellSize,this._cellLength=.5*a.SQRT3*this._cellWidth,this.autogenerated=!0,this.extrudeSettings=s.extrudeSettings,this.cells)i=this.cells[n],(r=this.generateTile(i,s.tileScale,s.material)).position.copy(this.cellToPixel(i)),r.position.y=0,o.push(r);return o},generateTilePoly:function(e){e||(e=new THREE.MeshBasicMaterial({color:2405631}));var n=new THREE.Mesh(this.cellShapeGeo,e);return this._vec3.set(1,0,0),n.rotateOnAxis(this._vec3,a.PI/2),n},generate:function(e){var n,r,i,o;for(e=e||{},this.size=void 0===e.size?this.size:e.size,n=-this.size;n<this.size+1;n++)for(r=-this.size;r<this.size+1;r++)i=-n-r,Math.abs(n)<=this.size&&Math.abs(r)<=this.size&&Math.abs(i)<=this.size&&(o=new a.Cell(n,r,i),this.add(o))},generateOverlay:function(e,n,r){var i,o,s,l=this.cellShape.createPointsGeometry();for(i=-e;e+1>i;i++)for(o=-e;e+1>o;o++)if(s=-i-o,Math.abs(i)<=e&&Math.abs(o)<=e&&Math.abs(s)<=e){this._cel.set(i,o,s);var c=new THREE.Line(l,r);c.position.copy(this.cellToPixel(this._cel)),c.rotation.x=90*a.DEG_TO_RAD,n.add(c)}},add:function(e){var n=this.cellToHash(e);if(!this.cells[n])return this.cells[n]=e,this.numCells++,e},remove:function(e){var n=this.cellToHash(e);this.cells[n]&&(delete this.cells[n],this.numCells--)},dispose:function(){this.cells=null,this.numCells=0,this.cellShape=null,this.cellGeo.dispose(),this.cellGeo=null,this.cellShapeGeo.dispose(),this.cellShapeGeo=null,this._list=null,this._vec3=null,this._conversionVec=null,this._geoCache=null,this._matCache=null},load:function(e,n,r){var i=this;a.Tools.getJSON({url:e,callback:function(e){i.fromJSON(e),n.call(r||null,e)},cache:!1,scope:i})},fromJSON:function(e){var n,r,i=e.cells;for(this.cells={},this.numCells=0,this.size=e.size,this.cellSize=e.cellSize,this._cellWidth=2*this.cellSize,this._cellLength=.5*a.SQRT3*this._cellWidth,this.extrudeSettings=e.extrudeSettings,this.autogenerated=e.autogenerated,n=0;n<i.length;n++)(r=new a.Cell).copy(i[n]),this.add(r)},toJSON:function(){var e,n,r={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},i=[];for(n in this.cells)e=this.cells[n],i.push({q:e.q,r:e.r,s:e.s,h:e.h,walkable:e.walkable,userData:e.userData});return r.cells=i,r},_createVertex:function(e){var n=a.TAU/6*e;return new THREE.Vector3(this.cellSize*Math.cos(n),this.cellSize*Math.sin(n),0)},_cubeRound:function(e){var n=Math.round(e.q),r=Math.round(e.r),i=Math.round(e.s),o=Math.abs(n-e.q),a=Math.abs(r-e.r),s=Math.abs(i-e.s);return o>a&&o>s?n=-r-i:a>s?r=-n-i:i=-n-r,this._cel.set(n,r,i)}},a.HexGrid.prototype.constructor=a.HexGrid,a.SqrGrid=function(e){e=e||{},this.type=a.SQR,this.size=5,this.cellSize=void 0===e.cellSize?10:e.cellSize,this.cells={},this.numCells=0,this.extrudeSettings=null,this.autogenerated=!1;var n=[];n.push(new THREE.Vector3),n.push(new THREE.Vector3(-this.cellSize,this.cellSize)),n.push(new THREE.Vector3(this.cellSize,this.cellSize)),n.push(new THREE.Vector3(this.cellSize,-this.cellSize)),this.cellShape=new THREE.Shape,this.cellShape.moveTo(-this.cellSize,-this.cellSize),this.cellShape.lineTo(-this.cellSize,this.cellSize),this.cellShape.lineTo(this.cellSize,this.cellSize),this.cellShape.lineTo(this.cellSize,-this.cellSize),this.cellShape.lineTo(-this.cellSize,-this.cellSize),this.cellGeo=new THREE.Geometry,this.cellGeo.vertices=n,this.cellGeo.verticesNeedUpdate=!0,this.cellShapeGeo=new THREE.ShapeGeometry(this.cellShape),this._fullCellSize=2*this.cellSize,this._hashDelimeter=".",this._directions=[new a.Cell(1,0,0),new a.Cell(0,-1,0),new a.Cell(-1,0,0),new a.Cell(0,1,0)],this._diagonals=[new a.Cell(-1,-1,0),new a.Cell(-1,1,0),new a.Cell(1,1,0),new a.Cell(1,-1,0)],this._list=[],this._vec3=new THREE.Vector3,this._cel=new a.Cell,this._conversionVec=new THREE.Vector3,this._geoCache=[],this._matCache=[]},a.SqrGrid.prototype={cellToPixel:function(e){return this._vec3.x=e.q*this._fullCellSize,this._vec3.y=e.h,this._vec3.z=e.r*this._fullCellSize,this._vec3},pixelToCell:function(e){var n=Math.round(e.x/this._fullCellSize),r=Math.round(e.z/this._fullCellSize);return this._cel.set(n,r,0)},getCellAt:function(e){var n=Math.round(e.x/this._fullCellSize),r=Math.round(e.z/this._fullCellSize);return this._cel.set(n,r),this.cells[this.cellToHash(this._cel)]},getNeighbors:function(e,n,r){var i,o,a=this._directions.length;for(this._list.length=0,i=0;a>i;i++)this._cel.copy(e),this._cel.add(this._directions[i]),(o=this.cells[this.cellToHash(this._cel)])&&(!r||r(e,o))&&this._list.push(o);if(n)for(i=0;a>i;i++)this._cel.copy(e),this._cel.add(this._diagonals[i]),(o=this.cells[this.cellToHash(this._cel)])&&(!r||r(e,o))&&this._list.push(o);return this._list},getRandomCell:function(){var e,n=0,r=a.Tools.randomInt(0,this.numCells);for(e in this.cells){if(n===r)break;n++}return this.cells[e]},cellToHash:function(e){return e.q+this._hashDelimeter+e.r},distance:function(e,n){return Math.max(Math.abs(e.q-n.q),Math.abs(e.r-n.r))+(n.h-e.h)},clearPath:function(){var e,n;for(e in this.cells)(n=this.cells[e])._calcCost=0,n._priority=0,n._parent=null,n._visited=!1},traverse:function(e){var n;for(n in this.cells)e(this.cells[n])},generateTile:function(e,n,r){var i=Math.abs(e.h);1>i&&(i=1);var o=this._geoCache[i];o||(this.extrudeSettings.amount=i,o=new THREE.ExtrudeGeometry(this.cellShape,this.extrudeSettings),this._geoCache[i]=o);var s=new a.Tile({size:this.cellSize,scale:n,cell:e,geometry:o,material:r});return e.tile=s,s},generateTiles:function(e){e=e||{};var n,r,i,o=[],s={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5}};for(n in s=a.Tools.merge(s,e),this.cellSize=s.cellSize,this._fullCellSize=2*this.cellSize,this.autogenerated=!0,this.extrudeSettings=s.extrudeSettings,this.cells)i=this.cells[n],(r=this.generateTile(i,s.tileScale,s.material)).position.copy(this.cellToPixel(i)),r.position.y=0,o.push(r);return o},generateTilePoly:function(e){e||(e=new THREE.MeshBasicMaterial({color:2405631}));var n=new THREE.Mesh(this.cellShapeGeo,e);return this._vec3.set(1,0,0),n.rotateOnAxis(this._vec3,a.PI/2),n},generate:function(e){e=e||{},this.size=void 0===e.size?this.size:e.size;var n,r,i,o=Math.ceil(this.size/2);for(n=-o;o>n;n++)for(r=-o;o>r;r++)i=new a.Cell(n,r+1),this.add(i)},generateOverlay:function(e,n,r){var i,o,s=Math.ceil(e/2);for(i=-s;s>i;i++)for(o=-s;s>o;o++){this._cel.set(i,o);var l=new THREE.Line(this.cellGeo,r);l.position.copy(this.cellToPixel(this._cel)),l.rotation.x=90*a.DEG_TO_RAD,n.add(l)}},add:function(e){var n=this.cellToHash(e);if(!this.cells[n])return this.cells[n]=e,this.numCells++,e},remove:function(e){var n=this.cellToHash(e);this.cells[n]&&(delete this.cells[n],this.numCells--)},dispose:function(){this.cells=null,this.numCells=0,this.cellShape=null,this.cellGeo.dispose(),this.cellGeo=null,this.cellShapeGeo.dispose(),this.cellShapeGeo=null,this._list=null,this._vec3=null,this._conversionVec=null,this._geoCache=null,this._matCache=null},load:function(e,n,r){a.Tools.getJSON({url:e,callback:function(e){this.fromJSON(e),n.call(r||null,e)},cache:!1,scope:this})},fromJSON:function(e){var n,r,i=e.cells;for(this.cells={},this.numCells=0,this.size=e.size,this.cellSize=e.cellSize,this._fullCellSize=2*this.cellSize,this.extrudeSettings=e.extrudeSettings,this.autogenerated=e.autogenerated,n=0;n<i.length;n++)(r=new a.Cell).copy(i[n]),this.add(r)},toJSON:function(){var e,n,r={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},i=[];for(n in this.cells)e=this.cells[n],i.push({q:e.q,r:e.r,s:e.s,h:e.h,walkable:e.walkable,userData:e.userData});return r.cells=i,r}},a.SqrGrid.prototype.constructor=a.SqrGrid,a.Tile=function(e){e=e||{};var n={cell:null,geometry:null,material:null};if(!(n=a.Tools.merge(n,e)).cell||!n.geometry)throw Error("Missing vg.Tile configuration");this.cell=n.cell,this.cell.tile&&this.cell.tile!==this&&this.cell.tile.dispose(),this.cell.tile=this,this.uniqueID=a.Tools.generateID(),this.geometry=n.geometry,this.material=n.material,this.material||(this.material=new THREE.MeshPhongMaterial({color:a.Tools.randomizeRGB("30, 30, 30",13)})),this.objectType=a.TILE,this.entity=null,this.userData={},this.selected=!1,this.highlight="0x0084cc",this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.userData.structure=this,this.position=this.mesh.position,this.rotation=this.mesh.rotation,this.rotation.x=-90*a.DEG_TO_RAD,this.mesh.scale.set(n.scale,n.scale,1),this.material.emissive?this._emissive=this.material.emissive.getHex():this._emissive=null},a.Tile.prototype={select:function(){return this.material.emissive&&this.material.emissive.setHex(this.highlight),this.selected=!0,this},deselect:function(){return null!==this._emissive&&this.material.emissive&&this.material.emissive.setHex(this._emissive),this.selected=!1,this},toggle:function(){return this.selected?this.deselect():this.select(),this},dispose:function(){this.cell&&this.cell.tile&&(this.cell.tile=null),this.cell=null,this.position=null,this.rotation=null,this.mesh.parent&&this.mesh.parent.remove(this.mesh),this.mesh.userData.structure=null,this.mesh=null,this.material=null,this.userData=null,this.entity=null,this.geometry=null,this._emissive=null}},a.Tile.prototype.constructor=a.Tile,n=function(){this.obj=null,this.next=null,this.prev=null,this.free=!0},(r=function(){this.first=null,this.last=null,this.length=0,this.objToNodeMap={},this.uniqueID=Date.now()+""+Math.floor(1e3*Math.random()),this.sortArray=[]}).generateID=function(){return Math.random().toString(36).slice(2)+Date.now()},r.prototype={getNode:function(e){return this.objToNodeMap[e.uniqueID]},addNode:function(e){var i=new n;if(!e.uniqueID)try{e.uniqueID=r.generateID()}catch(e){return console.error("[LinkedList.addNode] obj passed is immutable: cannot attach necessary identifier"),null}return i.obj=e,i.free=!1,this.objToNodeMap[e.uniqueID]=i,i},swapObjects:function(e,n){this.objToNodeMap[e.obj.uniqueID]=null,this.objToNodeMap[n.uniqueID]=e,e.obj=n},add:function(e){var n=this.objToNodeMap[e.uniqueID];if(n){if(!1===n.free)return;n.obj=e,n.free=!1,n.next=null,n.prev=null}else n=this.addNode(e);if(this.first){if(!this.last)throw Error("[LinkedList.add] No last in the list -- that shouldn't happen here");this.last.next=n,n.prev=this.last,this.last=n,n.next=null}else this.first=n,this.last=n,n.next=null,n.prev=null;this.length++,this.showDebug&&this.dump("after add")},has:function(e){return!!this.objToNodeMap[e.uniqueID]},moveUp:function(e){this.dump("before move up");var n=this.getNode(e);if(!n)throw"Oops, trying to move an object that isn't in the list";if(n.prev){var r=n.prev,i=r.prev;n==this.last&&(this.last=r);var o=n.next;i&&(i.next=n),n.next=r,n.prev=r.prev,r.next=o,r.prev=n,this.first==r&&(this.first=n)}},moveDown:function(e){var n=this.getNode(e);if(!n)throw"Oops, trying to move an object that isn't in the list";if(n.next){var r=n.next;this.moveUp(r.obj),this.last==r&&(this.last=n)}},sort:function(e){var n,r,i=this.sortArray,o=this.first;for(i.length=0;o;)i.push(o.obj),o=o.next;for(this.clear(),i.sort(e),r=i.length,n=0;r>n;n++)this.add(i[n])},remove:function(e){var n=this.getNode(e);return!!n&&!n.free&&(n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),n.prev||(this.first=n.next),n.next||(this.last=n.prev),n.free=!0,n.prev=null,n.next=null,this.length--,!0)},shift:function(){var e=this.first;return 0===this.length?null:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.first=e.next,e.next||(this.last=null),e.free=!0,e.prev=null,e.next=null,this.length--,e.obj)},pop:function(){var e=this.last;return 0===this.length?null:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.last=e.prev,e.prev||(this.first=null),e.free=!0,e.prev=null,e.next=null,this.length--,e.obj)},concat:function(e){for(var n=e.first;n;)this.add(n.obj),n=n.next},clear:function(){for(var e=this.first;e;)e.free=!0,e=e.next;this.first=null,this.length=0},dispose:function(){for(var e=this.first;e;)e.obj=null,e=e.next;this.first=null,this.objToNodeMap=null},dump:function(e){console.log("===================="+e+"=====================");for(var n=this.first;n;)console.log("{"+n.obj.toString()+"} previous="+(n.prev?n.prev.obj:"NULL")),n=n.next();console.log("==================================="),console.log("Last: {"+(this.last?this.last.obj:"NULL")+"} First: {"+(this.first?this.first.obj:"NULL")+"}")}},r.prototype.constructor=r,a.LinkedList=r,(i=function(e,n,r,i,o){this._listener=n,this.isOnce=r,this.context=i,this.signal=e,this._priority=o||0}).prototype={active:!0,params:null,execute:function(e){var n,r;return this.active&&this._listener&&(r=this.params?this.params.concat(e):e,n=this._listener.apply(this.context,r),this.isOnce&&this.detach()),n},detach:function(){return this.isBound()?this.signal.remove(this._listener,this.context):null},isBound:function(){return!!this.signal&&!!this._listener},_destroy:function(){delete this.signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this.isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},i.prototype.constructor=i,(o=function(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){o.prototype.dispatch.apply(e,arguments)}}).prototype={memorize:!1,_shouldPropagate:!0,active:!0,validateListener:function(e,n){if("function"!=typeof e)throw Error("Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}",n))},_registerListener:function(e,n,r,o){var a,s=this._indexOfListener(e,r);if(-1!==s){if((a=this._bindings[s]).isOnce!==n)throw Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else a=new i(this,e,n,r,o),this._addBinding(a);return this.memorize&&this._prevParams&&a.execute(this._prevParams),a},_addBinding:function(e){var n=this._bindings.length;do n--;while(this._bindings[n]&&e._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,e)},_indexOfListener:function(e,n){for(var r,i=this._bindings.length;i--;)if((r=this._bindings[i])._listener===e&&r.context===n)return i;return -1},has:function(e,n){return -1!==this._indexOfListener(e,n)},add:function(e,n,r){return this.validateListener(e,"add"),this._registerListener(e,!1,n,r)},addOnce:function(e,n,r){return this.validateListener(e,"addOnce"),this._registerListener(e,!0,n,r)},remove:function(e,n){this.validateListener(e,"remove");var r=this._indexOfListener(e,n);return -1!==r&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},removeAll:function(e){void 0===e&&(e=null);for(var n=this._bindings.length;n--;)e?this._bindings[n].context===e&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)):this._bindings[n]._destroy();e||(this._bindings.length=0)},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var e,n=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=n),r){e=this._bindings.slice(),this._shouldPropagate=!0;do r--;while(e[r]&&this._shouldPropagate&&!1!==e[r].execute(n))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},o.prototype.constructor=o,a.Signal=o,a.AStarFinder=function(e){e=e||{};var n={allowDiagonal:!1,heuristicFilter:null};n=a.Tools.merge(n,e),this.allowDiagonal=n.allowDiagonal,this.heuristicFilter=n.heuristicFilter,this.list=new a.LinkedList},a.AStarFinder.prototype={findPath:function(e,n,r,i){var o,s,l,c,u,h;for(r=r||this.heuristicFilter,i.clearPath(),this.list.clear(),this.list.add(e);this.list.length>0;){if(this.list.sort(this.compare),(o=this.list.shift())._visited=!0,o===n)return a.PathUtil.backtrace(n);for(l=i.getNeighbors(o,this.allowDiagonal,r),u=0,h=l.length;h>u;u++)if((c=l[u]).walkable&&(s=o._calcCost+i.distance(o,c),!c._visited||s<c._calcCost)){if(c._visited=!0,c._parent=o,c._calcCost=s,c._priority=s+i.distance(n,c),c===n)return a.PathUtil.backtrace(n);this.list.add(c)}}return null},compare:function(e,n){return e._priority-n._priority}},a.AStarFinder.prototype.constructor=a.AStarFinder,a.PathUtil={backtrace:function(e){for(var n=[e];e._parent;)n.push(e=e._parent);return n.reverse()},biBacktrace:function(e,n){var r=this.backtrace(e),i=this.backtrace(n);return r.concat(i.reverse())},pathLength:function(e){var n,r,i,o,a,s=0;for(n=1;n<e.length;++n)r=e[n-1],i=e[n],s+=Math.sqrt((o=r[0]-i[0])*o+(a=r[1]-i[1])*a);return s},interpolate:function(e,n,r,i){var o,a,s,l,c,u,h=Math.abs,d=[];for(s=h(r-e),l=h(i-n),o=r>e?1:-1,a=i>n?1:-1,c=s-l;e!==r||n!==i;)d.push([e,n]),(u=2*c)>-l&&(c-=l,e+=o),s>u&&(c+=s,n+=a);return d},expandPath:function(e){var n,r,i,o,a,s,l=[],c=e.length;if(2>c)return l;for(a=0;c-1>a;++a)for(n=e[a],r=e[a+1],o=(i=this.interpolate(n[0],n[1],r[0],r[1])).length,s=0;o-1>s;++s)l.push(i[s]);return l.push(e[c-1]),l},smoothenPath:function(e,n){var r,i,o,a,s,l,c,u,h,d,f,p,g=n.length,m=n[0][0],v=n[0][1],y=n[g-1][0],b=n[g-1][1];for(s=[[r=m,i=v]],c=2;g>c;++c){for(o=(h=n[c])[0],a=h[1],d=this.interpolate(r,i,o,a),p=!1,u=1;u<d.length;++u)if(f=d[u],!e.isWalkableAt(f[0],f[1])){p=!0;break}p&&(l=n[c-1],s.push(l),r=l[0],i=l[1])}return s.push([y,b]),s},compressPath:function(e){if(e.length<3)return e;var n,r,i,o,a,s,l=[],c=e[0][0],u=e[0][1],h=e[1][0],d=e[1][1],f=h-c,p=d-u;for(a=Math.sqrt(f*f+p*p),f/=a,p/=a,l.push([c,u]),s=2;s<e.length;s++)n=h,r=d,i=f,o=p,h=e[s][0],d=e[s][1],a=Math.sqrt((f=h-n)*f+(p=d-r)*p),f/=a,p/=a,(f!==i||p!==o)&&l.push([n,r]);return l.push([h,d]),l}},a.Loader={manager:null,imageLoader:null,crossOrigin:!1,init:function(e){this.crossOrigin=e||!1,this.manager=new THREE.LoadingManager(function(){},function(){},function(){console.warn("Error loading images")}),this.imageLoader=new THREE.ImageLoader(this.manager),this.imageLoader.crossOrigin=e},loadTexture:function(e,n,r,i){var o=new THREE.Texture(null,n);return this.imageLoader.load(e,function(e){o.image=e,o.needsUpdate=!0,r&&r(o)},null,function(e){i&&i(e)}),o.sourceFile=e,o}},a.MouseCaster=function(e,n,r){this.down=!1,this.rightDown=!1,this.pickedObject=null,this.selectedObject=null,this.allHits=null,this.active=!0,this.shift=!1,this.ctrl=!1,this.wheel=0,this.position=new THREE.Vector3,this.screenPosition=new THREE.Vector2,this.signal=new a.Signal,this.group=e,this._camera=n,this._raycaster=new THREE.Raycaster,this._preventDefault=!1,(r=r||document).addEventListener("mousemove",this._onDocumentMouseMove.bind(this),!1),r.addEventListener("mousedown",this._onDocumentMouseDown.bind(this),!1),r.addEventListener("mouseup",this._onDocumentMouseUp.bind(this),!1),r.addEventListener("mousewheel",this._onMouseWheel.bind(this),!1),r.addEventListener("DOMMouseScroll",this._onMouseWheel.bind(this),!1)},a.MouseCaster.OVER="over",a.MouseCaster.OUT="out",a.MouseCaster.DOWN="down",a.MouseCaster.UP="up",a.MouseCaster.CLICK="click",a.MouseCaster.WHEEL="wheel",a.MouseCaster.prototype={update:function(){if(this.active){this._raycaster.setFromCamera(this.screenPosition,this._camera);var e,n,r=this._raycaster.intersectObject(this.group,!0);r.length>0?(n=(e=r[0]).object.userData.structure,this.pickedObject!=n&&(this.pickedObject&&this.signal.dispatch(a.MouseCaster.OUT,this.pickedObject),this.pickedObject=n,this.selectedObject=null,this.signal.dispatch(a.MouseCaster.OVER,this.pickedObject)),this.position.copy(e.point),this.screenPosition.z=e.distance):(this.pickedObject&&this.signal.dispatch(a.MouseCaster.OUT,this.pickedObject),this.pickedObject=null,this.selectedObject=null),this.allHits=r}},preventDefault:function(){this._preventDefault=!0},_onDocumentMouseDown:function(e){return(e=e||window.event).preventDefault(),this._preventDefault?(this._preventDefault=!1,!1):(this.pickedObject&&(this.selectedObject=this.pickedObject),this.shift=e.shiftKey,this.ctrl=e.ctrlKey,this.down=1===e.which,this.rightDown=3===e.which,void this.signal.dispatch(a.MouseCaster.DOWN,this.pickedObject))},_onDocumentMouseUp:function(e){return e.preventDefault(),this._preventDefault?(this._preventDefault=!1,!1):(this.shift=e.shiftKey,this.ctrl=e.ctrlKey,this.signal.dispatch(a.MouseCaster.UP,this.pickedObject),this.selectedObject&&this.pickedObject&&this.selectedObject.uniqueID===this.pickedObject.uniqueID&&this.signal.dispatch(a.MouseCaster.CLICK,this.pickedObject),this.down=1!==e.which&&this.down,void(this.rightDown=3!==e.which&&this.rightDown))},_onDocumentMouseMove:function(e){e.preventDefault(),this.screenPosition.x=e.clientX/window.innerWidth*2-1,this.screenPosition.y=-(2*(e.clientY/window.innerHeight))+1},_onMouseWheel:function(e){if(this.active){e.preventDefault(),e.stopPropagation();var n=0;void 0!==e.wheelDelta?n=e.wheelDelta:void 0!==e.detail&&(n=-e.detail),n>0?this.wheel++:this.wheel--,this.signal.dispatch(a.MouseCaster.WHEEL,this.wheel)}}},a.MouseCaster.prototype.constructor=a.MouseCaster,a.Scene=function(e,n){var r={element:document.body,alpha:!0,antialias:!0,clearColor:"#fff",sortObjects:!1,fog:null,light:new THREE.DirectionalLight(16777215),lightPosition:null,cameraType:"PerspectiveCamera",cameraPosition:null,orthoZoom:4},i={minDistance:100,maxDistance:1e3,zoomSpeed:2,noZoom:!1};if(r=a.Tools.merge(r,e),"boolean"!=typeof n&&(i=a.Tools.merge(i,n)),this.renderer=new THREE.WebGLRenderer({alpha:r.alpha,antialias:r.antialias}),this.renderer.setClearColor(r.clearColor,0),this.renderer.sortObjects=r.sortObjects,this.width=window.innerWidth,this.height=window.innerHeight,this.orthoZoom=r.orthoZoom,this.container=new THREE.Scene,this.container.fog=r.fog,this.container.add(new THREE.AmbientLight(14540253)),r.lightPosition||r.light.position.set(-1,1,-1).normalize(),this.container.add(r.light),"OrthographicCamera"===r.cameraType){var o=window.innerWidth/this.orthoZoom,s=window.innerHeight/this.orthoZoom;this.camera=new THREE.OrthographicCamera(-(o/2),o/2,s/2,-(s/2),1,5e3)}else this.camera=new THREE.PerspectiveCamera(50,this.width/this.height,1,5e3);this.contolled=!!n,this.contolled&&(this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.minDistance=i.minDistance,this.controls.maxDistance=i.maxDistance,this.controls.zoomSpeed=i.zoomSpeed,this.controls.noZoom=i.noZoom),r.cameraPosition&&this.camera.position.copy(r.cameraPosition),window.addEventListener("resize",(function(){if(this.width=window.innerWidth,this.height=window.innerHeight,"OrthographicCamera"===this.camera.type){var e=this.width/this.orthoZoom,n=this.height/this.orthoZoom;this.camera.left=-(e/2),this.camera.right=e/2,this.camera.top=n/2,this.camera.bottom=-(n/2)}else this.camera.aspect=this.width/this.height;this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}).bind(this),!1),this.attachTo(r.element)},a.Scene.prototype={attachTo:function(e){e.style.width=this.width+"px",e.style.height=this.height+"px",this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),e.appendChild(this.renderer.domElement)},add:function(e){this.container.add(e)},remove:function(e){this.container.remove(e)},render:function(){this.contolled&&this.controls.update(),this.renderer.render(this.container,this.camera)},updateOrthoZoom:function(){if(this.orthoZoom<=0)return void(this.orthoZoom=0);var e=this.width/this.orthoZoom,n=this.height/this.orthoZoom;this.camera.left=-(e/2),this.camera.right=e/2,this.camera.top=n/2,this.camera.bottom=-(n/2),this.camera.updateProjectionMatrix()},focusOn:function(e){this.camera.lookAt(e.position)}},a.Scene.prototype.constructor=a.Scene,a.SelectionManager=function(e){this.mouse=e,this.onSelect=new a.Signal,this.onDeselect=new a.Signal,this.selected=null,this.toggleSelection=!1,this.mouse.signal.add(this.onMouse,this)},a.SelectionManager.prototype={select:function(e,n){e&&(n=n||!0,this.selected!==e&&this.clearSelection(n),e.selected?this.toggleSelection&&(n&&this.onDeselect.dispatch(e),e.deselect()):e.select(),this.selected=e,n&&this.onSelect.dispatch(e))},clearSelection:function(e){e=e||!0,this.selected&&(e&&this.onDeselect.dispatch(this.selected),this.selected.deselect()),this.selected=null},onMouse:function(e,n){switch(e){case a.MouseCaster.DOWN:n||this.clearSelection();break;case a.MouseCaster.CLICK:this.select(n)}}},a.SelectionManager.prototype.constructor=a.SelectionManager,a.Tools={clamp:function(e,n,r){return Math.max(n,Math.min(r,e))},sign:function(e){return e&&e/Math.abs(e)},random:function(e,n){return 1==arguments.length?Math.random()*e-.5*e:Math.random()*(n-e)+e},randomInt:function(e,n){return 1==arguments.length?Math.random()*e-.5*e|0:Math.random()*(n-e+1)+e|0},normalize:function(e,n,r){return(e-n)/(r-n)},getShortRotation:function(e){return(e%=this.TAU)>this.PI?e-=this.TAU:e<-this.PI&&(e+=this.TAU),e},generateID:function(){return Math.random().toString(36).slice(2)+Date.now()},isPlainObject:function(e){if("object"!=typeof e||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},merge:function(e,n){var r=this,i=Array.isArray(n),o=i&&[]||{};return i?(e=e||[],o=o.concat(e),n.forEach(function(n,i){void 0===o[i]?o[i]=n:r.isPlainObject(n)?o[i]=r.merge(e[i],n):-1===e.indexOf(n)&&o.push(n)}),o):(e&&r.isPlainObject(e)&&Object.keys(e).forEach(function(n){o[n]=e[n]}),Object.keys(n).forEach(function(i){n[i]&&r.isPlainObject(n[i])&&e[i]?o[i]=r.merge(e[i],n[i]):o[i]=n[i]}),o)},now:function(){return window.nwf?window.nwf.system.Performance.elapsedTime:window.performance.now()},empty:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},radixSort:function(e,n,r,i){if(n=n||0,r=r||e.length,i=i||31,!(n>=r-1||0>i)){for(var o=n,a=r,s=1<<i;a>o;)if(e[o]&s){--a;var l=e[o];e[o]=e[a],e[a]=l}else++o;this.radixSort(e,n,a,i-1),this.radixSort(e,a,r,i-1)}},randomizeRGB:function(e,n){var r,i,o=e.split(","),a="rgb(";for(n=this.randomInt(n),r=0;3>r;r++)0>(i=parseInt(o[r])+n)?i=0:i>255&&(i=255),a+=i+",";return a.substring(0,a.length-1)+")"},getJSON:function(e){var n=new XMLHttpRequest,r=void 0!==e.cache&&e.cache?e.url:e.url+"?t="+Math.floor(1e4*Math.random())+Date.now();n.onreadystatechange=function(){if(200===this.status){var n=null;try{n=JSON.parse(this.responseText)}catch(e){return}return void e.callback.call(e.scope||null,n)}0!==this.status&&console.warn("[Tools.getJSON] Error: "+this.status+" ("+this.statusText+") :: "+e.url)},n.open("GET",r,!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json"),n.send("")}}},7454:function(){!function(e){var n,r,i="KeyboardEvent"in e;i||(e.KeyboardEvent=function(){throw TypeError("Illegal constructor")}),"DOM_KEY_LOCATION_STANDARD"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_STANDARD=0),"DOM_KEY_LOCATION_LEFT"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_LEFT=1),"DOM_KEY_LOCATION_RIGHT"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_RIGHT=2),"DOM_KEY_LOCATION_NUMPAD"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD=3);var o=window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,a=window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,s=window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,l=window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;function c(e,n){return -1!==String(e).indexOf(n)}var u=c(navigator.platform,"Win")?"win":c(navigator.platform,"Mac")?"mac":c(navigator.platform,"CrOS")?"cros":c(navigator.platform,"Linux")?"linux":c(navigator.userAgent,"iPad")||c(navigator.platform,"iPod")||c(navigator.platform,"iPhone")?"ios":"",h=c(navigator.userAgent,"Chrome/")?"chrome":c(navigator.vendor,"Apple")?"safari":c(navigator.userAgent,"MSIE")?"ie":c(navigator.userAgent,"Gecko/")?"moz":c(navigator.userAgent,"Opera/")?"opera":"",d=h+"-"+u;function f(e,n,r){(d===n||h===n||u===n)&&Object.keys(r).forEach(function(n){e[n]=r[n]})}var p={3:{code:"Cancel"},6:{code:"Help"},8:{code:"Backspace"},9:{code:"Tab"},12:{code:"Clear"},13:{code:"Enter"},16:{code:"Shift"},17:{code:"Control"},18:{code:"Alt"},19:{code:"Pause"},20:{code:"CapsLock"},21:{code:"KanaMode"},22:{code:"HangulMode"},23:{code:"JunjaMode"},24:{code:"FinalMode"},25:{code:"KanjiMode"},27:{code:"Escape"},28:{code:"Convert"},29:{code:"NonConvert"},30:{code:"Accept"},31:{code:"ModeChange"},32:{code:"Space"},33:{code:"PageUp"},34:{code:"PageDown"},35:{code:"End"},36:{code:"Home"},37:{code:"ArrowLeft"},38:{code:"ArrowUp"},39:{code:"ArrowRight"},40:{code:"ArrowDown"},41:{code:"Select"},42:{code:"Print"},43:{code:"Execute"},44:{code:"PrintScreen"},45:{code:"Insert"},46:{code:"Delete"},47:{code:"Help"},48:{code:"Digit0",keyCap:"0"},49:{code:"Digit1",keyCap:"1"},50:{code:"Digit2",keyCap:"2"},51:{code:"Digit3",keyCap:"3"},52:{code:"Digit4",keyCap:"4"},53:{code:"Digit5",keyCap:"5"},54:{code:"Digit6",keyCap:"6"},55:{code:"Digit7",keyCap:"7"},56:{code:"Digit8",keyCap:"8"},57:{code:"Digit9",keyCap:"9"},65:{code:"KeyA",keyCap:"a"},66:{code:"KeyB",keyCap:"b"},67:{code:"KeyC",keyCap:"c"},68:{code:"KeyD",keyCap:"d"},69:{code:"KeyE",keyCap:"e"},70:{code:"KeyF",keyCap:"f"},71:{code:"KeyG",keyCap:"g"},72:{code:"KeyH",keyCap:"h"},73:{code:"KeyI",keyCap:"i"},74:{code:"KeyJ",keyCap:"j"},75:{code:"KeyK",keyCap:"k"},76:{code:"KeyL",keyCap:"l"},77:{code:"KeyM",keyCap:"m"},78:{code:"KeyN",keyCap:"n"},79:{code:"KeyO",keyCap:"o"},80:{code:"KeyP",keyCap:"p"},81:{code:"KeyQ",keyCap:"q"},82:{code:"KeyR",keyCap:"r"},83:{code:"KeyS",keyCap:"s"},84:{code:"KeyT",keyCap:"t"},85:{code:"KeyU",keyCap:"u"},86:{code:"KeyV",keyCap:"v"},87:{code:"KeyW",keyCap:"w"},88:{code:"KeyX",keyCap:"x"},89:{code:"KeyY",keyCap:"y"},90:{code:"KeyZ",keyCap:"z"},91:{code:"OSLeft",location:a},92:{code:"OSRight",location:s},93:{code:"ContextMenu"},95:{code:"Standby"},96:{code:"Numpad0",keyCap:"0",location:l},97:{code:"Numpad1",keyCap:"1",location:l},98:{code:"Numpad2",keyCap:"2",location:l},99:{code:"Numpad3",keyCap:"3",location:l},100:{code:"Numpad4",keyCap:"4",location:l},101:{code:"Numpad5",keyCap:"5",location:l},102:{code:"Numpad6",keyCap:"6",location:l},103:{code:"Numpad7",keyCap:"7",location:l},104:{code:"Numpad8",keyCap:"8",location:l},105:{code:"Numpad9",keyCap:"9",location:l},106:{code:"NumpadMultiply",keyCap:"*",location:l},107:{code:"NumpadAdd",keyCap:"+",location:l},108:{code:"NumpadComma",keyCap:",",location:l},109:{code:"NumpadSubtract",keyCap:"-",location:l},110:{code:"NumpadDecimal",keyCap:".",location:l},111:{code:"NumpadDivide",keyCap:"/",location:l},112:{code:"F1"},113:{code:"F2"},114:{code:"F3"},115:{code:"F4"},116:{code:"F5"},117:{code:"F6"},118:{code:"F7"},119:{code:"F8"},120:{code:"F9"},121:{code:"F10"},122:{code:"F11"},123:{code:"F12"},124:{code:"F13"},125:{code:"F14"},126:{code:"F15"},127:{code:"F16"},128:{code:"F17"},129:{code:"F18"},130:{code:"F19"},131:{code:"F20"},132:{code:"F21"},133:{code:"F22"},134:{code:"F23"},135:{code:"F24"},144:{code:"NumLock",location:l},145:{code:"ScrollLock"},160:{code:"ShiftLeft",location:a},161:{code:"ShiftRight",location:s},162:{code:"ControlLeft",location:a},163:{code:"ControlRight",location:s},164:{code:"AltLeft",location:a},165:{code:"AltRight",location:s},166:{code:"BrowserBack"},167:{code:"BrowserForward"},168:{code:"BrowserRefresh"},169:{code:"BrowserStop"},170:{code:"BrowserSearch"},171:{code:"BrowserFavorites"},172:{code:"BrowserHome"},173:{code:"VolumeMute"},174:{code:"VolumeDown"},175:{code:"VolumeUp"},176:{code:"MediaTrackNext"},177:{code:"MediaTrackPrevious"},178:{code:"MediaStop"},179:{code:"MediaPlayPause"},180:{code:"LaunchMail"},181:{code:"MediaSelect"},182:{code:"LaunchApp1"},183:{code:"LaunchApp2"},186:{code:"Semicolon",keyCap:";"},187:{code:"Equal",keyCap:"="},188:{code:"Comma",keyCap:","},189:{code:"Minus",keyCap:"-"},190:{code:"Period",keyCap:"."},191:{code:"Slash",keyCap:"/"},192:{code:"Backquote",keyCap:"`"},219:{code:"BracketLeft",keyCap:"["},220:{code:"Backslash",keyCap:"\\"},221:{code:"BracketRight",keyCap:"]"},222:{code:"Quote",keyCap:"'"},226:{code:"IntlBackslash",keyCap:"\\"},229:{code:"Process"},246:{code:"Attn"},247:{code:"CrSel"},248:{code:"ExSel"},249:{code:"EraseEof"},250:{code:"Play"},251:{code:"ZoomToggle"},254:{code:"Clear"}};f(p,"moz",{59:{code:"Semicolon",keyCap:";"},61:{code:"Equal",keyCap:"="},107:{code:"Equal",keyCap:"="},109:{code:"Minus",keyCap:"-"},187:{code:"NumpadAdd",keyCap:"+",location:l},189:{code:"NumpadSubtract",keyCap:"-",location:l}}),f(p,"moz-mac",{12:{code:"NumLock",location:l},173:{code:"Minus",keyCap:"-"}}),f(p,"moz-win",{173:{code:"Minus",keyCap:"-"}}),f(p,"chrome-mac",{93:{code:"OSRight",location:s}}),f(p,"safari",{3:{code:"Enter"},25:{code:"Tab"}}),f(p,"ios",{10:{code:"Enter",location:o}}),f(p,"safari-mac",{91:{code:"OSLeft",location:a},93:{code:"OSRight",location:s},229:{code:"KeyQ",keyCap:"Q"}});var g={};"cros"===u&&(g["U+00A0"]={code:"ShiftLeft",location:a},g["U+00A1"]={code:"ShiftRight",location:s},g["U+00A2"]={code:"ControlLeft",location:a},g["U+00A3"]={code:"ControlRight",location:s},g["U+00A4"]={code:"AltLeft",location:a},g["U+00A5"]={code:"AltRight",location:s}),"chrome-mac"===d&&(g["U+0010"]={code:"ContextMenu"}),"safari-mac"===d&&(g["U+0010"]={code:"ContextMenu"}),"ios"===u&&(g["U+0010"]={code:"Function"},g["U+001C"]={code:"ArrowLeft"},g["U+001D"]={code:"ArrowRight"},g["U+001E"]={code:"ArrowUp"},g["U+001F"]={code:"ArrowDown"},g["U+0001"]={code:"Home"},g["U+0004"]={code:"End"},g["U+000B"]={code:"PageUp"},g["U+000C"]={code:"PageDown"});var m=[];m[a]={16:{code:"ShiftLeft",location:a},17:{code:"ControlLeft",location:a},18:{code:"AltLeft",location:a}},m[s]={16:{code:"ShiftRight",location:s},17:{code:"ControlRight",location:s},18:{code:"AltRight",location:s}},m[l]={13:{code:"NumpadEnter",location:l}},f(m[l],"moz",{109:{code:"NumpadSubtract",location:l},107:{code:"NumpadAdd",location:l}}),f(m[a],"moz-mac",{224:{code:"OSLeft",location:a}}),f(m[s],"moz-mac",{224:{code:"OSRight",location:s}}),f(m[s],"moz-win",{91:{code:"OSRight",location:s}}),f(m[s],"mac",{93:{code:"OSRight",location:s}}),f(m[l],"chrome-mac",{12:{code:"NumLock",location:l}}),f(m[l],"safari-mac",{12:{code:"NumLock",location:l},187:{code:"NumpadAdd",location:l},189:{code:"NumpadSubtract",location:l},190:{code:"NumpadDecimal",location:l},191:{code:"NumpadDivide",location:l}});var v={ShiftLeft:{key:"Shift"},ShiftRight:{key:"Shift"},ControlLeft:{key:"Control"},ControlRight:{key:"Control"},AltLeft:{key:"Alt"},AltRight:{key:"Alt"},OSLeft:{key:"OS"},OSRight:{key:"OS"},NumpadEnter:{key:"Enter"},Space:{key:" "},Digit0:{key:"0",shiftKey:")"},Digit1:{key:"1",shiftKey:"!"},Digit2:{key:"2",shiftKey:"@"},Digit3:{key:"3",shiftKey:"#"},Digit4:{key:"4",shiftKey:"$"},Digit5:{key:"5",shiftKey:"%"},Digit6:{key:"6",shiftKey:"^"},Digit7:{key:"7",shiftKey:"&"},Digit8:{key:"8",shiftKey:"*"},Digit9:{key:"9",shiftKey:"("},KeyA:{key:"a",shiftKey:"A"},KeyB:{key:"b",shiftKey:"B"},KeyC:{key:"c",shiftKey:"C"},KeyD:{key:"d",shiftKey:"D"},KeyE:{key:"e",shiftKey:"E"},KeyF:{key:"f",shiftKey:"F"},KeyG:{key:"g",shiftKey:"G"},KeyH:{key:"h",shiftKey:"H"},KeyI:{key:"i",shiftKey:"I"},KeyJ:{key:"j",shiftKey:"J"},KeyK:{key:"k",shiftKey:"K"},KeyL:{key:"l",shiftKey:"L"},KeyM:{key:"m",shiftKey:"M"},KeyN:{key:"n",shiftKey:"N"},KeyO:{key:"o",shiftKey:"O"},KeyP:{key:"p",shiftKey:"P"},KeyQ:{key:"q",shiftKey:"Q"},KeyR:{key:"r",shiftKey:"R"},KeyS:{key:"s",shiftKey:"S"},KeyT:{key:"t",shiftKey:"T"},KeyU:{key:"u",shiftKey:"U"},KeyV:{key:"v",shiftKey:"V"},KeyW:{key:"w",shiftKey:"W"},KeyX:{key:"x",shiftKey:"X"},KeyY:{key:"y",shiftKey:"Y"},KeyZ:{key:"z",shiftKey:"Z"},Numpad0:{key:"0"},Numpad1:{key:"1"},Numpad2:{key:"2"},Numpad3:{key:"3"},Numpad4:{key:"4"},Numpad5:{key:"5"},Numpad6:{key:"6"},Numpad7:{key:"7"},Numpad8:{key:"8"},Numpad9:{key:"9"},NumpadMultiply:{key:"*"},NumpadAdd:{key:"+"},NumpadComma:{key:","},NumpadSubtract:{key:"-"},NumpadDecimal:{key:"."},NumpadDivide:{key:"/"},Semicolon:{key:";",shiftKey:":"},Equal:{key:"=",shiftKey:"+"},Comma:{key:",",shiftKey:"<"},Minus:{key:"-",shiftKey:"_"},Period:{key:".",shiftKey:">"},Slash:{key:"/",shiftKey:"?"},Backquote:{key:"`",shiftKey:"~"},BracketLeft:{key:"[",shiftKey:"{"},Backslash:{key:"\\",shiftKey:"|"},BracketRight:{key:"]",shiftKey:"}"},Quote:{key:"'",shiftKey:'"'},IntlBackslash:{key:"\\",shiftKey:"|"}};f(v,"mac",{OSLeft:{key:"Meta"},OSRight:{key:"Meta"}});var y={Esc:"Escape",Nonconvert:"NonConvert",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Menu:"ContextMenu",MediaNextTrack:"MediaTrackNext",MediaPreviousTrack:"MediaTrackPrevious",SelectMedia:"MediaSelect",HalfWidth:"Hankaku",FullWidth:"Zenkaku",RomanCharacters:"Romaji",Crsel:"CrSel",Exsel:"ExSel",Zoom:"ZoomToggle"},b=(n="code",r={},Object.keys(p).forEach(function(e){var i=p[e];n in i&&(r[i[n]]=i)}),r);try{var w=i&&"location"in new KeyboardEvent("")}catch(e){}function x(e){var n,r="keyCode"in e?e.keyCode:"which"in e?e.which:0,i=function(){if(w||"keyLocation"in e){var n=w?e.location:e.keyLocation;if(n&&r in m[n])return m[n][r]}return"keyIdentifier"in e&&e.keyIdentifier in g?g[e.keyIdentifier]:r in p?p[r]:null}();if(!i)return null;var o=(n=v[i.code])?e.shiftKey&&"shiftKey"in n?n.shiftKey:n.key:i.code;return{code:i.code,key:o,location:i.location,keyCap:i.keyCap}}"KeyboardEvent"in e&&"defineProperty"in Object&&function(){function e(e,n,r){n in e||Object.defineProperty(e,n,r)}if(e(KeyboardEvent.prototype,"code",{get:function(){var e=x(this);return e?e.code:""}}),"key"in KeyboardEvent.prototype){var n=Object.getOwnPropertyDescriptor(KeyboardEvent.prototype,"key");Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){var e=n.get.call(this);return y.hasOwnProperty(e)?y[e]:e}})}e(KeyboardEvent.prototype,"key",{get:function(){var e=x(this);return e&&"key"in e?e.key:"Unidentified"}}),e(KeyboardEvent.prototype,"location",{get:function(){var e=x(this);return e&&"location"in e?e.location:o}}),e(KeyboardEvent.prototype,"locale",{get:function(){return""}})}(),"queryKeyCap"in e.KeyboardEvent||(e.KeyboardEvent.queryKeyCap=function(e,n){if(e=String(e),!b.hasOwnProperty(e))return"Undefined";if(n&&"en-us"!==String(n).toLowerCase())throw Error("Unsupported locale");var r=b[e];return r.keyCap||r.code||"Undefined"}),e.identifyKey=function(e){if(!("code"in e)){var n=x(e);e.code=n?n.code:"",e.key=n&&"key"in n?n.key:"Unidentified",e.location="location"in e?e.location:"keyLocation"in e?e.keyLocation:n&&"location"in n?n.location:o,e.locale=""}}}(window)},3386:function(e){e.exports=AFRAME.registerComponent("checkpoint-controls",{schema:{enabled:{default:!0},mode:{default:"teleport",oneOf:["teleport","animate"]},animateSpeed:{default:3}},init:function(){this.active=!0,this.checkpoint=null,this.isNavMeshConstrained=!1,this.offset=new THREE.Vector3,this.position=new THREE.Vector3,this.targetPosition=new THREE.Vector3},play:function(){this.active=!0},pause:function(){this.active=!1},setCheckpoint:function(e){let n=this.el;if(this.active&&this.checkpoint!==e){if(this.checkpoint&&n.emit("navigation-end",{checkpoint:this.checkpoint}),this.checkpoint=e,this.sync(),.1>this.position.distanceTo(this.targetPosition)){this.checkpoint=null;return}n.emit("navigation-start",{checkpoint:e}),"teleport"===this.data.mode&&(this.el.setAttribute("position",this.targetPosition),this.checkpoint=null,n.emit("navigation-end",{checkpoint:e}),n.components["movement-controls"].updateNavLocation())}},isVelocityActive:function(){return!!(this.active&&this.checkpoint)},getVelocity:function(){if(!this.active)return;let e=this.data,n=this.offset,r=this.position,i=this.targetPosition,o=this.checkpoint;return(this.sync(),.1>r.distanceTo(i))?(this.checkpoint=null,this.el.emit("navigation-end",{checkpoint:o}),n.set(0,0,0)):(n.setLength(e.animateSpeed),n)},sync:function(){let e=this.offset,n=this.position,r=this.targetPosition;n.copy(this.el.getAttribute("position")),this.checkpoint.object3D.getWorldPosition(r),r.add(this.checkpoint.components.checkpoint.getOffset()),e.copy(r).sub(n)}})},5062:function(e,n,r){let i=r(6453),o=r(4379),a={LEFT:"left",RIGHT:"right"},s={MOVEMENT:1,ROTATION:2};e.exports=AFRAME.registerComponent("gamepad-controls",{GamepadButton:i,schema:{enabled:{default:!0},camera:{default:"[camera]",type:"selector"},rotationSensitivity:{default:2}},init:function(){let e=this.el.sceneEl;this.system=e.systems["tracked-controls-webxr"]||{controllers:[]},this.prevTime=window.performance.now(),this.buttons={};let n=this.el.object3D.rotation;this.pitch=new THREE.Object3D,this.pitch.rotation.x=THREE.Math.degToRad(n.x),this.yaw=new THREE.Object3D,this.yaw.position.y=10,this.yaw.rotation.y=THREE.Math.degToRad(n.y),this.yaw.add(this.pitch),this._lookVector=new THREE.Vector2,this._moveVector=new THREE.Vector2,this._dpadVector=new THREE.Vector2,e.addBehavior(this)},update:function(){this.tick()},tick:function(e,n){this.updateButtonState(),this.updateRotation(n)},remove:function(){},isVelocityActive:function(){if(!this.data.enabled||!this.isConnected())return!1;let e=this._dpadVector,n=this._moveVector;this.getDpad(e),this.getJoystick(s.MOVEMENT,n);let r=e.x||n.x,i=e.y||n.y;return Math.abs(r)>.2||Math.abs(i)>.2},getVelocityDelta:function(){let e=this._dpadVector,n=this._moveVector;this.getDpad(e),this.getJoystick(s.MOVEMENT,n);let r=e.x||n.x,i=e.y||n.y,o=new THREE.Vector3;return Math.abs(r)>.2&&(o.x+=r),Math.abs(i)>.2&&(o.z+=i),o},isRotationActive:function(){if(!this.data.enabled||!this.isConnected())return!1;let e=this._lookVector;return this.getJoystick(s.ROTATION,e),Math.abs(e.x)>.2||Math.abs(e.y)>.2},updateRotation:function(e){if(!this.isRotationActive())return;let n=this.data,r=this.yaw,i=this.pitch,o=n.camera.components["look-controls"],a=o&&o.pitchObject&&o.yawObject;a&&(i.rotation.copy(o.pitchObject.rotation),r.rotation.copy(o.yawObject.rotation));let l=this._lookVector;this.getJoystick(s.ROTATION,l),.2>=Math.abs(l.x)&&(l.x=0),.2>=Math.abs(l.y)&&(l.y=0),l.multiplyScalar(n.rotationSensitivity*e/1e3),r.rotation.y-=l.x,i.rotation.x-=l.y,i.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,i.rotation.x)),n.camera.object3D.rotation.set(i.rotation.x,r.rotation.y,0),a&&(o.pitchObject.rotation.copy(i.rotation),o.yawObject.rotation.copy(r.rotation))},updateButtonState:function(){let e=this.getGamepad(a.RIGHT);if(this.data.enabled&&e)for(var n=0;n<e.buttons.length;n++)e.buttons[n].pressed&&!this.buttons[n]?this.emit(new o("gamepadbuttondown",n,e.buttons[n])):!e.buttons[n].pressed&&this.buttons[n]&&this.emit(new o("gamepadbuttonup",n,e.buttons[n])),this.buttons[n]=e.buttons[n].pressed;else Object.keys(this.buttons)&&(this.buttons={})},emit:function(e){this.el.emit(e.type,e),this.el.emit(e.type+":"+e.index,new o(e.type,e.index,e))},getGamepad:function(){let e=[],n=[];return function(r){let i=this.el.sceneEl.components["proxy-controls"],o=i&&i.isConnected()&&i.getGamepad(0);if(o)return o;e.length=0;for(let n=0;n<this.system.controllers.length;n++){let i=this.system.controllers[n],o=i?i.gamepad:null;if(e.push(o),o&&o.handedness===r)return o}let a=navigator.getGamepads?navigator.getGamepads():n;for(let e=0;e<a.length;e++){let n=a[e];if(n&&n.hand===r)return n}return e[0]||a[0]}}(),getButton:function(e){return this.getGamepad(a.RIGHT).buttons[e]},getAxis:function(e){return this.getGamepad(e>1?a.RIGHT:a.LEFT).axes[e]},getJoystick:function(e,n){let r=this.getGamepad(e===s.MOVEMENT?a.LEFT:a.RIGHT);if("xr-standard"===r.mapping)switch(e){case s.MOVEMENT:return n.set(r.axes[2],r.axes[3]);case s.ROTATION:return n.set(r.axes[0],r.axes[1])}else switch(e){case s.MOVEMENT:return n.set(r.axes[0],r.axes[1]);case s.ROTATION:return n.set(r.axes[2],r.axes[3])}throw Error('Unexpected joystick index "%d".',e)},getDpad:function(e){let n=this.getGamepad(a.LEFT);return n.buttons[i.DPAD_RIGHT]?e.set((n.buttons[i.DPAD_RIGHT].pressed?1:0)+(n.buttons[i.DPAD_LEFT].pressed?-1:0),(n.buttons[i.DPAD_UP].pressed?-1:0)+(n.buttons[i.DPAD_DOWN].pressed?1:0)):e.set(0,0)},isConnected:function(){let e=this.getGamepad(a.LEFT);return!!(e&&e.connected)},getID:function(){return this.getGamepad(a.LEFT).id}})},2406:function(e,n,r){r(3386),r(5062),r(2250),r(9048),r(3819),r(9893)},2250:function(e,n,r){r(7454);let i=window.KeyboardEvent;e.exports=AFRAME.registerComponent("keyboard-controls",{schema:{enabled:{default:!0},debug:{default:!1}},init:function(){this.dVelocity=new THREE.Vector3,this.localKeys={},this.listeners={keydown:this.onKeyDown.bind(this),keyup:this.onKeyUp.bind(this),blur:this.onBlur.bind(this)},this.attachEventListeners()},isVelocityActive:function(){return this.data.enabled&&!!Object.keys(this.getKeys()).length},getVelocityDelta:function(){let e=this.data,n=this.getKeys();return this.dVelocity.set(0,0,0),e.enabled&&((n.KeyW||n.ArrowUp)&&(this.dVelocity.z-=1),(n.KeyA||n.ArrowLeft)&&(this.dVelocity.x-=1),(n.KeyS||n.ArrowDown)&&(this.dVelocity.z+=1),(n.KeyD||n.ArrowRight)&&(this.dVelocity.x+=1)),this.dVelocity.clone()},play:function(){this.attachEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.pause()},attachEventListeners:function(){window.addEventListener("keydown",this.listeners.keydown,!1),window.addEventListener("keyup",this.listeners.keyup,!1),window.addEventListener("blur",this.listeners.blur,!1)},removeEventListeners:function(){window.removeEventListener("keydown",this.listeners.keydown),window.removeEventListener("keyup",this.listeners.keyup),window.removeEventListener("blur",this.listeners.blur)},onKeyDown:function(e){AFRAME.utils.shouldCaptureKeyEvent(e)&&(this.localKeys[e.code]=!0,this.emit(e))},onKeyUp:function(e){AFRAME.utils.shouldCaptureKeyEvent(e)&&(delete this.localKeys[e.code],this.emit(e))},onBlur:function(){for(let e in this.localKeys)this.localKeys.hasOwnProperty(e)&&delete this.localKeys[e]},emit:function(e){"__keyboard-controls-proxy"in e&&this.el.emit(e.type,e),this.el.emit(e.type+":"+e.code,new i(e.type,e)),this.data.debug&&console.log(e.type+":"+e.code)},isPressed:function(e){return e in this.getKeys()},getKeys:function(){return this.isProxied()?this.el.sceneEl.components["proxy-controls"].getKeyboard():this.localKeys},isProxied:function(){let e=this.el.sceneEl.components["proxy-controls"];return e&&e.isConnected()}})},3819:function(e){let n="-controls";e.exports=AFRAME.registerComponent("movement-controls",{dependencies:["rotation"],schema:{enabled:{default:!0},controls:{default:["gamepad","trackpad","keyboard","touch"]},speed:{default:.3,min:0},fly:{default:!1},constrainToNavMesh:{default:!1},camera:{default:"[movement-controls] [camera]",type:"selector"}},init:function(){let e=this.el;this.velocityCtrl=null,this.velocity=new THREE.Vector3,this.heading=new THREE.Quaternion,this.navGroup=null,this.navNode=null,e.sceneEl.hasLoaded?this.injectControls():e.sceneEl.addEventListener("loaded",this.injectControls.bind(this))},update:function(e){let n=this.el,r=this.data,i=n.sceneEl.systems.nav;n.sceneEl.hasLoaded&&this.injectControls(),i&&r.constrainToNavMesh!==e.constrainToNavMesh&&(r.constrainToNavMesh?i.addAgent(this):i.removeAgent(this))},injectControls:function(){var e;let r=this.data;for(let i=0;i<r.controls.length;i++)e=r.controls[i]+n,this.el.components[e]||this.el.setAttribute(e,"")},updateNavLocation:function(){this.navGroup=null,this.navNode=null},tick:function(){let e=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3;return function(i,o){if(!o)return;let a=this.el,s=this.data;if(!s.enabled)return;this.updateVelocityCtrl();let l=this.velocityCtrl,c=this.velocity;if(l){if(o/1e3>.2?c.set(0,0,0):this.updateVelocity(o),s.constrainToNavMesh&&!1!==l.isNavMeshConstrained){if(1e-5>c.lengthSq())return;e.copy(a.object3D.position),n.copy(c).multiplyScalar(o/1e3).add(e);let i=a.sceneEl.systems.nav;this.navGroup=null===this.navGroup?i.getGroup(e):this.navGroup,this.navNode=this.navNode||i.getNode(e,this.navGroup),this.navNode=i.clampStep(e,n,this.navGroup,this.navNode,r),a.object3D.position.copy(r)}else a.hasAttribute("velocity")?a.setAttribute("velocity",c):(a.object3D.position.x+=c.x*o/1e3,a.object3D.position.y+=c.y*o/1e3,a.object3D.position.z+=c.z*o/1e3)}}}(),updateVelocityCtrl:function(){let e=this.data;if(e.enabled){for(let r=0,i=e.controls.length;r<i;r++){let i=this.el.components[e.controls[r]+n];if(i&&i.isVelocityActive()){this.velocityCtrl=i;return}}this.velocityCtrl=null}},updateVelocity:function(){let e=new THREE.Vector2,n=new THREE.Quaternion;return function(r){let i;let o=this.el,a=this.velocityCtrl,s=this.velocity,l=this.data;if(a){if(a.getVelocityDelta)i=a.getVelocityDelta(r);else if(a.getVelocity){s.copy(a.getVelocity());return}else if(a.getPositionDelta){s.copy(a.getPositionDelta(r).multiplyScalar(1e3/r));return}else throw Error("Incompatible movement controls: ",a)}if(o.hasAttribute("velocity")&&!l.constrainToNavMesh&&s.copy(this.el.getAttribute("velocity")),i&&l.enabled){let r=l.camera;n.copy(r.object3D.quaternion),n.premultiply(o.object3D.quaternion),i.applyQuaternion(n);let a=i.length();l.fly?(s.copy(i),s.multiplyScalar(16.66667*this.data.speed)):(e.set(i.x,i.z),e.setLength(a*this.data.speed*16.66667),s.x=e.x,s.z=e.y)}}}()})},9048:function(e){e.exports=AFRAME.registerComponent("touch-controls",{schema:{enabled:{default:!0},reverseEnabled:{default:!0}},init:function(){this.dVelocity=new THREE.Vector3,this.bindMethods(),this.direction=0},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){let e=this.el.sceneEl,n=e.canvas;if(!n){e.addEventListener("render-target-loaded",this.addEventListeners.bind(this));return}n.addEventListener("touchstart",this.onTouchStart),n.addEventListener("touchend",this.onTouchEnd)},removeEventListeners:function(){let e=this.el.sceneEl&&this.el.sceneEl.canvas;e&&(e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchend",this.onTouchEnd))},isVelocityActive:function(){return this.data.enabled&&!!this.direction},getVelocityDelta:function(){return this.dVelocity.z=this.direction,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this)},onTouchStart:function(e){this.direction=-1,this.data.reverseEnabled&&2===e.touches.length&&(this.direction=1),e.preventDefault()},onTouchEnd:function(e){this.direction=0,e.preventDefault()}})},9893:function(e){e.exports=AFRAME.registerComponent("trackpad-controls",{schema:{enabled:{default:!0},enableNegX:{default:!0},enablePosX:{default:!0},enableNegZ:{default:!0},enablePosZ:{default:!0},mode:{default:"touch",oneOf:["swipe","touch","press"]}},init:function(){this.dVelocity=new THREE.Vector3,this.zVel=0,this.xVel=0,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){let e=this.data,n=this.el.sceneEl;switch(n.addEventListener("axismove",this.onAxisMove),e.mode){case"swipe":case"touch":n.addEventListener("trackpadtouchstart",this.onTouchStart),n.addEventListener("trackpadtouchend",this.onTouchEnd);break;case"press":n.addEventListener("trackpaddown",this.onTouchStart),n.addEventListener("trackpadup",this.onTouchEnd)}},removeEventListeners:function(){let e=this.el.sceneEl;e.removeEventListener("axismove",this.onAxisMove),e.removeEventListener("trackpadtouchstart",this.onTouchStart),e.removeEventListener("trackpadtouchend",this.onTouchEnd),e.removeEventListener("trackpaddown",this.onTouchStart),e.removeEventListener("trackpadup",this.onTouchEnd)},isVelocityActive:function(){return this.data.enabled&&this.isMoving},getVelocityDelta:function(){return this.dVelocity.z=this.isMoving?-this.zVel:1,this.dVelocity.x=this.isMoving?this.xVel:1,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onAxisMove=this.onAxisMove.bind(this)},onTouchStart:function(e){switch(this.data.mode){case"swipe":this.canRecordAxis=!0,this.startingAxisData=[];break;case"touch":case"press":this.isMoving=!0}e.preventDefault()},onTouchEnd:function(e){"swipe"==this.data.mode&&(this.startingAxisData=[]),this.isMoving=!1,e.preventDefault()},onAxisMove:function(e){switch(this.data.mode){case"swipe":return this.handleSwipeAxis(e);case"touch":case"press":return this.handleTouchAxis(e)}},handleSwipeAxis:function(e){let n=this.data,r=e.detail.axis;if(0===this.startingAxisData.length&&this.canRecordAxis&&(this.canRecordAxis=!1,this.startingAxisData[0]=r[0],this.startingAxisData[1]=r[1]),this.startingAxisData.length>0){let e=0,i=0;n.enableNegX&&r[0]<this.startingAxisData[0]&&(e=-1),n.enablePosX&&r[0]>this.startingAxisData[0]&&(e=1),n.enablePosZ&&r[1]>this.startingAxisData[1]&&(i=-1),n.enableNegZ&&r[1]<this.startingAxisData[1]&&(i=1);let o=Math.abs(this.startingAxisData[1]-r[1]),a=Math.abs(this.startingAxisData[0]-r[0]);a>o?(this.zVel=0,this.xVel=e,this.isMoving=!0):(this.xVel=0,this.zVel=i,this.isMoving=!0)}},handleTouchAxis:function(e){let n=this.data,r=e.detail.axis,i=0,o=0;n.enableNegX&&r[0]<0&&(i=-1),n.enablePosX&&r[0]>0&&(i=1),n.enablePosZ&&r[1]>0&&(o=-1),n.enableNegZ&&r[1]<0&&(o=1),Math.abs(r[0])>Math.abs(r[1])?(this.zVel=0,this.xVel=i):(this.xVel=0,this.zVel=o)}})},6591:function(e){let n={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};function r(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}e.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(n)},repetitions:{default:1/0,min:0},timeScale:{default:1}},init:function(){this.model=null,this.mixer=null,this.activeActions=[];let e=this.el.getObject3D("mesh");e?this.load(e):this.el.addEventListener("model-loaded",e=>{this.load(e.detail.model)})},load:function(e){let n=this.el;this.model=e,this.mixer=new THREE.AnimationMixer(e),this.mixer.addEventListener("loop",e=>{n.emit("animation-loop",{action:e.action,loopDelta:e.loopDelta})}),this.mixer.addEventListener("finished",e=>{n.emit("animation-finished",{action:e.action,direction:e.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(e){if(!e)return;let r=this.data,i=AFRAME.utils.diff(r,e);if("clip"in i){this.stopAction(),r.clip&&this.playAction();return}this.activeActions.forEach(e=>{"duration"in i&&r.duration&&e.setDuration(r.duration),"clampWhenFinished"in i&&(e.clampWhenFinished=r.clampWhenFinished),("loop"in i||"repetitions"in i)&&e.setLoop(n[r.loop],r.repetitions),"timeScale"in i&&e.setEffectiveTimeScale(r.timeScale)})},stopAction:function(){let e=this.data;for(let n=0;n<this.activeActions.length;n++)e.crossFadeDuration?this.activeActions[n].fadeOut(e.crossFadeDuration):this.activeActions[n].stop();this.activeActions.length=0},playAction:function(){if(!this.mixer)return;let e=this.model,i=this.data,o=e.animations||(e.geometry||{}).animations||[];if(!o.length)return;let a=RegExp("^"+i.clip.split(/\*+/).map(r).join(".*")+"$");for(let r,s=0;r=o[s];s++)if(r.name.match(a)){let o=this.mixer.clipAction(r,e);o.enabled=!0,o.clampWhenFinished=i.clampWhenFinished,i.duration&&o.setDuration(i.duration),1!==i.timeScale&&o.setEffectiveTimeScale(i.timeScale),o.setLoop(n[i.loop],i.repetitions).fadeIn(i.crossFadeDuration).play(),this.activeActions.push(o)}},tick:function(e,n){this.mixer&&!isNaN(n)&&this.mixer.update(n/1e3)}})},2290:function(e,n,r){THREE.ColladaLoader=r(203),e.exports.Component=AFRAME.registerComponent("collada-model-legacy",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new THREE.ColladaLoader},update:function(){var e=this,n=this.el,r=this.data,i=this.el.sceneEl.systems.renderer;r&&(this.remove(),this.loader.load(r,function(r){e.model=r.scene,e.model.traverse(function(e){if(e.isMesh){var n=e.material;n.color&&i.applyColorCorrection(n.color),n.map&&i.applyColorCorrection(n.map),n.emissive&&i.applyColorCorrection(n.emissive),n.emissiveMap&&i.applyColorCorrection(n.emissiveMap)}}),n.setObject3D("mesh",e.model),n.emit("model-loaded",{format:"collada",model:e.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},5310:function(e,n,r){THREE.FBXLoader=r(9434),e.exports=AFRAME.registerComponent("fbx-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){let e=this.data;if(!e.src)return;this.remove();let n=new THREE.FBXLoader;e.crossorigin&&n.setCrossOrigin(e.crossorigin),n.load(e.src,this.load.bind(this))},load:function(e){this.model=e,this.el.setObject3D("mesh",e),this.el.emit("model-loaded",{format:"fbx",model:e})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},8837:function(e,n,r){let i;let o=r(4657)();e.exports=AFRAME.registerComponent("gltf-model-legacy",{schema:{type:"model"},init:function(){this.model=null,this.loader=null,this.loaderPromise=(i=i||o("https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js")).then(()=>{this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("Anonymous")})},update:function(){let e=this,n=this.el,r=this.data;r&&(this.remove(),this.loaderPromise.then(()=>{this.loader.load(r,function(r){e.model=r.scene,e.model.animations=r.animations,n.setObject3D("mesh",e.model),n.emit("model-loaded",{format:"gltf",model:e.model})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},9874:function(e,n,r){r(6591),r(2290),r(5310),r(8837),r(171)},171:function(e){e.exports=AFRAME.registerComponent("object-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){let e;let n=this.data;n.src&&(this.remove(),e=new THREE.ObjectLoader,n.crossorigin&&e.setCrossOrigin(n.crossorigin),e.load(n.src,e=>{e.traverse(e=>{e instanceof THREE.SkinnedMesh&&e.material&&(e.material.skinning=!!(e.geometry&&e.geometry.bones||[]).length)}),this.load(e)}))},load:function(e){this.model=e,this.el.setObject3D("mesh",e),this.el.emit("model-loaded",{format:"json",model:e})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},7642:function(e){e.exports=AFRAME.registerComponent("checkpoint",{schema:{offset:{default:{x:0,y:0,z:0},type:"vec3"}},init:function(){this.active=!1,this.targetEl=null,this.fire=this.fire.bind(this),this.offset=new THREE.Vector3},update:function(){this.offset.copy(this.data.offset)},play:function(){this.el.addEventListener("click",this.fire)},pause:function(){this.el.removeEventListener("click",this.fire)},remove:function(){this.pause()},fire:function(){let e=this.el.sceneEl.querySelector("[checkpoint-controls]");if(!e)throw Error("No `checkpoint-controls` component found.");e.components["checkpoint-controls"].setCheckpoint(this.el)},getOffset:function(){return this.offset.copy(this.data.offset)}})},4795:function(e){function n(e,n,r,i){e&&(n=n||[],e.traverse(e=>{var o;if(!e.isMesh)return;let a=(o=e.material)?Array.isArray(o)?o:o.materials?o.materials:[o]:[];a.forEach(e=>{(!e||"envMap"in e)&&(n.length&&-1===n.indexOf(e.name)||(e.envMap=r,e.reflectivity=i,e.needsUpdate=!0))})}))}e.exports=AFRAME.registerComponent("cube-env-map",{multiple:!0,schema:{path:{default:""},extension:{default:"jpg",oneOf:["jpg","png"]},format:{default:"RGBFormat",oneOf:["RGBFormat","RGBAFormat"]},enableBackground:{default:!1},reflectivity:{default:1,min:0,max:1},materials:{default:[]}},init:function(){let e=this.data;this.texture=new THREE.CubeTextureLoader().load([e.path+"posx."+e.extension,e.path+"negx."+e.extension,e.path+"posy."+e.extension,e.path+"negy."+e.extension,e.path+"posz."+e.extension,e.path+"negz."+e.extension]),this.texture.format=THREE[e.format],this.object3dsetHandler=()=>{let e=this.el.getObject3D("mesh"),r=this.data;n(e,r.materials,this.texture,r.reflectivity)},this.el.addEventListener("object3dset",this.object3dsetHandler)},update:function(e){let r=this.data,i=this.el.getObject3D("mesh"),o=[],a=[];if(r.materials.length&&(e.materials?(o=r.materials.filter(n=>!e.materials.includes(n)),a=e.materials.filter(e=>!r.materials.includes(e))):o=r.materials),o.length&&n(i,o,this.texture,r.reflectivity),a.length&&n(i,a,null,1),e.materials&&r.reflectivity!==e.reflectivity){let o=r.materials.filter(n=>e.materials.includes(n));o.length&&n(i,o,this.texture,r.reflectivity)}this.data.enableBackground&&!e.enableBackground?this.setBackground(this.texture):!this.data.enableBackground&&e.enableBackground&&this.setBackground(null)},remove:function(){this.el.removeEventListener("object3dset",this.object3dsetHandler);let e=this.el.getObject3D("mesh"),r=this.data;n(e,r.materials,null,1),r.enableBackground&&this.setBackground(null)},setBackground:function(e){this.el.sceneEl.object3D.background=e}})},9511:function(e){e.exports=AFRAME.registerComponent("grab",{init:function(){this.system=this.el.sceneEl.systems.physics,this.GRABBED_STATE="grabbed",this.grabbing=!1,this.hitEl=null,this.physics=this.el.sceneEl.systems.physics,this.constraint=null,this.onHit=this.onHit.bind(this),this.onGripOpen=this.onGripOpen.bind(this),this.onGripClose=this.onGripClose.bind(this)},play:function(){let e=this.el;e.addEventListener("hit",this.onHit),e.addEventListener("gripdown",this.onGripClose),e.addEventListener("gripup",this.onGripOpen),e.addEventListener("trackpaddown",this.onGripClose),e.addEventListener("trackpadup",this.onGripOpen),e.addEventListener("triggerdown",this.onGripClose),e.addEventListener("triggerup",this.onGripOpen)},pause:function(){let e=this.el;e.removeEventListener("hit",this.onHit),e.removeEventListener("gripdown",this.onGripClose),e.removeEventListener("gripup",this.onGripOpen),e.removeEventListener("trackpaddown",this.onGripClose),e.removeEventListener("trackpadup",this.onGripOpen),e.removeEventListener("triggerdown",this.onGripClose),e.removeEventListener("triggerup",this.onGripOpen)},onGripClose:function(){this.grabbing=!0},onGripOpen:function(){let e=this.hitEl;this.grabbing=!1,e&&(e.removeState(this.GRABBED_STATE),this.hitEl=void 0,this.system.removeConstraint(this.constraint),this.constraint=null)},onHit:function(e){let n=e.detail.el;!n||n.is(this.GRABBED_STATE)||!this.grabbing||this.hitEl||(n.addState(this.GRABBED_STATE),this.hitEl=n,this.constraint=new CANNON.LockConstraint(this.el.body,n.body),this.system.addConstraint(this.constraint))}})},9236:function(e,n,r){r(7642),r(4795),r(9511),r(765),r(837),r(8310),r(8240),r(1790)},765:function(e){e.exports=AFRAME.registerComponent("jump-ability",{dependencies:["velocity"],schema:{on:{default:"keydown:Space gamepadbuttondown:0"},playerHeight:{default:1.764},maxJumps:{default:1},distance:{default:5},debug:{default:!1}},init:function(){this.velocity=0,this.numJumps=0;let e=this.beginJump.bind(this),n=this.data.on.split(" ");this.bindings={};for(let r=0;r<n.length;r++)this.bindings[n[r]]=e,this.el.addEventListener(n[r],e);this.bindings.collide=this.onCollide.bind(this),this.el.addEventListener("collide",this.bindings.collide)},remove:function(){for(var e in this.bindings)this.bindings.hasOwnProperty(e)&&(this.el.removeEventListener(e,this.bindings[e]),delete this.bindings[e]);this.el.removeEventListener("collide",this.bindings.collide),delete this.bindings.collide},beginJump:function(){if(this.numJumps<this.data.maxJumps){let e=this.data,n=Math.sqrt(-(-2*e.distance*24.8)),r=this.el.getAttribute("velocity");this.el.setAttribute("velocity",{x:r.x,y:n,z:r.z}),this.numJumps++,this.el.emit("jumpstart")}},onCollide:function(){this.numJumps>0&&this.el.emit("jumpend"),this.numJumps=0}})},837:function(e){e.exports=AFRAME.registerComponent("kinematic-body",{dependencies:["velocity"],schema:{mass:{default:5},radius:{default:1.3},linearDamping:{default:.05},enableSlopes:{default:!0},enableJumps:{default:!1}},init:function(){this.system=this.el.sceneEl.systems.physics,this.system.addComponent(this);let e=this.el,n=this.data,r=new CANNON.Vec3().copy(e.object3D.getWorldPosition(new THREE.Vector3));this.body=new CANNON.Body({material:this.system.getMaterial("staticMaterial"),position:r,mass:n.mass,linearDamping:n.linearDamping,fixedRotation:!0}),this.body.addShape(new CANNON.Sphere(n.radius),new CANNON.Vec3(0,n.radius,0)),this.body.el=this.el,this.el.body=this.body,this.system.addBody(this.body),e.hasAttribute("wasd-controls")&&console.warn("[kinematic-body] Not compatible with wasd-controls, use movement-controls.")},remove:function(){this.system.removeBody(this.body),this.system.removeComponent(this),delete this.el.body},beforeStep:function(e,n){if(!n)return;let r=this.el,i=this.data,o=this.body;i.enableJumps||o.velocity.set(0,0,0),o.position.copy(r.getAttribute("position"))},step:function(){let e=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Vector3;return function(o,a){if(!a)return;let s=this.body,l=this.data,c,u=-1/0,h,d=this.system.getContacts();a=Math.min(a,1e3*this.system.data.maxInterval),i.set(0,0,0),e.copy(this.el.getAttribute("velocity")),s.velocity.copy(e);for(var f,p=0;f=d[p];p++)if(f.enabled){if(s.id===f.bi.id)f.ni.negate(r);else{if(s.id!==f.bj.id)continue;r.copy(f.ni)}-.000001>s.velocity.dot(r)&&r.y<=.5?e.projectOnPlane(r):r.y>.5&&(c=s.id===f.bi.id?Math.abs(f.rj.y+f.bj.position.y):Math.abs(f.ri.y+f.bi.position.y))>u&&(u=c,i.copy(r),h=s.id===f.bi.id?f.bj:f.bi)}n.copy(e).normalize(),h&&(!l.enableJumps||n.y<.5)?(l.enableSlopes?i.y<.999999&&i.copy(this.raycastToGround(h,i)):i.set(0,1,0),e.projectOnPlane(i)):this.system.driver.world&&e.add(this.system.driver.world.gravity.scale(4*a/1e3)),s.velocity.copy(e),this.el.setAttribute("velocity",s.velocity),this.el.setAttribute("position",s.position)}}(),raycastToGround:function(e,n){let r,i,o=this.body.position,a=this.body.position.clone();return((r=new CANNON.Ray(o,a))._updateDirection(),r.intersectBody(e),r.hasHit&&Math.abs((i=r.result.hitNormalWorld).y)>Math.abs(n.y))?i:n}})},8310:function(e){e.exports=AFRAME.registerComponent("mesh-smooth",{init:function(){this.el.addEventListener("model-loaded",e=>{e.detail.model.traverse(e=>{e.isMesh&&e.geometry.computeVertexNormals()})})}})},8240:function(e){e.exports=AFRAME.registerComponent("normal-material",{init:function(){this.material=new THREE.MeshNormalMaterial({flatShading:!0}),this.applyMaterial=this.applyMaterial.bind(this),this.el.addEventListener("object3dset",this.applyMaterial)},remove:function(){this.el.removeEventListener("object3dset",this.applyMaterial)},applyMaterial:function(){this.el.object3D.traverse(e=>{e.isMesh&&(e.material=this.material)})}})},1790:function(e){e.exports=AFRAME.registerComponent("sphere-collider",{schema:{objects:{default:""},state:{default:"collided"},radius:{default:.05},watch:{default:!0}},init:function(){this.observer=null,this.els=[],this.collisions=[],this.handleHit=this.handleHit.bind(this),this.handleHitEnd=this.handleHitEnd.bind(this)},remove:function(){this.pause()},play:function(){let e=this.el.sceneEl;this.data.watch&&(this.observer=new MutationObserver(this.update.bind(this,null)),this.observer.observe(e,{childList:!0,subtree:!0}))},pause:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},update:function(){let e;let n=this.data;e=n.objects?this.el.sceneEl.querySelectorAll(n.objects):this.el.sceneEl.children,this.els=Array.prototype.slice.call(e)},tick:function(){let e=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Box3,a=new Map;return function(){let s;let l=this.el,c=this.data,u=l.getObject3D("mesh"),h=[];if(u)a.clear(),l.object3D.getWorldPosition(e),l.object3D.getWorldScale(r),s=c.radius*Math.max.apply(null,r.toArray()),this.els.forEach(function(r){let l,c,u,d;r.isEntity&&(c=r.getObject3D("mesh"))&&(o.setFromObject(c).getSize(i),l=Math.sqrt(2*(d=Math.max(i.x,i.y,i.z)/2)*d),o.getCenter(n),l&&(u=e.distanceTo(n))<l+s&&(h.push(r),a.set(r,u)))}),h.sort((e,n)=>a.get(e)>a.get(n)?1:-1).forEach(this.handleHit),0===h.length&&l.emit("hit",{el:null}),this.collisions.filter(e=>!a.has(e)).forEach(this.handleHitEnd),this.collisions=h}}(),handleHit:function(e){e.emit("hit"),e.addState(this.data.state),this.el.emit("hit",{el:e})},handleHitEnd:function(e){e.emit("hitend"),e.removeState(this.data.state),this.el.emit("hitend",{el:e})}})},2578:function(e,n,r){r(8453),r(1250),r(1465)},1250:function(e){e.exports=AFRAME.registerComponent("nav-agent",{schema:{destination:{type:"vec3"},active:{default:!1},speed:{default:2}},init:function(){this.system=this.el.sceneEl.systems.nav,this.system.addAgent(this),this.group=null,this.path=[],this.raycaster=new THREE.Raycaster},remove:function(){this.system.removeAgent(this)},update:function(){this.path.length=0},updateNavLocation:function(){this.group=null,this.path=[]},tick:function(){let e=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3;return function(i,o){let a;let s=this.el,l=this.data,c=this.raycaster,u=l.speed*o/1e3;if(!l.active)return;if(!this.path.length){let n=this.el.object3D.position;this.group=this.group||this.system.getGroup(n),this.path=this.system.getPath(n,e.copy(l.destination),this.group)||[],s.emit("navigation-start")}if(!this.path.length){console.warn("[nav] Unable to find path to %o.",l.destination),this.el.setAttribute("nav-agent",{active:!1}),s.emit("navigation-end");return}let h=s.object3D.position,d=this.path[0];n.subVectors(d,h);let f=n.length();if(f<u){if(this.path.shift(),!this.path.length){this.el.setAttribute("nav-agent",{active:!1}),s.emit("navigation-end");return}r.copy(h),a=this.path[0]}else r.copy(n.setLength(u)).add(h),a=d;a.y=h.y,s.object3D.lookAt(a),c.ray.origin.copy(r),c.ray.origin.y+=1.5,c.ray.direction.y=-1;let p=c.intersectObject(this.system.getNavMesh());p.length?(n.subVectors(p[0].point,h),h.add(n.setLength(u))):h.copy(r)}}()})},8453:function(e){e.exports=AFRAME.registerComponent("nav-mesh",{init:function(){this.system=this.el.sceneEl.systems.nav,this.hasLoadedNavMesh=!1,this.el.addEventListener("object3dset",this.loadNavMesh.bind(this))},play:function(){this.hasLoadedNavMesh||this.loadNavMesh()},loadNavMesh:function(){let e;let n=this.el.getObject3D("mesh"),r=this.el.sceneEl.object3D;if(!n||(n.traverse(n=>{n.isMesh&&(e=n)}),!e))return;let i=e.geometry.isBufferGeometry?new THREE.Geometry().fromBufferGeometry(e.geometry):e.geometry.clone();r.updateMatrixWorld(),i.applyMatrix(e.matrixWorld),this.system.setNavMeshGeometry(i),this.hasLoadedNavMesh=!0}})},1465:function(e,n,r){let{Pathfinding:i}=r(6594),o=new i,a="level";e.exports=AFRAME.registerSystem("nav",{init:function(){this.navMesh=null,this.agents=new Set},setNavMeshGeometry:function(e){this.navMesh=new THREE.Mesh(e),o.setZoneData(a,i.createZone(e)),Array.from(this.agents).forEach(e=>e.updateNavLocation())},getNavMesh:function(){return this.navMesh},addAgent:function(e){this.agents.add(e)},removeAgent:function(e){this.agents.delete(e)},getPath:function(e,n,r){return this.navMesh?o.findPath(e,n,a,r):null},getGroup:function(e){return this.navMesh?o.getGroup(a,e):null},getNode:function(e,n){return this.navMesh?o.getClosestNode(e,a,n,!0):null},clampStep:function(e,n,r,i,s){return this.navMesh?i?o.clampStep(e,n,i,a,r,s):(s.copy(n),this.getNode(n,r)):(s.copy(n),null)}})},386:function(e){e.exports=AFRAME.registerPrimitive("a-grid",{defaultComponents:{geometry:{primitive:"plane",width:75,height:75},rotation:{x:-90,y:0,z:0},material:{src:"url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)",repeat:"75 75"}},mappings:{width:"geometry.width",height:"geometry.height",src:"material.src"}})},3535:function(e,n,r){let i=r(3471),o=r(2667);e.exports.Primitive=AFRAME.registerPrimitive("a-hexgrid",{defaultComponents:{hexgrid:{}},mappings:{src:"hexgrid.src"}}),e.exports.Component=AFRAME.registerComponent("hexgrid",{dependencies:["material"],schema:{src:{type:"asset"}},init:function(){let e=this.data;e.src?fetch(e.src).then(e=>e.json()).then(e=>this.addMesh(e)):this.addMesh(o)},addMesh:function(e){let n=new i.HexGrid;n.fromJSON(e);let r=new i.Board(n);r.generateTilemap(),this.el.setObject3D("mesh",r.group),this.addMaterial()},addMaterial:function(){let e=this.el.components.material,n=(e||{}).material;n&&this.el.object3D.traverse(e=>{e.isMesh&&(e.material=n)})},remove:function(){this.el.removeObject3D("mesh")}})},9307:function(e){e.exports.Primitive=AFRAME.registerPrimitive("a-ocean",{defaultComponents:{ocean:{},rotation:{x:-90,y:0,z:0}},mappings:{width:"ocean.width",depth:"ocean.depth",density:"ocean.density",amplitude:"ocean.amplitude",amplitudeVariance:"ocean.amplitudeVariance",speed:"ocean.speed",speedVariance:"ocean.speedVariance",color:"ocean.color",opacity:"ocean.opacity"}}),e.exports.Component=AFRAME.registerComponent("ocean",{schema:{width:{default:10,min:0},depth:{default:10,min:0},density:{default:10},amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:1},speedVariance:{default:2},color:{default:"#7AD2F7",type:"color"},opacity:{default:.8}},play:function(){let e=this.el,n=this.data,r=e.components.material,i=new THREE.PlaneGeometry(n.width,n.depth,n.density,n.density);i.mergeVertices(),this.waves=[];for(let e,r=0,o=i.vertices.length;r<o;r++)e=i.vertices[r],this.waves.push({z:e.z,ang:Math.random()*Math.PI*2,amp:n.amplitude+Math.random()*n.amplitudeVariance,speed:(n.speed+Math.random()*n.speedVariance)/1e3});r||((r={}).material=new THREE.MeshPhongMaterial({color:n.color,transparent:n.opacity<1,opacity:n.opacity,shading:THREE.FlatShading})),this.mesh=new THREE.Mesh(i,r.material),e.setObject3D("mesh",this.mesh)},remove:function(){this.el.removeObject3D("mesh")},tick:function(e,n){if(!n)return;let r=this.mesh.geometry.vertices;for(let e,i,o=0;e=r[o];o++)i=this.waves[o],e.z=i.z+Math.sin(i.ang)*i.amp,i.ang+=i.speed*n;this.mesh.geometry.verticesNeedUpdate=!0}})},699:function(e){e.exports.Primitive=AFRAME.registerPrimitive("a-tube",{defaultComponents:{tube:{}},mappings:{path:"tube.path",segments:"tube.segments",radius:"tube.radius","radial-segments":"tube.radialSegments",closed:"tube.closed"}}),e.exports.Component=AFRAME.registerComponent("tube",{schema:{path:{default:[]},segments:{default:64},radius:{default:1},radialSegments:{default:8},closed:{default:!1}},init:function(){let e=this.el,n=this.data,r=e.components.material;if(!n.path.length){console.error("[a-tube] `path` property expected but not found.");return}let i=new THREE.CatmullRomCurve3(n.path.map(function(e){return e=e.split(" "),new THREE.Vector3(Number(e[0]),Number(e[1]),Number(e[2]))})),o=new THREE.TubeGeometry(i,n.segments,n.radius,n.radialSegments,n.closed);r||((r={}).material=new THREE.MeshPhongMaterial),this.mesh=new THREE.Mesh(o,r.material),this.el.setObject3D("mesh",this.mesh)},update:function(e){Object.keys(e).length&&(this.remove(),this.init())},remove:function(){this.mesh&&this.el.removeObject3D("mesh")}})},6699:function(e,n,r){r(386),r(3535),r(9307),r(699)},1359:function(e,n,r){if("undefined"==typeof AFRAME)throw Error("Component attempted to register before AFRAME was available.");let i=r(8710);"default"in i&&(i=i.default);let o=r(2752);"default"in o&&(o=o.default);let a=function(e){return"string"==typeof e?JSON.parse(e):e},s=function(e){if("function"==typeof e)return e;let n=eval;try{let r=n("("+e+")");return r}catch(e){}return null},l=function(e){return isNaN(parseFloat(e))?s(e)?s(e):e:parseFloat(e)};AFRAME.registerComponent("forcegraph",{schema:{jsonUrl:{type:"string",default:""},nodes:{parse:a,default:[]},links:{parse:a,default:[]},numDimensions:{type:"number",default:3},dagMode:{type:"string",default:""},dagLevelDistance:{type:"number",default:0},dagNodeFilter:{parse:s,default:function(){return!0}},onDagError:{parse:s,default:void 0},nodeRelSize:{type:"number",default:4},nodeId:{type:"string",default:"id"},nodeVal:{parse:l,default:"val"},nodeResolution:{type:"number",default:8},nodeVisibility:{parse:l,default:!0},nodeColor:{parse:l,default:"color"},nodeAutoColorBy:{parse:l,default:""},nodeOpacity:{type:"number",default:.75},nodeThreeObject:{parse:l,default:null},nodeThreeObjectExtend:{parse:l,default:!1},linkSource:{type:"string",default:"source"},linkTarget:{type:"string",default:"target"},linkVisibility:{parse:l,default:!0},linkColor:{parse:l,default:"color"},linkAutoColorBy:{parse:l,default:""},linkOpacity:{type:"number",default:.2},linkWidth:{parse:l,default:0},linkResolution:{type:"number",default:6},linkCurvature:{parse:l,default:0},linkCurveRotation:{parse:l,default:0},linkMaterial:{parse:l,default:null},linkThreeObject:{parse:l,default:null},linkThreeObjectExtend:{parse:l,default:!1},linkPositionUpdate:{parse:s,default:null},linkDirectionalArrowLength:{parse:l,default:0},linkDirectionalArrowColor:{parse:l,default:null},linkDirectionalArrowRelPos:{parse:l,default:.5},linkDirectionalArrowResolution:{type:"number",default:8},linkDirectionalParticles:{parse:l,default:0},linkDirectionalParticleSpeed:{parse:l,default:.01},linkDirectionalParticleWidth:{parse:l,default:.5},linkDirectionalParticleColor:{parse:l,default:null},linkDirectionalParticleResolution:{type:"number",default:4},onNodeHover:{parse:s,default:()=>{}},onLinkHover:{parse:s,default:()=>{}},onNodeClick:{parse:s,default:()=>{}},onLinkClick:{parse:s,default:()=>{}},forceEngine:{type:"string",default:"d3"},d3AlphaMin:{type:"number",default:0},d3AlphaDecay:{type:"number",default:.0228},d3VelocityDecay:{type:"number",default:.4},ngraphPhysics:{parse:a,default:null},warmupTicks:{type:"int",default:0},cooldownTicks:{type:"int",default:1e18},cooldownTime:{type:"int",default:15e3},onEngineTick:{parse:s,default:function(){}},onEngineStop:{parse:s,default:function(){}}},getGraphBbox:function(){return this.forceGraph||(this.forceGraph=new o),this.forceGraph.getGraphBbox()},emitParticle:function(){this.forceGraph||(this.forceGraph=new o);let e=this.forceGraph,n=e.emitParticle.apply(e,arguments);return n===e?this:n},d3Force:function(){this.forceGraph||(this.forceGraph=new o);let e=this.forceGraph,n=e.d3Force.apply(e,arguments);return n===e?this:n},d3ReheatSimulation:function(){return this.forceGraph&&this.forceGraph.d3ReheatSimulation(),this},refresh:function(){return this.forceGraph&&this.forceGraph.refresh(),this},init:function(){let e=this.state={};e.infoEl=document.createElement("a-text"),e.infoEl.setAttribute("position","0 -0.1 -1"),e.infoEl.setAttribute("width",1),e.infoEl.setAttribute("align","center"),e.infoEl.setAttribute("color","lavender");let n=document.querySelector("a-entity[camera], a-camera");n.appendChild(e.infoEl),e.cameraObj=n.object3D.children.filter(function(e){return"PerspectiveCamera"===e.type})[0],this.el.sceneEl.addEventListener("camera-set-active",function(n){e.cameraObj=n.detail.cameraEl.components.camera.camera}),this.forceGraph||(this.forceGraph=new o),this.forceGraph.onFinishUpdate(()=>this.el.setObject3D("forcegraphGroup",this.forceGraph)).onLoading(()=>e.infoEl.setAttribute("value","Loading...")).onFinishLoading(()=>e.infoEl.setAttribute("value","")),this.el.addEventListener("raycaster-intersected",n=>e.hoverDetail=n.detail),this.el.addEventListener("raycaster-intersected-cleared",n=>e.hoverDetail=n.detail),this.el.addEventListener("click",()=>e.hoverObj&&this.data["on"+("node"===e.hoverObj.__graphObjType?"Node":"Link")+"Click"](e.hoverObj.__data))},remove:function(){this.state.infoEl.remove(),this.el.removeObject3D("forcegraphGroup")},update:function(e){let n=this,r=this.data,i=AFRAME.utils.diff(r,e);["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].filter(function(e){return e in i}).forEach(function(e){n.forceGraph[e](""!==r[e]?r[e]:null)}),("nodes"in i||"links"in i)&&n.forceGraph.graphData({nodes:r.nodes,links:r.links})},tick:function(e,n){let r=this.state,i=this.data,o=r.hoverDetail?r.hoverDetail.getIntersection?r.hoverDetail.getIntersection(this.el):r.hoverDetail.intersection||void 0:void 0,a=o?o.object:void 0;for(;a&&!a.hasOwnProperty("__graphObjType");)a=a.parent;if(a!==r.hoverObj){let e=r.hoverObj?r.hoverObj.__graphObjType:null,n=r.hoverObj?r.hoverObj.__data:null,o=a?a.__graphObjType:null,s=a?a.__data:null;e&&e!==o&&i["on"+("node"===e?"Node":"Link")+"Hover"](null,n),o&&i["on"+("node"===o?"Node":"Link")+"Hover"](s,e===o?n:null),r.hoverObj=a}this.forceGraph.tickFrame()}})},3405:function(e){/*! fromentries. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */e.exports=function(e){return[...e].reduce((e,[n,r])=>(e[n]=r,e),{})}},4245:function(e){e.exports=function(e){!function(e){if(!e)throw Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],r=0;r<n.length;++r)if(e.hasOwnProperty(n[r]))throw Error("Subject cannot be eventified, since it already has property '"+n[r]+"'")}(e);var n,r=(n=Object.create(null),{on:function(r,i,o){if("function"!=typeof i)throw Error("callback is expected to be a function");var a=n[r];return a||(a=n[r]=[]),a.push({callback:i,ctx:o}),e},off:function(r,i){if(void 0===r)return n=Object.create(null),e;if(n[r]){if("function"!=typeof i)delete n[r];else for(var o=n[r],a=0;a<o.length;++a)o[a].callback===i&&o.splice(a,1)}return e},fire:function(r){var i,o=n[r];if(!o)return e;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var a=0;a<o.length;++a){var s=o[a];s.callback.apply(s.ctx,i)}return e}});return e.on=r.on,e.off=r.off,e.fire=r.fire,e}},6505:function(e,n,r){e.exports=function(e,n){if(!e)throw Error("Graph structure cannot be undefined");var a=(n&&n.createSimulator||r(5818))(n);if(Array.isArray(n))throw Error("Physics settings is expected to be an object");var s=e.version>19?function(n){var r=e.getLinks(n);return r?1+r.size/3:1}:function(n){var r=e.getLinks(n);return r?1+r.length/3:1};n&&"function"==typeof n.nodeMass&&(s=n.nodeMass);var l=new Map,c={},u=0,h=a.settings.springTransform||o;u=0,e.forEachNode(function(e){v(e.id),u+=1}),e.forEachLink(y),e.on("changed",m);var d=!1,f={step:function(){if(0===u)return p(!0),!0;var e=a.step();f.lastMove=e,f.fire("step");var n=e/u<=.01;return p(n),n},getNodePosition:function(e){return w(e).pos},setNodePosition:function(e){var n=w(e);n.setPosition.apply(n,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(e){var n=c[e];if(n)return{from:n.from.pos,to:n.to.pos}},getGraphRect:function(){return a.getBBox()},forEachBody:g,pinNode:function(e,n){w(e.id).isPinned=!!n},isNodePinned:function(e){return w(e.id).isPinned},dispose:function(){e.off("changed",m),f.fire("disposed")},getBody:function(e){return l.get(e)},getSpring:function(n,r){var i;if(void 0===r)i="object"!=typeof n?n:n.id;else{var o=e.hasLink(n,r);if(!o)return;i=o.id}return c[i]},getForceVectorLength:function(){var e=0,n=0;return g(function(r){e+=Math.abs(r.force.x),n+=Math.abs(r.force.y)}),Math.sqrt(e*e+n*n)},simulator:a,graph:e,lastMove:0};return i(f),f;function p(e){d!==e&&(d=e,f.fire("stable",e))}function g(e){l.forEach(e)}function m(n){for(var r=0;r<n.length;++r){var i=n[r];"add"===i.changeType?(i.node&&v(i.node.id),i.link&&y(i.link)):"remove"===i.changeType&&(i.node&&function(e){var n=e.id,r=l.get(n);r&&(l.delete(n),a.removeBody(r))}(i.node),i.link&&function(n){var r=c[n.id];if(r){var i=e.getNode(n.fromId),o=e.getNode(n.toId);i&&b(i.id),o&&b(o.id),delete c[n.id],a.removeSpring(r)}}(i.link))}u=e.getNodesCount()}function v(n){var r=l.get(n);if(!r){var i=e.getNode(n);if(!i)throw Error("initBody() was called with unknown node id");var o=i.position;if(!o){var s=function(e){var n=[];if(!e.links)return n;for(var r=Math.min(e.links.length,2),i=0;i<r;++i){var o=e.links[i],a=o.fromId!==e.id?l.get(o.fromId):l.get(o.toId);a&&a.pos&&n.push(a)}return n}(i);o=a.getBestNewBodyPosition(s)}(r=a.addBodyAt(o)).id=n,l.set(n,r),b(n),i&&(i.isPinned||i.data&&i.data.isPinned)&&(r.isPinned=!0)}}function y(e){b(e.fromId),b(e.toId);var n=l.get(e.fromId),r=l.get(e.toId),i=a.addSpring(n,r,e.length);h(e,i),c[e.id]=i}function b(e){var n=l.get(e);if(n.mass=s(e),Number.isNaN(n.mass))throw Error("Node mass should be a number")}function w(e){var n=l.get(e);return n||(v(e),n=l.get(e)),n}},e.exports.simulator=r(5818);var i=r(4245);function o(){}},5189:function(e,n,r){let i=r(6422);e.exports=function(e){return function(n,r){let o=r&&r.indent||0,a=r&&void 0!==r.join?r.join:"\n",s=Array(o+1).join(" "),l=[];for(let r=0;r<e;++r){let e=i(r),o=0===r?"":s;l.push(o+n.replace(/{var}/g,e))}return l.join(a)}}},891:function(e,n,r){e.exports=function(e){return Function("bodies","settings","random",o(e))},e.exports.generateFunctionBody=o;let i=r(5189);function o(e){let n=i(e);return`
  var boundingBox = {
    ${n("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${n("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${n("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${n("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${n("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${n("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${n("var max_{var} = -Infinity;",{indent:4})}
    ${n("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${n("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${n("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${n("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${n("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${n("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}},6410:function(e,n,r){let i=r(5189);function o(e,n){return`
${s(e,n)}
${a(e,n)}
return {Body: Body, Vector: Vector};
`}function a(e){let n=i(e),r=n("{var}",{join:", "});return`
function Body(${r}) {
  this.isPinned = false;
  this.pos = new Vector(${r});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${r}) {
  ${n("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function s(e,n){let r=i(e),o="";return n&&(o=`${r("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});")}`),`function Vector(${r("{var}",{join:", "})}) {
  ${o}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${r('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${r("this.{var} = v.{var};",{indent:4})}
    } else {
      ${r('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${r("this.{var} = ",{join:""})}0;
  };`}e.exports=function(e,n){let{Body:r}=Function(o(e,n))();return r},e.exports.generateCreateBodyFunctionBody=o,e.exports.getVectorCode=s,e.exports.getBodyCode=a},6647:function(e,n,r){let i=r(5189);function o(e){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${i(e)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}e.exports=function(e){return Function("options",o(e))},e.exports.generateCreateDragForceFunctionBody=o},4079:function(e,n,r){let i=r(5189);function o(e){let n=i(e);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${n("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${n("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${n("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${n("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}e.exports=function(e){return Function("options","random",o(e))},e.exports.generateCreateSpringForceFunctionBody=o},1763:function(e,n,r){let i=r(5189);function o(e){let n=i(e);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${n("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${n("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${n("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${n("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${n("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${n("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${n("body.pos.{var} += d{var};",{indent:4})}

    ${n("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${n("t{var} * t{var}",{join:" + "})})/length;
`}e.exports=function(e){return Function("bodies","timeStep","adaptiveTimeStepWeight",o(e))},e.exports.generateIntegratorFunctionBody=o},1584:function(e,n,r){let i=r(5189),o=r(6422);function a(e){let n=i(e),r=Math.pow(2,e);return`
${h()}
${u(e)}
${s(e)}
${c(e)}
${l(e)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${function(e){let n=[];for(let i=0;i<r;++i)n.push(`${e}quad${i} = null;`);return n.join("\n")}("      node.")}
      node.body = null;
      node.mass = ${n("node.mass_{var} = ",{join:""})}0;
      ${n("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${n("var d{var};",{indent:4})}
    var r; 
    ${n("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${n("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${n("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${n("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${n("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${n("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${o(0)} - node.min_${o(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${n("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${function(){let e=Array(11).join(" "),n=[];for(let i=0;i<r;++i)n.push(e+`if (node.quad${i}) {`),n.push(e+`  queue[pushIdx] = node.quad${i};`),n.push(e+"  queueLength += 1;"),n.push(e+"  pushIdx += 1;"),n.push(e+"}");return n.join("\n")}()}
        }
      }
    }

    ${n("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${n("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${n("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${n("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${n("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${n("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${n("root.min_{var} = {var}min;",{indent:4})}
    ${n("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${n("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${n("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${n("var min_{var} = node.min_{var};",{indent:8})}
        ${n("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${function(n){let r=[],i=Array(9).join(" ");for(let n=0;n<e;++n)r.push(i+`if (${o(n)} > max_${o(n)}) {`),r.push(i+`  quadIdx = quadIdx + ${Math.pow(2,n)};`),r.push(i+`  min_${o(n)} = max_${o(n)};`),r.push(i+`  max_${o(n)} = node.max_${o(n)};`),r.push(i+"}");return r.join("\n")}(0)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${n("child.min_{var} = min_{var};",{indent:10})}
          ${n("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${n("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${n("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`}function s(e){let n=i(e);return`
  function isSamePosition(point1, point2) {
    ${n("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${n("d{var} < 1e-8",{join:" && "})};
  }  
`}function l(e){var n=Math.pow(2,e);return`
function setChild(node, idx, child) {
  ${function(){let e=[];for(let r=0;r<n;++r){let n=0===r?"  ":"  else ";e.push(`${n}if (idx === ${r}) node.quad${r} = child;`)}return e.join("\n")}()}
}`}function c(e){return`function getChild(node, idx) {
${function(){let n=[],r=Math.pow(2,e);for(let e=0;e<r;++e)n.push(`  if (idx === ${e}) return node.quad${e};`);return n.join("\n")}()}
  return null;
}`}function u(e){let n=i(e),r=Math.pow(2,e);return`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${function(e){let n=[];for(let i=0;i<r;++i)n.push(`${e}quad${i} = null;`);return n.join("\n")}("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${n("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${n("this.min_{var} = 0;",{indent:2})}
  ${n("this.max_{var} = 0;",{indent:2})}
}
`}function h(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}e.exports=function(e){return Function(a(e))()},e.exports.generateQuadTreeFunctionBody=a,e.exports.getInsertStackCode=h,e.exports.getQuadNodeCode=u,e.exports.isSamePosition=s,e.exports.getChildBodyCode=c,e.exports.setChildBodyCode=l},6422:function(e){e.exports=function(e){return 0===e?"x":1===e?"y":2===e?"z":"c"+(e+1)}},5818:function(e,n,r){e.exports=function(e){var n=r(8403),h=r(5510),d=r(4245);if(e){if(void 0!==e.springCoeff)throw Error("springCoeff was renamed to springCoefficient");if(void 0!==e.dragCoeff)throw Error("dragCoeff was renamed to dragCoefficient")}var f=u[(e=h(e,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1})).dimensions];if(!f){var p=e.dimensions;f={Body:i(p,e.debug),createQuadTree:o(p),createBounds:a(p),createDragForce:s(p),createSpringForce:l(p),integrate:c(p)},u[p]=f}var g=f.Body,m=f.createQuadTree,v=f.createBounds,y=f.createDragForce,b=f.createSpringForce,w=f.integrate,x=e=>new g(e),E=r(8712).random(42),_=[],k=[],T=m(e,E),O=v(_,e,E),C=b(e,E),A=y(e),S=[],M=new Map,R=0;N("nbody",function(){if(0!==_.length){T.insertBodies(_);for(var e=_.length;e--;){var n=_[e];n.isPinned||(n.reset(),T.updateBodyForce(n),A.update(n))}}}),N("spring",function(){for(var e=k.length;e--;)C.update(k[e])});var j={bodies:_,quadTree:T,springs:k,settings:e,addForce:N,removeForce:function(e){var n=S.indexOf(M.get(e));n<0||(S.splice(n,1),M.delete(e))},getForces:function(){return M},step:function(){for(var n=0;n<S.length;++n)S[n](R);return R+=1,w(_,e.timeStep,e.adaptiveTimeStepWeight)},addBody:function(e){if(!e)throw Error("Body is required");return _.push(e),e},addBodyAt:function(e){if(!e)throw Error("Body position is required");var n=x(e);return _.push(n),n},removeBody:function(e){if(e){var n=_.indexOf(e);if(!(n<0))return _.splice(n,1),0===_.length&&O.reset(),!0}},addSpring:function(e,r,i,o){if(!e||!r)throw Error("Cannot add null spring to force simulator");"number"!=typeof i&&(i=-1);var a=new n(e,r,i,o>=0?o:-1);return k.push(a),a},getTotalMovement:function(){return 0},removeSpring:function(e){if(e){var n=k.indexOf(e);if(n>-1)return k.splice(n,1),!0}},getBestNewBodyPosition:function(e){return O.getBestNewPosition(e)},getBBox:P,getBoundingBox:P,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(n){return void 0!==n?(e.gravity=n,T.options({gravity:n}),this):e.gravity},theta:function(n){return void 0!==n?(e.theta=n,T.options({theta:n}),this):e.theta},random:E};return function(e,n){for(var r in e)(function(e,n,r){e.hasOwnProperty(r)&&"function"!=typeof n[r]&&(Number.isFinite(e[r])?n[r]=function(i){if(void 0!==i){if(!Number.isFinite(i))throw Error("Value of "+r+" should be a valid number.");return e[r]=i,n}return e[r]}:n[r]=function(i){return void 0!==i?(e[r]=i,n):e[r]})})(e,n,r)}(e,j),d(j),j;function P(){return O.update(),O.box}function N(e,n){if(M.has(e))throw Error("Force "+e+" is already added");M.set(e,n),S.push(n)}};var i=r(6410),o=r(1584),a=r(891),s=r(6647),l=r(4079),c=r(1763),u={}},8403:function(e){e.exports=function(e,n,r,i){this.from=e,this.to=n,this.length=r,this.coefficient=i}},4736:function(e,n,r){e.exports=function(e){if("uniqueLinkId"in(e=e||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),e.multigraph=e.uniqueLinkId),void 0===e.multigraph&&(e.multigraph=!1),"function"!=typeof Map)throw Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var n,r=new Map,c=new Map,u={},h=0,d=e.multigraph?function(e,n,r){var i=l(e,n),o=u.hasOwnProperty(i);if(o||C(e,n)){o||(u[i]=0);var a="@"+ ++u[i];i=l(e+a,n+a)}return new s(e,n,r,i)}:function(e,n,r){var i=l(e,n),o=c.get(i);return o?(o.data=r,o):new s(e,n,r,i)},f=[],p=A,g=A,m=A,v=A,y={version:20,addNode:x,addLink:function(e,n,r){m();var i=E(e)||x(e),o=E(n)||x(n),s=d(e,n,r),l=c.has(s.id);return c.set(s.id,s),a(i,s),e!==n&&a(o,s),p(s,l?"update":"add"),v(),s},removeLink:function(e,n){return void 0!==n&&(e=C(e,n)),O(e)},removeNode:_,getNode:E,getNodeCount:k,getLinkCount:T,getEdgeCount:T,getLinksCount:T,getNodesCount:k,getLinks:function(e){var n=E(e);return n?n.links:null},forEachNode:R,forEachLinkedNode:function(e,n,i){var o=E(e);if(o&&o.links&&"function"==typeof n)return i?function(e,n,i){for(var o=e.values(),a=o.next();!a.done;){var s=a.value;if(s.fromId===n&&i(r.get(s.toId),s))return!0;a=o.next()}}(o.links,e,n):function(e,n,i){for(var o=e.values(),a=o.next();!a.done;){var s=a.value,l=s.fromId===n?s.toId:s.fromId;if(i(r.get(l),s))return!0;a=o.next()}}(o.links,e,n)},forEachLink:function(e){if("function"==typeof e)for(var n=c.values(),r=n.next();!r.done;){if(e(r.value))return!0;r=n.next()}},beginUpdate:m,endUpdate:v,clear:function(){m(),R(function(e){_(e.id)}),v()},hasLink:C,hasNode:E,getLink:C};return i(y),n=y.on,y.on=function(){return y.beginUpdate=m=S,y.endUpdate=v=M,p=b,g=w,y.on=n,n.apply(y,arguments)},y;function b(e,n){f.push({link:e,changeType:n})}function w(e,n){f.push({node:e,changeType:n})}function x(e,n){if(void 0===e)throw Error("Invalid node identifier");m();var i=E(e);return i?(i.data=n,g(i,"update")):g(i=new o(e,n),"add"),r.set(e,i),v(),i}function E(e){return r.get(e)}function _(e){var n=E(e);if(!n)return!1;m();var i=n.links;return i&&(i.forEach(O),n.links=null),r.delete(e),g(n,"remove"),v(),!0}function k(){return r.size}function T(){return c.size}function O(e){if(!e||!c.get(e.id))return!1;m(),c.delete(e.id);var n=E(e.fromId),r=E(e.toId);return n&&n.links.delete(e),r&&r.links.delete(e),p(e,"remove"),v(),!0}function C(e,n){if(void 0!==e&&void 0!==n)return c.get(l(e,n))}function A(){}function S(){h+=1}function M(){0==(h-=1)&&f.length>0&&(y.fire("changed",f),f.length=0)}function R(e){if("function"!=typeof e)throw Error("Function is expected to iterate over graph nodes. You passed "+e);for(var n=r.values(),i=n.next();!i.done;){if(e(i.value))return!0;i=n.next()}}};var i=r(4245);function o(e,n){this.id=e,this.links=null,this.data=n}function a(e,n){e.links?e.links.add(n):e.links=new Set([n])}function s(e,n,r,i){this.fromId=e,this.toId=n,this.data=r,this.id=i}function l(e,n){return e.toString()+"\uD83D\uDC49 "+n.toString()}},5510:function(e){e.exports=function e(n,r){var i;if(n||(n={}),r){for(i in r)if(r.hasOwnProperty(i)){var o=n.hasOwnProperty(i),a=typeof r[i];o&&typeof n[i]===a?"object"===a&&(n[i]=e(n[i],r[i])):n[i]=r[i]}}return n}},8712:function(e){function n(e){var n="number"==typeof e?e:+new Date;return new r(n)}function r(e){this.seed=e}function i(e){return Math.sqrt(2*Math.PI/e)*Math.pow(1/Math.E*(e+1/(12*e-1/(10*e))),e)}function o(){var e=this.seed;return e=(3042594569^(e=(e=((e=(e=(3345072700^(e=e+2127912214+(e<<12)&4294967295)^e>>>19)&4294967295)+374761393+(e<<5)&4294967295)+3550635116^e<<9)&4294967295)+4251993797+(e<<3)&4294967295)^e>>>16)&4294967295,this.seed=e,(268435455&e)/268435456}e.exports=n,e.exports.random=n,e.exports.randomIterator=function(e,r){var i=r||n();if("function"!=typeof i.next)throw Error("customRandom does not match expected API: next() function is missing");return{forEach:function(n){var r,o,a;for(r=e.length-1;r>0;--r)a=e[o=i.next(r+1)],e[o]=e[r],e[r]=a,n(a);e.length&&n(e[0])},shuffle:function(){var n,r,o;for(n=e.length-1;n>0;--n)o=e[r=i.next(n+1)],e[r]=e[n],e[n]=o;return e}}},r.prototype.next=function(e){return Math.floor(this.nextDouble()*e)},r.prototype.nextDouble=o,r.prototype.uniform=o,r.prototype.gaussian=function(){var e,n,r;do e=(n=2*this.nextDouble()-1)*n+(r=2*this.nextDouble()-1)*r;while(e>=1||0===e);return n*Math.sqrt(-2*Math.log(e)/e)},r.prototype.levy=function(){var e=Math.pow(i(2.5)*Math.sin(1.5*Math.PI/2)/(1.5*i(1.25)*1.189207115002721),.6666666666666666);return this.gaussian()*e/Math.pow(Math.abs(this.gaussian()),.6666666666666666)}},2703:function(e,n,r){"use strict";var i=r(414);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,n,r,o,a,s){if(s!==i){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function n(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:a,resetWarningCache:o};return r.PropTypes=r,r}},5697:function(e,n,r){e.exports=r(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6594:function(e,n,r){"use strict";r.r(n),r.d(n,{Pathfinding:function(){return m}});var i=function(){};i.computeCentroids=function(e){var n,r,i;for(n=0,r=e.faces.length;n<r;n++)(i=e.faces[n]).centroid=new THREE.Vector3(0,0,0),i.centroid.add(e.vertices[i.a]),i.centroid.add(e.vertices[i.b]),i.centroid.add(e.vertices[i.c]),i.centroid.divideScalar(3)},i.roundNumber=function(e,n){return Number(e.toFixed(n))},i.sample=function(e){return e[Math.floor(Math.random()*e.length)]},i.mergeVertexIds=function(e,n){var r=[];if(e.forEach(function(e){n.indexOf(e)>=0&&r.push(e)}),r.length<2)return[];r.includes(e[0])&&r.includes(e[e.length-1])&&e.push(e.shift()),r.includes(n[0])&&r.includes(n[n.length-1])&&n.push(n.shift()),r=[],e.forEach(function(e){n.includes(e)&&r.push(e)});for(var i=r[1],o=r[0],a=e.slice();a[0]!==i;)a.push(a.shift());for(var s=0,l=n.slice();l[0]!==o;)if(l.push(l.shift()),s++>10)throw Error("Unexpected state");return l.shift(),l.pop(),a=a.concat(l)},i.setPolygonCentroid=function(e,n){var r=new THREE.Vector3,i=n.vertices;e.vertexIds.forEach(function(e){r.add(i[e])}),r.divideScalar(e.vertexIds.length),e.centroid.copy(r)},i.cleanPolygon=function(e,n){for(var r=[],i=n.vertices,o=0;o<e.vertexIds.length;o++){var a,s,l,c=i[e.vertexIds[o]];0===o?(a=e.vertexIds[1],s=e.vertexIds[e.vertexIds.length-1]):o===e.vertexIds.length-1?(a=e.vertexIds[0],s=e.vertexIds[e.vertexIds.length-2]):(a=e.vertexIds[o+1],s=e.vertexIds[o-1]),l=i[s];var u=i[a].clone().sub(c),h=l.clone().sub(c),d=u.angleTo(h);if(d>Math.PI-.01&&d<Math.PI+.01){var f=[];e.neighbours.forEach(function(n){n.vertexIds.includes(e.vertexIds[o])||f.push(n)}),e.neighbours=f}else r.push(e.vertexIds[o])}e.vertexIds=r,this.setPolygonCentroid(e,n)},i.isConvex=function(e,n){var r=n.vertices;if(e.vertexIds.length<3)return!1;for(var i=!0,o=[],a=0;a<e.vertexIds.length;a++){var s,l,c=r[e.vertexIds[a]];0===a?(s=r[e.vertexIds[1]],l=r[e.vertexIds[e.vertexIds.length-1]]):a===e.vertexIds.length-1?(s=r[e.vertexIds[0]],l=r[e.vertexIds[e.vertexIds.length-2]]):(s=r[e.vertexIds[a+1]],l=r[e.vertexIds[a-1]]);var u=s.clone().sub(c),h=l.clone().sub(c),d=u.angleTo(h);if(d===Math.PI||0===d)return!1;var f=u.cross(h).y;o.push(f)}return o.forEach(function(e){0===e&&(i=!1)}),o.forEach(o[0]>0?function(e){e<0&&(i=!1)}:function(e){e>0&&(i=!1)}),i},i.distanceToSquared=function(e,n){var r=e.x-n.x,i=e.y-n.y,o=e.z-n.z;return r*r+i*i+o*o},i.isPointInPoly=function(e,n){for(var r=!1,i=-1,o=e.length,a=o-1;++i<o;a=i)(e[i].z<=n.z&&n.z<e[a].z||e[a].z<=n.z&&n.z<e[i].z)&&n.x<(e[a].x-e[i].x)*(n.z-e[i].z)/(e[a].z-e[i].z)+e[i].x&&(r=!r);return r},i.isVectorInPolygon=function(e,n,r){var i=1e5,o=-1e5,a=[];return n.vertexIds.forEach(function(e){i=Math.min(r[e].y,i),o=Math.max(r[e].y,o),a.push(r[e])}),!!(e.y<o+.5&&e.y>i-.5&&this.isPointInPoly(a,e))},i.triarea2=function(e,n,r){return(r.x-e.x)*(n.z-e.z)-(n.x-e.x)*(r.z-e.z)},i.vequal=function(e,n){return 1e-5>this.distanceToSquared(e,n)};var o=function(e){this.content=[],this.scoreFunction=e};o.prototype.push=function(e){this.content.push(e),this.sinkDown(this.content.length-1)},o.prototype.pop=function(){var e=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),e},o.prototype.remove=function(e){var n=this.content.indexOf(e),r=this.content.pop();n!==this.content.length-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.sinkDown(n):this.bubbleUp(n))},o.prototype.size=function(){return this.content.length},o.prototype.rescoreElement=function(e){this.sinkDown(this.content.indexOf(e))},o.prototype.sinkDown=function(e){for(var n=this.content[e];e>0;){var r=(e+1>>1)-1,i=this.content[r];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[r]=n,this.content[e]=i,e=r}},o.prototype.bubbleUp=function(e){for(var n=this.content.length,r=this.content[e],i=this.scoreFunction(r);;){var o=e+1<<1,a=o-1,s=null,l=void 0;if(a<n&&(l=this.scoreFunction(this.content[a]))<i&&(s=a),o<n&&this.scoreFunction(this.content[o])<(null===s?i:l)&&(s=o),null===s)break;this.content[e]=this.content[s],this.content[s]=r,e=s}};var a=function(){};a.init=function(e){for(var n=0;n<e.length;n++){var r=e[n];r.f=0,r.g=0,r.h=0,r.cost=1,r.visited=!1,r.closed=!1,r.parent=null}},a.cleanUp=function(e){for(var n=0;n<e.length;n++){var r=e[n];delete r.f,delete r.g,delete r.h,delete r.cost,delete r.visited,delete r.closed,delete r.parent}},a.heap=function(){return new o(function(e){return e.f})},a.search=function(e,n,r){this.init(e);var i=this.heap();for(i.push(n);i.size()>0;){var o=i.pop();if(o===r){for(var a=o,s=[];a.parent;)s.push(a),a=a.parent;return this.cleanUp(s),s.reverse()}o.closed=!0;for(var l=this.neighbours(e,o),c=0,u=l.length;c<u;c++){var h=l[c];if(!h.closed){var d=o.g+h.cost,f=h.visited;if(!f||d<h.g){if(h.visited=!0,h.parent=o,!h.centroid||!r.centroid)throw Error("Unexpected state");h.h=h.h||this.heuristic(h.centroid,r.centroid),h.g=d,h.f=h.g+h.h,f?i.rescoreElement(h):i.push(h)}}}}return[]},a.heuristic=function(e,n){return i.distanceToSquared(e,n)},a.neighbours=function(e,n){for(var r=[],i=0;i<n.neighbours.length;i++)r.push(e[n.neighbours[i]]);return r};var s=1,l=function(){};l.buildZone=function(e){var n=this,r=this._buildNavigationMesh(e),o={};r.vertices.forEach(function(e){e.x=i.roundNumber(e.x,2),e.y=i.roundNumber(e.y,2),e.z=i.roundNumber(e.z,2)}),o.vertices=r.vertices;var a=this._buildPolygonGroups(r);o.groups=[];var s=function(e,n){for(var r=0;r<e.length;r++)if(n===e[r])return r};return a.forEach(function(e){var r=[];e.forEach(function(o){var a=o.neighbours.map(function(n){return s(e,n)}),l=o.neighbours.map(function(e){return n._getSharedVerticesInOrder(o,e)});o.centroid.x=i.roundNumber(o.centroid.x,2),o.centroid.y=i.roundNumber(o.centroid.y,2),o.centroid.z=i.roundNumber(o.centroid.z,2),r.push({id:s(e,o),neighbours:a,vertexIds:o.vertexIds,centroid:o.centroid,portals:l})}),o.groups.push(r)}),o},l._buildNavigationMesh=function(e){return i.computeCentroids(e),e.mergeVertices(),this._buildPolygonsFromGeometry(e)},l._buildPolygonGroups=function(e){var n=[],r=0,i=function(e){e.neighbours.forEach(function(n){void 0===n.group&&(n.group=e.group,i(n))})};return e.polygons.forEach(function(e){void 0===e.group&&(e.group=r++,i(e)),n[e.group]||(n[e.group]=[]),n[e.group].push(e)}),n},l._buildPolygonNeighbours=function(e,n,r){var i=new Set,o=r.get(e.vertexIds[0]),a=r.get(e.vertexIds[1]),s=r.get(e.vertexIds[2]);o.forEach(function(e){(a.has(e)||s.has(e))&&i.add(n.polygons[e])}),a.forEach(function(e){s.has(e)&&i.add(n.polygons[e])}),e.neighbours=Array.from(i)},l._buildPolygonsFromGeometry=function(e){for(var n=this,r=[],i=e.vertices,o=e.faceVertexUvs,a=new Map,l=0;l<i.length;l++)a.set(l,new Set);e.faces.forEach(function(e){r.push({id:s++,vertexIds:[e.a,e.b,e.c],centroid:e.centroid,normal:e.normal,neighbours:[]}),a.get(e.a).add(r.length-1),a.get(e.b).add(r.length-1),a.get(e.c).add(r.length-1)});var c={polygons:r,vertices:i,faceVertexUvs:o};return r.forEach(function(e){n._buildPolygonNeighbours(e,c,a)}),c},l._getSharedVerticesInOrder=function(e,n){var r=e.vertexIds,i=n.vertexIds,o=new Set;if(r.forEach(function(e){i.includes(e)&&o.add(e)}),o.size<2)return[];o.has(r[0])&&o.has(r[r.length-1])&&r.push(r.shift()),o.has(i[0])&&o.has(i[i.length-1])&&i.push(i.shift());var a=[];return r.forEach(function(e){i.includes(e)&&a.push(e)}),a};var c=function(){this.portals=[]};c.prototype.push=function(e,n){void 0===n&&(n=e),this.portals.push({left:e,right:n})},c.prototype.stringPull=function(){var e,n,r,o=this.portals,a=[],s=0,l=0,c=0;n=o[0].left,r=o[0].right,a.push(e=o[0].left);for(var u=1;u<o.length;u++){var h=o[u].left,d=o[u].right;if(0>=i.triarea2(e,r,d)){if(!(i.vequal(e,r)||i.triarea2(e,n,d)>0)){a.push(n),n=e=n,r=e,l=s=l,c=s,u=s;continue}r=d,c=u}if(i.triarea2(e,n,h)>=0){if(!(i.vequal(e,n)||0>i.triarea2(e,r,h))){a.push(r),n=e=r,r=e,l=s=c,c=s,u=s;continue}n=h,l=u}}return 0!==a.length&&i.vequal(a[a.length-1],o[o.length-1].left)||a.push(o[o.length-1].left),this.path=a,a};var u,h,d,f,p,g,m=function(){this.zones={}};m.createZone=function(e){return l.buildZone(e)},m.prototype.setZoneData=function(e,n){this.zones[e]=n},m.prototype.getGroup=function(e,n){if(!this.zones[e])return null;var r=null,o=2500;return this.zones[e].groups.forEach(function(e,a){e.forEach(function(e){var s=i.distanceToSquared(e.centroid,n);s<o&&(r=a,o=s)})}),r},m.prototype.getRandomNode=function(e,n,r,o){if(!this.zones[e])return new THREE.Vector3;r=r||null,o=o||0;var a=[];return this.zones[e].groups[n].forEach(function(e){r&&o?i.distanceToSquared(r,e.centroid)<o*o&&a.push(e.centroid):a.push(e.centroid)}),i.sample(a)||new THREE.Vector3},m.prototype.getClosestNode=function(e,n,r,o){void 0===o&&(o=!1);var a=this.zones[n].vertices,s=null,l=1/0;return this.zones[n].groups[r].forEach(function(n){var r=i.distanceToSquared(n.centroid,e);r<l&&(!o||i.isVectorInPolygon(e,n,a))&&(s=n,l=r)}),s},m.prototype.findPath=function(e,n,r,i){var o=this.zones[r].groups[i],s=this.zones[r].vertices,l=this.getClosestNode(e,r,i),u=this.getClosestNode(n,r,i,!0);if(!l||!u)return null;var h=a.search(o,l,u),d=new c;d.push(e);for(var f=0;f<h.length;f++){var p=h[f+1];if(p){var g=function(e,n){for(var r=0;r<e.neighbours.length;r++)if(e.neighbours[r]===n.id)return e.portals[r]}(h[f],p);d.push(s[g[0]],s[g[1]])}}d.push(n),d.stringPull();var m=d.path.map(function(e){return new THREE.Vector3(e.x,e.y,e.z)});return m.shift(),m},m.prototype.clampStep=(d=new THREE.Vector3,f=new THREE.Plane,p=new THREE.Triangle,g=new THREE.Vector3,function(e,n,r,i,o,a){var s=this.zones[i].vertices,l=this.zones[i].groups[o],c=[r],m={};m[r.id]=0,u=void 0,g.set(0,0,0),h=1/0,f.setFromCoplanarPoints(s[r.vertexIds[0]],s[r.vertexIds[1]],s[r.vertexIds[2]]),f.projectPoint(n,d),n.copy(d);for(var v=c.pop();v;v=c.pop()){p.set(s[v.vertexIds[0]],s[v.vertexIds[1]],s[v.vertexIds[2]]),p.closestPointToPoint(n,d),d.distanceToSquared(n)<h&&(u=v,g.copy(d),h=d.distanceToSquared(n));var y=m[v];if(!(y>2))for(var b=0;b<v.neighbours.length;b++){var w=l[v.neighbours[b]];w.id in m||(c.push(w),m[w.id]=y+1)}}return a.copy(g),u})},8710:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return i}});var i=function(e){return e instanceof Function?e:"string"==typeof e?function(n){return n[e]}:function(n){return e}}},8776:function(e,n,r){"use strict";function i(e,n){let r;if(void 0===n)for(let n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let i=-1;for(let o of e)null!=(o=n(o,++i,e))&&(r<o||void 0===r&&o>=o)&&(r=o)}return r}r.d(n,{Z:function(){return i}})},8398:function(e,n,r){"use strict";function i(e,n){let r;if(void 0===n)for(let n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let i=-1;for(let o of e)null!=(o=n(o,++i,e))&&(r>o||void 0===r&&o>=o)&&(r=o)}return r}r.d(n,{Z:function(){return i}})},6057:function(e,n){"use strict";var r={value:()=>{}};function i(){for(var e,n=0,r=arguments.length,i={};n<r;++n){if(!(e=arguments[n]+"")||e in i||/[\s.]/.test(e))throw Error("illegal type: "+e);i[e]=[]}return new o(i)}function o(e){this._=e}function a(e,n,i){for(var o=0,a=e.length;o<a;++o)if(e[o].name===n){e[o]=r,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=i&&e.push({name:n,value:i}),e}o.prototype=i.prototype={constructor:o,on:function(e,n){var r,i=this._,o=(e+"").trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!i.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:n}}),s=-1,l=o.length;if(arguments.length<2){for(;++s<l;)if((r=(e=o[s]).type)&&(r=function(e,n){for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).name===n)return r.value}(i[r],e.name)))return r;return}if(null!=n&&"function"!=typeof n)throw Error("invalid callback: "+n);for(;++s<l;)if(r=(e=o[s]).type)i[r]=a(i[r],e.name,n);else if(null==n)for(r in i)i[r]=a(i[r],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new o(e)},call:function(e,n){if((r=arguments.length-2)>0)for(var r,i,o=Array(r),a=0;a<r;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(i=this._[e],a=0,r=i.length;a<r;++a)i[a].value.apply(n,o)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(n,r)}},n.Z=i},4903:function(e,n,r){"use strict";function i(e,n,r){var i,o=1;function a(){var a,s,l=i.length,c=0,u=0,h=0;for(a=0;a<l;++a)c+=(s=i[a]).x||0,u+=s.y||0,h+=s.z||0;for(c=(c/l-e)*o,u=(u/l-n)*o,h=(h/l-r)*o,a=0;a<l;++a)s=i[a],c&&(s.x-=c),u&&(s.y-=u),h&&(s.z-=h)}return null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),a.initialize=function(e){i=e},a.x=function(n){return arguments.length?(e=+n,a):e},a.y=function(e){return arguments.length?(n=+e,a):n},a.z=function(e){return arguments.length?(r=+e,a):r},a.strength=function(e){return arguments.length?(o=+e,a):o},a}r.d(n,{Z:function(){return i}})},42:function(e,n,r){"use strict";function i(e){return function(){return e}}r.d(n,{Z:function(){return i}})},3555:function(e,n,r){"use strict";function i(e){return(e()-.5)*1e-6}r.d(n,{Z:function(){return i}})},6248:function(e,n,r){"use strict";r.d(n,{Z:function(){return l}});var i=r(42),o=r(3555);function a(e){return e.index}function s(e,n){var r=e.get(n);if(!r)throw Error("node not found: "+n);return r}function l(e){var n,r,l,c,u,h,d,f=a,p=function(e){return 1/Math.min(u[e.source.index],u[e.target.index])},g=(0,i.Z)(30),m=1;function v(i){for(var a=0,s=e.length;a<m;++a)for(var l,u,f,p,g,v=0,y=0,b=0,w=0;v<s;++v)u=(l=e[v]).source,y=(f=l.target).x+f.vx-u.x-u.vx||(0,o.Z)(d),c>1&&(b=f.y+f.vy-u.y-u.vy||(0,o.Z)(d)),c>2&&(w=f.z+f.vz-u.z-u.vz||(0,o.Z)(d)),p=((p=Math.sqrt(y*y+b*b+w*w))-r[v])/p*i*n[v],y*=p,b*=p,w*=p,f.vx-=y*(g=h[v]),c>1&&(f.vy-=b*g),c>2&&(f.vz-=w*g),u.vx+=y*(g=1-g),c>1&&(u.vy+=b*g),c>2&&(u.vz+=w*g)}function y(){if(l){var i,o,a=l.length,c=e.length,d=new Map(l.map((e,n)=>[f(e,n,l),e]));for(i=0,u=Array(a);i<c;++i)(o=e[i]).index=i,"object"!=typeof o.source&&(o.source=s(d,o.source)),"object"!=typeof o.target&&(o.target=s(d,o.target)),u[o.source.index]=(u[o.source.index]||0)+1,u[o.target.index]=(u[o.target.index]||0)+1;for(i=0,h=Array(c);i<c;++i)o=e[i],h[i]=u[o.source.index]/(u[o.source.index]+u[o.target.index]);n=Array(c),b(),r=Array(c),w()}}function b(){if(l)for(var r=0,i=e.length;r<i;++r)n[r]=+p(e[r],r,e)}function w(){if(l)for(var n=0,i=e.length;n<i;++n)r[n]=+g(e[n],n,e)}return null==e&&(e=[]),v.initialize=function(e,...n){l=e,d=n.find(e=>"function"==typeof e)||Math.random,c=n.find(e=>[1,2,3].includes(e))||2,y()},v.links=function(n){return arguments.length?(e=n,y(),v):e},v.id=function(e){return arguments.length?(f=e,v):f},v.iterations=function(e){return arguments.length?(m=+e,v):m},v.strength=function(e){return arguments.length?(p="function"==typeof e?e:(0,i.Z)(+e),b(),v):p},v.distance=function(e){return arguments.length?(g="function"==typeof e?e:(0,i.Z)(+e),w(),v):g},v}},3581:function(e,n,r){"use strict";function i(e,n,r){if(isNaN(n))return e;var i,o,a,s,l,c,u=e._root,h={data:r},d=e._x0,f=e._x1;if(!u)return e._root=h,e;for(;u.length;)if((s=n>=(o=(d+f)/2))?d=o:f=o,i=u,!(u=u[l=+s]))return i[l]=h,e;if(n===(a=+e._x.call(null,u.data)))return h.next=u,i?i[l]=h:e._root=h,e;do i=i?i[l]=[,,]:e._root=[,,],(s=n>=(o=(d+f)/2))?d=o:f=o;while((l=+s)==(c=+(a>=o)));return i[c]=u,i[l]=h,e}function o(e,n,r){this.node=e,this.x0=n,this.x1=r}function a(e){return e[0]}function s(e,n){var r=new l(null==n?a:n,NaN,NaN);return null==e?r:r.addAll(e)}function l(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function c(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}r.d(n,{Z:function(){return R}});var u=s.prototype=l.prototype;function h(e,n,r,i){if(isNaN(n)||isNaN(r))return e;var o,a,s,l,c,u,h,d,f,p=e._root,g={data:i},m=e._x0,v=e._y0,y=e._x1,b=e._y1;if(!p)return e._root=g,e;for(;p.length;)if((u=n>=(a=(m+y)/2))?m=a:y=a,(h=r>=(s=(v+b)/2))?v=s:b=s,o=p,!(p=p[d=h<<1|u]))return o[d]=g,e;if(l=+e._x.call(null,p.data),c=+e._y.call(null,p.data),n===l&&r===c)return g.next=p,o?o[d]=g:e._root=g,e;do o=o?o[d]=[,,,,]:e._root=[,,,,],(u=n>=(a=(m+y)/2))?m=a:y=a,(h=r>=(s=(v+b)/2))?v=s:b=s;while((d=h<<1|u)==(f=(c>=s)<<1|l>=a));return o[f]=p,o[d]=g,e}function d(e,n,r,i,o){this.node=e,this.x0=n,this.y0=r,this.x1=i,this.y1=o}function f(e){return e[0]}function p(e){return e[1]}function g(e,n,r){var i=new m(null==n?f:n,null==r?p:r,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function m(e,n,r,i,o,a){this._x=e,this._y=n,this._x0=r,this._y0=i,this._x1=o,this._y1=a,this._root=void 0}function v(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}u.copy=function(){var e,n,r=new l(this._x,this._x0,this._x1),i=this._root;if(!i)return r;if(!i.length)return r._root=c(i),r;for(e=[{source:i,target:r._root=[,,]}];i=e.pop();)for(var o=0;o<2;++o)(n=i.source[o])&&(n.length?e.push({source:n,target:i.target[o]=[,,]}):i.target[o]=c(n));return r},u.add=function(e){let n=+this._x.call(null,e);return i(this.cover(n),n,e)},u.addAll=function(e){Array.isArray(e)||(e=Array.from(e));let n=e.length,r=new Float64Array(n),o=1/0,a=-1/0;for(let i=0,s;i<n;++i)!isNaN(s=+this._x.call(null,e[i]))&&(r[i]=s,s<o&&(o=s),s>a&&(a=s));if(o>a)return this;this.cover(o).cover(a);for(let o=0;o<n;++o)i(this,r[o],e[o]);return this},u.cover=function(e){if(isNaN(e=+e))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var i,o,a=r-n||1,s=this._root;n>e||e>=r;)switch(o=+(e<n),(i=[,,])[o]=s,s=i,a*=2,o){case 0:r=n+a;break;case 1:n=r-a}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._x1=r,this},u.data=function(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e},u.extent=function(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},u.find=function(e,n){var r,i,a,s,l,c=this._x0,u=this._x1,h=[],d=this._root;for(d&&h.push(new o(d,c,u)),null==n?n=1/0:(c=e-n,u=e+n);s=h.pop();)if((d=s.node)&&!((i=s.x0)>u)&&!((a=s.x1)<c)){if(d.length){var f=(i+a)/2;h.push(new o(d[1],f,a),new o(d[0],i,f)),(l=+(e>=f))&&(s=h[h.length-1],h[h.length-1]=h[h.length-1-l],h[h.length-1-l]=s)}else{var p=Math.abs(e-+this._x.call(null,d.data));p<n&&(n=p,c=e-p,u=e+p,r=d.data)}}return r},u.remove=function(e){if(isNaN(a=+this._x.call(null,e)))return this;var n,r,i,o,a,s,l,c,u,h=this._root,d=this._x0,f=this._x1;if(!h)return this;if(h.length)for(;;){if((l=a>=(s=(d+f)/2))?d=s:f=s,n=h,!(h=h[c=+l]))return this;if(!h.length)break;n[c+1&1]&&(r=n,u=c)}for(;h.data!==e;)if(i=h,!(h=h.next))return this;return((o=h.next)&&delete h.next,i)?(o?i.next=o:delete i.next,this):n?(o?n[c]=o:delete n[c],(h=n[0]||n[1])&&h===(n[1]||n[0])&&!h.length&&(r?r[u]=h:this._root=h),this):(this._root=o,this)},u.removeAll=function(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},u.root=function(){return this._root},u.size=function(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e},u.visit=function(e){var n,r,i,a,s=[],l=this._root;for(l&&s.push(new o(l,this._x0,this._x1));n=s.pop();)if(!e(l=n.node,i=n.x0,a=n.x1)&&l.length){var c=(i+a)/2;(r=l[1])&&s.push(new o(r,c,a)),(r=l[0])&&s.push(new o(r,i,c))}return this},u.visitAfter=function(e){var n,r=[],i=[];for(this._root&&r.push(new o(this._root,this._x0,this._x1));n=r.pop();){var a=n.node;if(a.length){var s,l=n.x0,c=n.x1,u=(l+c)/2;(s=a[0])&&r.push(new o(s,l,u)),(s=a[1])&&r.push(new o(s,u,c))}i.push(n)}for(;n=i.pop();)e(n.node,n.x0,n.x1);return this},u.x=function(e){return arguments.length?(this._x=e,this):this._x};var y=g.prototype=m.prototype;function b(e,n,r,i,o){if(isNaN(n)||isNaN(r)||isNaN(i))return e;var a,s,l,c,u,h,d,f,p,g,m,v,y=e._root,b={data:o},w=e._x0,x=e._y0,E=e._z0,_=e._x1,k=e._y1,T=e._z1;if(!y)return e._root=b,e;for(;y.length;)if((f=n>=(s=(w+_)/2))?w=s:_=s,(p=r>=(l=(x+k)/2))?x=l:k=l,(g=i>=(c=(E+T)/2))?E=c:T=c,a=y,!(y=y[m=g<<2|p<<1|f]))return a[m]=b,e;if(u=+e._x.call(null,y.data),h=+e._y.call(null,y.data),d=+e._z.call(null,y.data),n===u&&r===h&&i===d)return b.next=y,a?a[m]=b:e._root=b,e;do a=a?a[m]=Array(8):e._root=Array(8),(f=n>=(s=(w+_)/2))?w=s:_=s,(p=r>=(l=(x+k)/2))?x=l:k=l,(g=i>=(c=(E+T)/2))?E=c:T=c;while((m=g<<2|p<<1|f)==(v=(d>=c)<<2|(h>=l)<<1|u>=s));return a[v]=y,a[m]=b,e}function w(e,n,r,i,o,a,s){this.node=e,this.x0=n,this.y0=r,this.z0=i,this.x1=o,this.y1=a,this.z1=s}function x(e){return e[0]}function E(e){return e[1]}function _(e){return e[2]}function k(e,n,r,i){var o=new T(null==n?x:n,null==r?E:r,null==i?_:i,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?o:o.addAll(e)}function T(e,n,r,i,o,a,s,l,c){this._x=e,this._y=n,this._z=r,this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=l,this._z1=c,this._root=void 0}function O(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}y.copy=function(){var e,n,r=new m(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return r;if(!i.length)return r._root=v(i),r;for(e=[{source:i,target:r._root=[,,,,]}];i=e.pop();)for(var o=0;o<4;++o)(n=i.source[o])&&(n.length?e.push({source:n,target:i.target[o]=[,,,,]}):i.target[o]=v(n));return r},y.add=function(e){let n=+this._x.call(null,e),r=+this._y.call(null,e);return h(this.cover(n,r),n,r,e)},y.addAll=function(e){var n,r,i,o,a=e.length,s=Array(a),l=Array(a),c=1/0,u=1/0,d=-1/0,f=-1/0;for(r=0;r<a;++r)!(isNaN(i=+this._x.call(null,n=e[r]))||isNaN(o=+this._y.call(null,n)))&&(s[r]=i,l[r]=o,i<c&&(c=i),i>d&&(d=i),o<u&&(u=o),o>f&&(f=o));if(c>d||u>f)return this;for(this.cover(c,u).cover(d,f),r=0;r<a;++r)h(this,s[r],l[r],e[r]);return this},y.cover=function(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._x1,a=this._y1;if(isNaN(r))o=(r=Math.floor(e))+1,a=(i=Math.floor(n))+1;else{for(var s,l,c=o-r||1,u=this._root;r>e||e>=o||i>n||n>=a;)switch(l=(n<i)<<1|e<r,(s=[,,,,])[l]=u,u=s,c*=2,l){case 0:o=r+c,a=i+c;break;case 1:r=o-c,a=i+c;break;case 2:o=r+c,i=a-c;break;case 3:r=o-c,i=a-c}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=i,this._x1=o,this._y1=a,this},y.data=function(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e},y.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},y.find=function(e,n,r){var i,o,a,s,l,c,u,h=this._x0,f=this._y0,p=this._x1,g=this._y1,m=[],v=this._root;for(v&&m.push(new d(v,h,f,p,g)),null==r?r=1/0:(h=e-r,f=n-r,p=e+r,g=n+r,r*=r);c=m.pop();)if((v=c.node)&&!((o=c.x0)>p)&&!((a=c.y0)>g)&&!((s=c.x1)<h)&&!((l=c.y1)<f)){if(v.length){var y=(o+s)/2,b=(a+l)/2;m.push(new d(v[3],y,b,s,l),new d(v[2],o,b,y,l),new d(v[1],y,a,s,b),new d(v[0],o,a,y,b)),(u=(n>=b)<<1|e>=y)&&(c=m[m.length-1],m[m.length-1]=m[m.length-1-u],m[m.length-1-u]=c)}else{var w=e-+this._x.call(null,v.data),x=n-+this._y.call(null,v.data),E=w*w+x*x;if(E<r){var _=Math.sqrt(r=E);h=e-_,f=n-_,p=e+_,g=n+_,i=v.data}}}return i},y.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e)))return this;var n,r,i,o,a,s,l,c,u,h,d,f,p=this._root,g=this._x0,m=this._y0,v=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((u=a>=(l=(g+v)/2))?g=l:v=l,(h=s>=(c=(m+y)/2))?m=c:y=c,n=p,!(p=p[d=h<<1|u]))return this;if(!p.length)break;(n[d+1&3]||n[d+2&3]||n[d+3&3])&&(r=n,f=d)}for(;p.data!==e;)if(i=p,!(p=p.next))return this;return((o=p.next)&&delete p.next,i)?(o?i.next=o:delete i.next,this):n?(o?n[d]=o:delete n[d],(p=n[0]||n[1]||n[2]||n[3])&&p===(n[3]||n[2]||n[1]||n[0])&&!p.length&&(r?r[f]=p:this._root=p),this):(this._root=o,this)},y.removeAll=function(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},y.root=function(){return this._root},y.size=function(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e},y.visit=function(e){var n,r,i,o,a,s,l=[],c=this._root;for(c&&l.push(new d(c,this._x0,this._y0,this._x1,this._y1));n=l.pop();)if(!e(c=n.node,i=n.x0,o=n.y0,a=n.x1,s=n.y1)&&c.length){var u=(i+a)/2,h=(o+s)/2;(r=c[3])&&l.push(new d(r,u,h,a,s)),(r=c[2])&&l.push(new d(r,i,h,u,s)),(r=c[1])&&l.push(new d(r,u,o,a,h)),(r=c[0])&&l.push(new d(r,i,o,u,h))}return this},y.visitAfter=function(e){var n,r=[],i=[];for(this._root&&r.push(new d(this._root,this._x0,this._y0,this._x1,this._y1));n=r.pop();){var o=n.node;if(o.length){var a,s=n.x0,l=n.y0,c=n.x1,u=n.y1,h=(s+c)/2,f=(l+u)/2;(a=o[0])&&r.push(new d(a,s,l,h,f)),(a=o[1])&&r.push(new d(a,h,l,c,f)),(a=o[2])&&r.push(new d(a,s,f,h,u)),(a=o[3])&&r.push(new d(a,h,f,c,u))}i.push(n)}for(;n=i.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this},y.x=function(e){return arguments.length?(this._x=e,this):this._x},y.y=function(e){return arguments.length?(this._y=e,this):this._y};var C=k.prototype=T.prototype;C.copy=function(){var e,n,r=new T(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),i=this._root;if(!i)return r;if(!i.length)return r._root=O(i),r;for(e=[{source:i,target:r._root=Array(8)}];i=e.pop();)for(var o=0;o<8;++o)(n=i.source[o])&&(n.length?e.push({source:n,target:i.target[o]=Array(8)}):i.target[o]=O(n));return r},C.add=function(e){let n=+this._x.call(null,e),r=+this._y.call(null,e),i=+this._z.call(null,e);return b(this.cover(n,r,i),n,r,i,e)},C.addAll=function(e){Array.isArray(e)||(e=Array.from(e));let n=e.length,r=new Float64Array(n),i=new Float64Array(n),o=new Float64Array(n),a=1/0,s=1/0,l=1/0,c=-1/0,u=-1/0,h=-1/0;for(let d=0,f,p,g,m;d<n;++d)!(isNaN(p=+this._x.call(null,f=e[d]))||isNaN(g=+this._y.call(null,f))||isNaN(m=+this._z.call(null,f)))&&(r[d]=p,i[d]=g,o[d]=m,p<a&&(a=p),p>c&&(c=p),g<s&&(s=g),g>u&&(u=g),m<l&&(l=m),m>h&&(h=m));if(a>c||s>u||l>h)return this;this.cover(a,s,l).cover(c,u,h);for(let a=0;a<n;++a)b(this,r[a],i[a],o[a],e[a]);return this},C.cover=function(e,n,r){if(isNaN(e=+e)||isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,o=this._y0,a=this._z0,s=this._x1,l=this._y1,c=this._z1;if(isNaN(i))s=(i=Math.floor(e))+1,l=(o=Math.floor(n))+1,c=(a=Math.floor(r))+1;else{for(var u,h,d=s-i||1,f=this._root;i>e||e>=s||o>n||n>=l||a>r||r>=c;)switch(h=(r<a)<<2|(n<o)<<1|e<i,(u=Array(8))[h]=f,f=u,d*=2,h){case 0:s=i+d,l=o+d,c=a+d;break;case 1:i=s-d,l=o+d,c=a+d;break;case 2:s=i+d,o=l-d,c=a+d;break;case 3:i=s-d,o=l-d,c=a+d;break;case 4:s=i+d,l=o+d,a=c-d;break;case 5:i=s-d,l=o+d,a=c-d;break;case 6:s=i+d,o=l-d,a=c-d;break;case 7:i=s-d,o=l-d,a=c-d}this._root&&this._root.length&&(this._root=f)}return this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=l,this._z1=c,this},C.data=function(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e},C.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},C.find=function(e,n,r,i){var o,a,s,l,c,u,h,d,f,p=this._x0,g=this._y0,m=this._z0,v=this._x1,y=this._y1,b=this._z1,x=[],E=this._root;for(E&&x.push(new w(E,p,g,m,v,y,b)),null==i?i=1/0:(p=e-i,g=n-i,m=r-i,v=e+i,y=n+i,b=r+i,i*=i);d=x.pop();)if((E=d.node)&&!((a=d.x0)>v)&&!((s=d.y0)>y)&&!((l=d.z0)>b)&&!((c=d.x1)<p)&&!((u=d.y1)<g)&&!((h=d.z1)<m)){if(E.length){var _=(a+c)/2,k=(s+u)/2,T=(l+h)/2;x.push(new w(E[7],_,k,T,c,u,h),new w(E[6],a,k,T,_,u,h),new w(E[5],_,s,T,c,k,h),new w(E[4],a,s,T,_,k,h),new w(E[3],_,k,l,c,u,T),new w(E[2],a,k,l,_,u,T),new w(E[1],_,s,l,c,k,T),new w(E[0],a,s,l,_,k,T)),(f=(r>=T)<<2|(n>=k)<<1|e>=_)&&(d=x[x.length-1],x[x.length-1]=x[x.length-1-f],x[x.length-1-f]=d)}else{var O=e-+this._x.call(null,E.data),C=n-+this._y.call(null,E.data),A=r-+this._z.call(null,E.data),S=O*O+C*C+A*A;if(S<i){var M=Math.sqrt(i=S);p=e-M,g=n-M,m=r-M,v=e+M,y=n+M,b=r+M,o=E.data}}}return o},C.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e))||isNaN(l=+this._z.call(null,e)))return this;var n,r,i,o,a,s,l,c,u,h,d,f,p,g,m,v=this._root,y=this._x0,b=this._y0,w=this._z0,x=this._x1,E=this._y1,_=this._z1;if(!v)return this;if(v.length)for(;;){if((d=a>=(c=(y+x)/2))?y=c:x=c,(f=s>=(u=(b+E)/2))?b=u:E=u,(p=l>=(h=(w+_)/2))?w=h:_=h,n=v,!(v=v[g=p<<2|f<<1|d]))return this;if(!v.length)break;(n[g+1&7]||n[g+2&7]||n[g+3&7]||n[g+4&7]||n[g+5&7]||n[g+6&7]||n[g+7&7])&&(r=n,m=g)}for(;v.data!==e;)if(i=v,!(v=v.next))return this;return((o=v.next)&&delete v.next,i)?(o?i.next=o:delete i.next,this):n?(o?n[g]=o:delete n[g],(v=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&v===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!v.length&&(r?r[m]=v:this._root=v),this):(this._root=o,this)},C.removeAll=function(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},C.root=function(){return this._root},C.size=function(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e},C.visit=function(e){var n,r,i,o,a,s,l,c,u=[],h=this._root;for(h&&u.push(new w(h,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=u.pop();)if(!e(h=n.node,i=n.x0,o=n.y0,a=n.z0,s=n.x1,l=n.y1,c=n.z1)&&h.length){var d=(i+s)/2,f=(o+l)/2,p=(a+c)/2;(r=h[7])&&u.push(new w(r,d,f,p,s,l,c)),(r=h[6])&&u.push(new w(r,i,f,p,d,l,c)),(r=h[5])&&u.push(new w(r,d,o,p,s,f,c)),(r=h[4])&&u.push(new w(r,i,o,p,d,f,c)),(r=h[3])&&u.push(new w(r,d,f,a,s,l,p)),(r=h[2])&&u.push(new w(r,i,f,a,d,l,p)),(r=h[1])&&u.push(new w(r,d,o,a,s,f,p)),(r=h[0])&&u.push(new w(r,i,o,a,d,f,p))}return this},C.visitAfter=function(e){var n,r=[],i=[];for(this._root&&r.push(new w(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=r.pop();){var o=n.node;if(o.length){var a,s=n.x0,l=n.y0,c=n.z0,u=n.x1,h=n.y1,d=n.z1,f=(s+u)/2,p=(l+h)/2,g=(c+d)/2;(a=o[0])&&r.push(new w(a,s,l,c,f,p,g)),(a=o[1])&&r.push(new w(a,f,l,c,u,p,g)),(a=o[2])&&r.push(new w(a,s,p,c,f,h,g)),(a=o[3])&&r.push(new w(a,f,p,c,u,h,g)),(a=o[4])&&r.push(new w(a,s,l,g,f,p,d)),(a=o[5])&&r.push(new w(a,f,l,g,u,p,d)),(a=o[6])&&r.push(new w(a,s,p,g,f,h,d)),(a=o[7])&&r.push(new w(a,f,p,g,u,h,d))}i.push(n)}for(;n=i.pop();)e(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this},C.x=function(e){return arguments.length?(this._x=e,this):this._x},C.y=function(e){return arguments.length?(this._y=e,this):this._y},C.z=function(e){return arguments.length?(this._z=e,this):this._z};var A=r(42),S=r(3555),M=r(9330);function R(){var e,n,r,i,o,a,l=(0,A.Z)(-30),c=1,u=1/0,h=.81;function d(i){var a,l=e.length,c=(1===n?s(e,M.x):2===n?g(e,M.x,M.y):3===n?k(e,M.x,M.y,M.z):null).visitAfter(p);for(o=i,a=0;a<l;++a)r=e[a],c.visit(m)}function f(){if(e){var n,r,i=e.length;for(n=0,a=Array(i);n<i;++n)a[(r=e[n]).index]=+l(r,n,e)}}function p(e){var r,i,o,s,l,c,u=0,h=0,d=e.length;if(d){for(o=s=l=c=0;c<d;++c)(r=e[c])&&(i=Math.abs(r.value))&&(u+=r.value,h+=i,o+=i*(r.x||0),s+=i*(r.y||0),l+=i*(r.z||0));u*=Math.sqrt(4/d),e.x=o/h,n>1&&(e.y=s/h),n>2&&(e.z=l/h)}else{(r=e).x=r.data.x,n>1&&(r.y=r.data.y),n>2&&(r.z=r.data.z);do u+=a[r.data.index];while(r=r.next)}e.value=u}function m(e,s,l,d,f){if(!e.value)return!0;var p=[l,d,f][n-1],g=e.x-r.x,m=n>1?e.y-r.y:0,v=n>2?e.z-r.z:0,y=p-s,b=g*g+m*m+v*v;if(y*y/h<b)return b<u&&(0===g&&(b+=(g=(0,S.Z)(i))*g),n>1&&0===m&&(b+=(m=(0,S.Z)(i))*m),n>2&&0===v&&(b+=(v=(0,S.Z)(i))*v),b<c&&(b=Math.sqrt(c*b)),r.vx+=g*e.value*o/b,n>1&&(r.vy+=m*e.value*o/b),n>2&&(r.vz+=v*e.value*o/b)),!0;if(!e.length&&!(b>=u)){(e.data!==r||e.next)&&(0===g&&(b+=(g=(0,S.Z)(i))*g),n>1&&0===m&&(b+=(m=(0,S.Z)(i))*m),n>2&&0===v&&(b+=(v=(0,S.Z)(i))*v),b<c&&(b=Math.sqrt(c*b)));do e.data!==r&&(y=a[e.data.index]*o/b,r.vx+=g*y,n>1&&(r.vy+=m*y),n>2&&(r.vz+=v*y));while(e=e.next)}}return d.initialize=function(r,...o){e=r,i=o.find(e=>"function"==typeof e)||Math.random,n=o.find(e=>[1,2,3].includes(e))||2,f()},d.strength=function(e){return arguments.length?(l="function"==typeof e?e:(0,A.Z)(+e),f(),d):l},d.distanceMin=function(e){return arguments.length?(c=e*e,d):Math.sqrt(c)},d.distanceMax=function(e){return arguments.length?(u=e*e,d):Math.sqrt(u)},d.theta=function(e){return arguments.length?(h=e*e,d):Math.sqrt(h)},d}},8376:function(e,n,r){"use strict";r.d(n,{Z:function(){return o}});var i=r(42);function o(e,n,r,o){var a,s,l,c,u=(0,i.Z)(.1);function h(e){for(var i=0,u=a.length;i<u;++i){var h=a[i],d=h.x-n||1e-6,f=(h.y||0)-r||1e-6,p=(h.z||0)-o||1e-6,g=Math.sqrt(d*d+f*f+p*p),m=(c[i]-g)*l[i]*e/g;h.vx+=d*m,s>1&&(h.vy+=f*m),s>2&&(h.vz+=p*m)}}function d(){if(a){var n,r=a.length;for(n=0,l=Array(r),c=Array(r);n<r;++n)c[n]=+e(a[n],n,a),l[n]=isNaN(c[n])?0:+u(a[n],n,a)}}return"function"!=typeof e&&(e=(0,i.Z)(+e)),null==n&&(n=0),null==r&&(r=0),null==o&&(o=0),h.initialize=function(e,...n){a=e,s=n.find(e=>[1,2,3].includes(e))||2,d()},h.strength=function(e){return arguments.length?(u="function"==typeof e?e:(0,i.Z)(+e),d(),h):u},h.radius=function(n){return arguments.length?(e="function"==typeof n?n:(0,i.Z)(+n),d(),h):e},h.x=function(e){return arguments.length?(n=+e,h):n},h.y=function(e){return arguments.length?(r=+e,h):r},h.z=function(e){return arguments.length?(o=+e,h):o},h}},9330:function(e,n,r){"use strict";r.d(n,{Z:function(){return h},x:function(){return a},y:function(){return s},z:function(){return l}});var i=r(6057),o=r(1739);function a(e){return e.x}function s(e){return e.y}function l(e){return e.z}var c=Math.PI*(3-Math.sqrt(5)),u=20*Math.PI/(9+Math.sqrt(221));function h(e,n){let r;var a,s=Math.min(3,Math.max(1,Math.round(n=n||2))),l=1,h=.001,d=1-Math.pow(.001,1/300),f=0,p=.6,g=new Map,m=(0,o.HT)(b),v=(0,i.Z)("tick","end"),y=(r=1,()=>(r=(1664525*r+1013904223)%4294967296)/4294967296);function b(){w(),v.call("tick",a),l<h&&(m.stop(),v.call("end",a))}function w(n){var r,i,o=e.length;void 0===n&&(n=1);for(var c=0;c<n;++c)for(l+=(f-l)*d,g.forEach(function(e){e(l)}),r=0;r<o;++r)null==(i=e[r]).fx?i.x+=i.vx*=p:(i.x=i.fx,i.vx=0),s>1&&(null==i.fy?i.y+=i.vy*=p:(i.y=i.fy,i.vy=0)),s>2&&(null==i.fz?i.z+=i.vz*=p:(i.z=i.fz,i.vz=0));return a}function x(){for(var n,r=0,i=e.length;r<i;++r){if((n=e[r]).index=r,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),null!=n.fz&&(n.z=n.fz),isNaN(n.x)||s>1&&isNaN(n.y)||s>2&&isNaN(n.z)){var o=10*(s>2?Math.cbrt(.5+r):s>1?Math.sqrt(.5+r):r),a=r*c,l=r*u;1===s?n.x=o:2===s?(n.x=o*Math.cos(a),n.y=o*Math.sin(a)):(n.x=o*Math.sin(a)*Math.cos(l),n.y=o*Math.cos(a),n.z=o*Math.sin(a)*Math.sin(l))}(isNaN(n.vx)||s>1&&isNaN(n.vy)||s>2&&isNaN(n.vz))&&(n.vx=0,s>1&&(n.vy=0),s>2&&(n.vz=0))}}function E(n){return n.initialize&&n.initialize(e,y,s),n}return null==e&&(e=[]),x(),a={tick:w,restart:function(){return m.restart(b),a},stop:function(){return m.stop(),a},numDimensions:function(e){return arguments.length?(s=Math.min(3,Math.max(1,Math.round(e))),g.forEach(E),a):s},nodes:function(n){return arguments.length?(e=n,x(),g.forEach(E),a):e},alpha:function(e){return arguments.length?(l=+e,a):l},alphaMin:function(e){return arguments.length?(h=+e,a):h},alphaDecay:function(e){return arguments.length?(d=+e,a):+d},alphaTarget:function(e){return arguments.length?(f=+e,a):f},velocityDecay:function(e){return arguments.length?(p=1-e,a):1-p},randomSource:function(e){return arguments.length?(y=e,g.forEach(E),a):y},force:function(e,n){return arguments.length>1?(null==n?g.delete(e):g.set(e,E(n)),a):g.get(e)},find:function(){var n,r,i,o,a,l,c=Array.prototype.slice.call(arguments),u=c.shift()||0,h=(s>1?c.shift():null)||0,d=(s>2?c.shift():null)||0,f=c.shift()||1/0,p=0,g=e.length;for(f*=f,p=0;p<g;++p)(o=(n=u-(a=e[p]).x)*n+(r=h-(a.y||0))*r+(i=d-(a.z||0))*i)<f&&(l=a,f=o);return l},on:function(e,n){return arguments.length>1?(v.on(e,n),a):v.on(e)}}}},6668:function(e,n,r){"use strict";r.d(n,{Z:function(){return i}});var i=function(e){for(var n=e.length/6|0,r=Array(n),i=0;i<n;)r[i]="#"+e.slice(6*i,6*++i);return r}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")},9843:function(e,n,r){"use strict";r.d(n,{Z:function(){return function e(){var n=new i,r=[],o=[],a=l;function c(e){let i=n.get(e);if(void 0===i){if(a!==l)return a;n.set(e,i=r.push(e)-1)}return o[i%o.length]}return c.domain=function(e){if(!arguments.length)return r.slice();for(let o of(r=[],n=new i,e))n.has(o)||n.set(o,r.push(o)-1);return c},c.range=function(e){return arguments.length?(o=Array.from(e),c):o.slice()},c.unknown=function(e){return arguments.length?(a=e,c):a},c.copy=function(){return e(r,o).unknown(a)},s.apply(c,arguments),c}}});class i extends Map{constructor(e,n=a){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=e)for(let[n,r]of e)this.set(n,r)}get(e){return super.get(o(this,e))}has(e){return super.has(o(this,e))}set(e,n){return super.set(function({_intern:e,_key:n},r){let i=n(r);return e.has(i)?e.get(i):(e.set(i,r),r)}(this,e),n)}delete(e){return super.delete(function({_intern:e,_key:n},r){let i=n(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}(this,e))}}function o({_intern:e,_key:n},r){let i=n(r);return e.has(i)?e.get(i):r}function a(e){return null!==e&&"object"==typeof e?e.valueOf():e}function s(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e)}return this}let l=Symbol("implicit")},1739:function(e,n,r){"use strict";r.d(n,{B7:function(){return m},HT:function(){return v},zO:function(){return p}});var i,o,a=0,s=0,l=0,c=0,u=0,h=0,d="object"==typeof performance&&performance.now?performance:Date,f="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function p(){return u||(f(g),u=d.now()+h)}function g(){u=0}function m(){this._call=this._time=this._next=null}function v(e,n,r){var i=new m;return i.restart(e,n,r),i}function y(){u=(c=d.now())+h,a=s=0;try{!function(){p(),++a;for(var e,n=i;n;)(e=u-n._time)>=0&&n._call.call(void 0,e),n=n._next;--a}()}finally{a=0,function(){for(var e,n,r=i,a=1/0;r;)r._call?(a>r._time&&(a=r._time),e=r,r=r._next):(n=r._next,r._next=null,r=e?e._next=n:i=n);o=e,w(a)}(),u=0}}function b(){var e=d.now(),n=e-c;n>1e3&&(h-=n,c=e)}function w(e){!a&&(s&&(s=clearTimeout(s)),e-u>24?(e<1/0&&(s=setTimeout(y,e-d.now()-h)),l&&(l=clearInterval(l))):(l||(c=d.now(),l=setInterval(b,1e3)),a=1,f(y)))}m.prototype=v.prototype={constructor:m,restart:function(e,n,r){if("function"!=typeof e)throw TypeError("callback is not a function");r=(null==r?p():+r)+(null==n?0:+n),this._next||o===this||(o?o._next=this:i=this,o=this),this._call=e,this._time=r,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}}},3780:function(e,n,r){"use strict";function i(e,n){if(e){if("string"==typeof e)return o(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,n)}}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function a(e){var n=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:String(n)}r.d(n,{Z:function(){return s}});var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(e){return{keyAccessor:e,isProp:!(e instanceof Function)}}),c=e.reduce(function(e,n){var i=e,o=n;return l.forEach(function(e,n){var s,c=e.keyAccessor;if(e.isProp){var u=o,h=u[c],d=function(e,n){if(null==e)return{};var r,i,o=function(e,n){if(null==e)return{};var r,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(u,[c].map(a));s=h,o=d}else s=c(o,n);n+1<l.length?(i.hasOwnProperty(s)||(i[s]={}),i=i[s]):r?(i.hasOwnProperty(s)||(i[s]=[]),i[s].push(o)):i[s]=o}),e},{});r instanceof Function&&function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i===l.length?Object.keys(n).forEach(function(e){return n[e]=r(n[e])}):Object.values(n).forEach(function(n){return e(n,i+1)})}(c);var u=c;return s&&(u=[],function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];r.length===l.length?u.push({keys:r,vals:n}):Object.entries(n).forEach(function(n){var a=function(e){if(Array.isArray(e))return e}(n)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(n,2)||i(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=a[0];return e(a[1],[].concat(function(e){if(Array.isArray(e))return o(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||i(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[s]))})}(c),n instanceof Array&&0===n.length&&1===u.length&&(u[0].keys=[])),u}},2650:function(e,n,r){"use strict";r.d(n,{Z:function(){return h}});var i,o,a,s=r(4615);function l(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){var n=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:String(n)}(i.key),i)}}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}var u=(i=function e(n,r){var i=r.default,o=r.triggerUpdate,a=r.onChange;(function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")})(this,e),this.name=n,this.defaultVal=void 0===i?null:i,this.triggerUpdate=void 0===o||o,this.onChange=void 0===a?function(e,n){}:a},o&&l(i.prototype,o),a&&l(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i);function h(e){var n=e.stateInit,r=void 0===n?function(){return{}}:n,i=e.props,o=void 0===i?{}:i,a=e.methods,l=void 0===a?{}:a,h=e.aliases,d=void 0===h?{}:h,f=e.init,p=void 0===f?function(){}:f,g=e.update,m=void 0===g?function(){}:g,v=Object.keys(o).map(function(e){return new u(e,o[e])});return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},r instanceof Function?r(e):r,{initialised:!1}),i={};function o(n){return a(n,e),u(),o}var a=function(e,r){p.call(o,e,n,r),n.initialised=!0},u=(0,s.Z)(function(){n.initialised&&(m.call(o,n,i),i={})},1);return v.forEach(function(e){var r,a,s,l,c,h,d;o[e.name]=(r=e.name,s=void 0!==(a=e.triggerUpdate)&&a,c=void 0===(l=e.onChange)?function(e,n){}:l,d=void 0===(h=e.defaultVal)?null:h,function(e){var a=n[r];if(!arguments.length)return a;var l=void 0===e?d:e;return n[r]=l,c.call(o,l,n,a),i.hasOwnProperty(r)||(i[r]=a),s&&u(),o})}),Object.keys(l).forEach(function(e){o[e]=function(){for(var r,i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return(r=l[e]).call.apply(r,[o,n].concat(a))}}),Object.entries(d).forEach(function(e){var n=function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,2)||function(e,n){if(e){if("string"==typeof e)return c(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,n)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],i=n[1];return o[r]=o[i]}),o.resetProps=function(){return v.forEach(function(e){o[e.name](e.defaultVal)}),o},o.resetProps(),n._rerender=u,o}}},4615:function(e,n,r){"use strict";r.d(n,{Z:function(){return S}});var i=r(7226),o="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,s=o||a||Function("return this")(),l=function(){return s.Date.now()},c=/\s/,u=function(e){for(var n=e.length;n--&&c.test(e.charAt(n)););return n},h=/^\s+/,d=s.Symbol,f=Object.prototype,p=f.hasOwnProperty,g=f.toString,m=d?d.toStringTag:void 0,v=function(e){var n=p.call(e,m),r=e[m];try{e[m]=void 0;var i=!0}catch(e){}var o=g.call(e);return i&&(n?e[m]=r:delete e[m]),o},y=Object.prototype.toString,b=d?d.toStringTag:void 0,w=function(e){var n;return"symbol"==typeof e||null!=e&&"object"==typeof e&&"[object Symbol]"==(null==(n=e)?void 0===n?"[object Undefined]":"[object Null]":b&&b in Object(n)?v(n):y.call(n))},x=0/0,E=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,k=/^0o[0-7]+$/i,T=parseInt,O=function(e){if("number"==typeof e)return e;if(w(e))return x;if((0,i.Z)(e)){var n,r="function"==typeof e.valueOf?e.valueOf():e;e=(0,i.Z)(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=(n=e)?n.slice(0,u(n)+1).replace(h,""):n;var o=_.test(e);return o||k.test(e)?T(e.slice(2),o?2:8):E.test(e)?x:+e},C=Math.max,A=Math.min,S=function(e,n,r){var o,a,s,c,u,h,d=0,f=!1,p=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function m(n){var r=o,i=a;return o=a=void 0,d=n,c=e.apply(i,r)}function v(e){var r=e-h,i=e-d;return void 0===h||r>=n||r<0||p&&i>=s}function y(){var e,r,i,o=l();if(v(o))return b(o);u=setTimeout(y,(e=o-h,r=o-d,i=n-e,p?A(i,s-r):i))}function b(e){return(u=void 0,g&&o)?m(e):(o=a=void 0,c)}function w(){var e,r=l(),i=v(r);if(o=arguments,a=this,h=r,i){if(void 0===u)return d=e=h,u=setTimeout(y,n),f?m(e):c;if(p)return clearTimeout(u),u=setTimeout(y,n),m(h)}return void 0===u&&(u=setTimeout(y,n)),c}return n=O(n)||0,(0,i.Z)(r)&&(f=!!r.leading,s=(p="maxWait"in r)?C(O(r.maxWait)||0,n):s,g="trailing"in r?!!r.trailing:g),w.cancel=function(){void 0!==u&&clearTimeout(u),d=0,o=h=a=u=void 0},w.flush=function(){return void 0===u?c:b(l())},w}},7226:function(e,n){"use strict";n.Z=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},2425:function(e,n,r){"use strict";r.r(n),r.d(n,{ForceGraph2D:function(){return oh},ForceGraph3D:function(){return ou},ForceGraphAR:function(){return oc},ForceGraphVR:function(){return ol}});var i,o,a,s=r(7294);function l(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||c(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,n){if(e){if("string"==typeof e)return u(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,n)}}function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}var h=function(e,n){var r,i=new Set(n);return Object.assign.apply(Object,[{}].concat(function(e){if(Array.isArray(e))return u(e)}(r=Object.entries(e).filter(function(e){var n=l(e,1)[0];return!i.has(n)}).map(function(e){var n,r,i,o=l(e,2),a=o[0],s=o[1];return r={},(i="symbol"==typeof(n=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(i=a,"string"))?n:String(n))in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,r}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||c(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))},d=r(3405);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||m(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,n){if(e){if("string"==typeof e)return v(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,n)}}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function y(e,n){var r="object"===f(n)?n:{wrapperElementType:n,methodNames:(arguments.length<=2?void 0:arguments[2])||void 0,initPropNames:(arguments.length<=3?void 0:arguments[3])||void 0},i=r.wrapperElementType,o=void 0===i?"div":i,a=r.nodeMapper,l=void 0===a?function(e){return e}:a,c=r.methodNames,u=void 0===c?[]:c,m=r.initPropNames,v=void 0===m?[]:m;return(0,s.forwardRef)(function(n,r){var i=(0,s.useRef)(),a=p((0,s.useState)({}),2),c=a[0],f=a[1];(0,s.useEffect)(function(){return f(n)});var m=(0,s.useMemo)(function(){return e(d(v.filter(function(e){return n.hasOwnProperty(e)}).map(function(e){return[e,n[e]]})))},[]);b(function(){m(l(i.current))},s.useLayoutEffect),b(function(){return m._destructor instanceof Function?m._destructor:void 0});var y=(0,s.useCallback)(function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return m[e]instanceof Function?m[e].apply(m,r):void 0},[m]);return Object.keys(h(n,[].concat(g(u),g(v)))).filter(function(e){return c[e]!==n[e]}).forEach(function(e){return y(e,n[e])}),(0,s.useImperativeHandle)(r,function(){return d(u.map(function(e){return[e,function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return y.apply(void 0,[e].concat(r))}]}))}),s.createElement(o,{ref:i})})}function b(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.useEffect,r=(0,s.useRef)(),i=(0,s.useRef)(!1),o=(0,s.useRef)(!1),a=p((0,s.useState)(0),2);a[0];var l=a[1];i.current&&(o.current=!0),n(function(){return i.current||(r.current=e(),i.current=!0),l(function(e){return e+1}),function(){o.current&&r.current&&r.current()}},[])}r(5569),r(401),r(1359);var w=r(2650),x=r(8710),E=r(7462),_=r(7326),k=r(4578);function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=r(9611);function C(e,n,r){return(C=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,n,r){var i=[null];i.push.apply(i,n);var o=new(Function.bind.apply(e,i));return r&&(0,O.Z)(o,r.prototype),o}:Reflect.construct.bind()).apply(null,arguments)}function A(e){var n="function"==typeof Map?new Map:void 0;return(A=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return C(e,arguments,T(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,O.Z)(r,e)})(e)}var S=function(e){function n(n){var r;return r=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+n+" for more information.")||this,(0,_.Z)(r)}return(0,k.Z)(n,e),n}(A(Error));function M(e){return Math.round(255*e)}function R(e,n,r){return M(e)+","+M(n)+","+M(r)}function j(e,n,r,i){if(void 0===i&&(i=R),0===n)return i(r,r,r);var o=(e%360+360)%360/60,a=(1-Math.abs(2*r-1))*n,s=a*(1-Math.abs(o%2-1)),l=0,c=0,u=0;o>=0&&o<1?(l=a,c=s):o>=1&&o<2?(l=s,c=a):o>=2&&o<3?(c=a,u=s):o>=3&&o<4?(c=s,u=a):o>=4&&o<5?(l=s,u=a):o>=5&&o<6&&(l=a,u=s);var h=r-a/2;return i(l+h,c+h,u+h)}var P={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},N=/^#[a-fA-F0-9]{6}$/,D=/^#[a-fA-F0-9]{8}$/,L=/^#[a-fA-F0-9]{3}$/,I=/^#[a-fA-F0-9]{4}$/,z=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,H=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,F=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,B=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function V(e){if("string"!=typeof e)throw new S(3);var n=function(e){if("string"!=typeof e)return e;var n=e.toLowerCase();return P[n]?"#"+P[n]:e}(e);if(n.match(N))return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16)};if(n.match(D)){var r=parseFloat((parseInt(""+n[7]+n[8],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16),alpha:r}}if(n.match(L))return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16)};if(n.match(I)){var i=parseFloat((parseInt(""+n[4]+n[4],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16),alpha:i}}var o=z.exec(n);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var a=H.exec(n.substring(0,50));if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10),alpha:parseFloat(""+a[4])>1?parseFloat(""+a[4])/100:parseFloat(""+a[4])};var s=F.exec(n);if(s){var l="rgb("+j(parseInt(""+s[1],10),parseInt(""+s[2],10)/100,parseInt(""+s[3],10)/100)+")",c=z.exec(l);if(!c)throw new S(4,n,l);return{red:parseInt(""+c[1],10),green:parseInt(""+c[2],10),blue:parseInt(""+c[3],10)}}var u=B.exec(n.substring(0,50));if(u){var h="rgb("+j(parseInt(""+u[1],10),parseInt(""+u[2],10)/100,parseInt(""+u[3],10)/100)+")",d=z.exec(h);if(!d)throw new S(4,n,h);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+u[4])>1?parseFloat(""+u[4])/100:parseFloat(""+u[4])}}throw new S(5)}var U=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function G(e){var n=e.toString(16);return 1===n.length?"0"+n:n}function q(e){return G(Math.round(255*e))}function K(e,n,r){if("number"==typeof e&&"number"==typeof n&&"number"==typeof r)return U("#"+G(e)+G(n)+G(r));if("object"==typeof e&&void 0===n&&void 0===r)return U("#"+G(e.red)+G(e.green)+G(e.blue));throw new S(6)}var Z=function e(n,r,i){return function(){var o=i.concat(Array.prototype.slice.call(arguments));return o.length>=r?n.apply(this,o):e(n,r,o)}}(i=function(e,n){if("transparent"===n)return n;var r=V(n),i="number"==typeof r.alpha?r.alpha:1;return function(e,n,r,i){if("string"==typeof e&&"number"==typeof n){var o=V(e);return"rgba("+o.red+","+o.green+","+o.blue+","+n+")"}if("number"==typeof e&&"number"==typeof n&&"number"==typeof r&&"number"==typeof i)return i>=1?K(e,n,r):"rgba("+e+","+n+","+r+","+i+")";if("object"==typeof e&&void 0===n&&void 0===r&&void 0===i)return e.alpha>=1?K(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new S(7)}((0,E.Z)({},r,{alpha:Math.max(0,Math.min(1,(100*i+100*parseFloat(e))/100))}))},i.length,[]);function $(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function W(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?$(Object(r),!0).forEach(function(n){X(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:String(i))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||J(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||J(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,n){if(e){if("string"==typeof e)return ee(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,n)}}function ee(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}!function(e,n){void 0===n&&(n={});var r=n.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".graph-nav-info {\n  position: absolute;\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n  font-family: Sans-serif;\n  z-index: 1000;\n}"),THREE&&THREE.MathUtils&&THREE.MathUtils.degToRad&&(THREE.Math={degToRad:THREE.MathUtils.degToRad});var et=(0,w.Z)({props:{width:{default:window.innerWidth,triggerUpdate:!1,onChange:function(e,n){n.container&&(n.container.style.width="".concat(e,"px"))}},height:{default:window.innerHeight,triggerUpdate:!1,onChange:function(e,n){n.container&&(n.container.style.height="".concat(e,"px"))}},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},backgroundColor:{default:"#002"},showNavInfo:{default:!0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeLabel:{default:"name"},nodeDesc:{default:"desc"},onNodeHover:{},onNodeClick:{},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkLabel:{default:"name"},linkDesc:{default:"desc"},onLinkHover:{},onLinkClick:{},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:W(W({},Object.assign.apply(Object,[{}].concat(Q(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map(function(e){return X({},e,function(n){for(var r=n.forcegraph.components.forcegraph,i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=r[e].apply(r,o);return s===r?this:s})}))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(e,n){e.innerHTML="",n.container=document.createElement("div"),e.appendChild(n.container),n.container.style.position="relative",n.container.style.width="".concat(n.width,"px"),n.container.style.height="".concat(n.height,"px"),n.container.appendChild(n.navInfo=document.createElement("div")),n.navInfo.className="graph-nav-info",n.navInfo.textContent="Mouse drag: look, gamepad/arrow/wasd keys: move";var r,i,o,a,s,l=document.createElement("a-scene");l.setAttribute("embedded",""),l.appendChild(n.sky=document.createElement("a-sky")),n.sky.setAttribute("radius",3e3),l.appendChild(r=document.createElement("a-entity")),r.setAttribute("position","0 0 300"),r.setAttribute("movement-controls","controls: gamepad; fly: true; speed: 7"),r.appendChild(i=document.createElement("a-entity")),i.setAttribute("camera",""),i.setAttribute("position","0 0 0"),i.setAttribute("look-controls","pointerLockEnabled: false"),i.setAttribute("wasd-controls","fly: true; acceleration: 700"),i.appendChild(o=document.createElement("a-text")),o.setAttribute("position","0 -0.3 -1"),o.setAttribute("width",2),o.setAttribute("align","center"),o.setAttribute("color","lavender"),o.setAttribute("value",""),i.appendChild(a=document.createElement("a-text")),a.setAttribute("position","0 -0.4 -1"),a.setAttribute("width",1.3),a.setAttribute("align","center"),a.setAttribute("color","lavender"),a.setAttribute("value",""),n.raycasterEls=[],l.appendChild(s=document.createElement("a-entity")),s.setAttribute("cursor","rayOrigin: mouse; mouseCursorStylesEnabled: true"),s.setAttribute("raycaster","objects: [forcegraph]; interval: 100"),n.raycasterEls.push(s),["left","right"].forEach(function(e){var i;r.appendChild(i=document.createElement("a-entity")),i.setAttribute("laser-controls","hand: ".concat(e,"; model: false;")),i.setAttribute("raycaster","objects: [forcegraph]; interval: 100; lineColor: steelblue; lineOpacity: 0.85"),n.raycasterEls.push(i)}),l.appendChild(n.forcegraph=document.createElement("a-entity")),n.forcegraph.setAttribute("forcegraph",null),n.container.appendChild(l),n.forcegraph.setAttribute("forcegraph",Object.assign.apply(Object,Q(["node","link"].map(function(e){var r={node:"Node",link:"Link"}[e];return X({},"on".concat(r,"Hover"),function(i,s){var l=i&&(0,x.default)(n["".concat(e,"Label")])(i)||"",c=i&&(0,x.default)(n["".concat(e,"Desc")])(i)||"";o.setAttribute("value",l),a.setAttribute("value",c),n["on".concat(r,"Hover")]&&n["on".concat(r,"Hover")](i,s)})}))))},update:function(e,n){if(n.hasOwnProperty("backgroundColor")){var r=V(e.backgroundColor).alpha;void 0===r&&(r=1),e.sky.setAttribute("color",Z(1,e.backgroundColor)),e.sky.setAttribute("opacity",r)}n.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none");var i=["onNodeHover","onLinkHover","onNodeClick","onLinkClick"].some(function(n){return e[n]})||["nodeLabel","linkLabel"].some(function(n){return"name"!==e[n]})||["nodeDesc","linkDesc"].some(function(n){return"desc"!==e[n]});e.raycasterEls.forEach(function(e){return e.setAttribute("raycaster",i?"objects: [forcegraph]; interval: 100":"objects: __none__")});var o=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","onNodeClick","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","onLinkClick","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],a=Object.assign.apply(Object,[{}].concat(Q(Object.entries(e).filter(function(e){var r=Y(e,2),i=r[0],a=r[1];return n.hasOwnProperty(i)&&-1!==o.indexOf(i)&&null!=a}).map(function(e){var n=Y(e,2);return X({},n[0],n[1])})),Q(Object.entries(e.graphData).map(function(e){var n=Y(e,2);return X({},n[0],n[1])}))));e.forcegraph.setAttribute("forcegraph",a)}}),en=r(5697);function er(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function ei(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?er(Object(r),!0).forEach(function(n){eo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eo(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:String(i))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ea(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||el(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e){return function(e){if(Array.isArray(e))return ec(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||el(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function el(e,n){if(e){if("string"==typeof e)return ec(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ec(e,n)}}function ec(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}var eu=(0,w.Z)({props:{width:{},height:{},yOffset:{default:1.5},glScale:{default:200},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},onNodeHover:{},onNodeClick:{},onLinkHover:{},onLinkClick:{},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:ei(ei({},Object.assign.apply(Object,[{}].concat(es(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map(function(e){return eo({},e,function(n){for(var r=n.forcegraph.components.forcegraph,i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=r[e].apply(r,o);return s===r?this:s})}))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.markerAttrs;e.innerHTML="",n.container=document.createElement("div"),e.appendChild(n.container);var a=document.createElement("a-scene");a.setAttribute("embedded",""),a.setAttribute("arjs","debugUIEnabled: false;");var s=document.createElement("a-marker");Object.entries(void 0===o?{preset:"hiro"}:o).forEach(function(e){var n=ea(e,2),r=n[0],i=n[1];return s.setAttribute(r,i)}),a.appendChild(s),a.appendChild(r=document.createElement("a-entity")),r.setAttribute("cursor"),r.setAttribute("raycaster","objects: [forcegraph]"),n.forcegraph=document.createElement("a-entity"),n.forcegraph.setAttribute("forcegraph",null),s.appendChild(n.forcegraph);var l=document.createElement("a-entity");l.setAttribute("camera",""),a.appendChild(l),n.container.appendChild(a)},update:function(e,n){n.hasOwnProperty("width")&&e.width&&(e.container.style.width="".concat(e.width,"px")),n.hasOwnProperty("height")&&e.height&&(e.container.style.height="".concat(e.height,"px")),n.hasOwnProperty("glScale")&&e.forcegraph.setAttribute("scale",es([,,,]).map(function(){return 1/e.glScale}).join(" ")),n.hasOwnProperty("yOffset")&&e.forcegraph.setAttribute("position","0 ".concat(e.yOffset," 0"));var r=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","onNodeHover","onNodeClick","onLinkHover","onLinkClick","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],i=Object.assign.apply(Object,[{}].concat(es(Object.entries(e).filter(function(e){var i=ea(e,2),o=i[0],a=i[1];return n.hasOwnProperty(o)&&-1!==r.indexOf(o)&&null!=a}).map(function(e){var n=ea(e,2);return eo({},n[0],n[1])})),es(Object.entries(e.graphData).map(function(e){var n=ea(e,2);return eo({},n[0],n[1])}))));e.forcegraph.setAttribute("forcegraph",i)}}),eh=r(9477);let ed=new eh.Plane,ef=new eh.Raycaster,ep=new eh.Vector2,eg=new eh.Vector3,em=new eh.Vector3,ev=new eh.Vector3,ey=new eh.Matrix4;class eb extends eh.EventDispatcher{constructor(e,n,r){super(),r.style.touchAction="none";let i=null,o=null,a=[],s=this;function l(){r.addEventListener("pointermove",u),r.addEventListener("pointerdown",h),r.addEventListener("pointerup",d),r.addEventListener("pointerleave",d)}function c(){r.removeEventListener("pointermove",u),r.removeEventListener("pointerdown",h),r.removeEventListener("pointerup",d),r.removeEventListener("pointerleave",d),r.style.cursor=""}function u(l){if(!1!==s.enabled){if(f(l),ef.setFromCamera(ep,n),i){ef.ray.intersectPlane(ed,em)&&i.position.copy(em.sub(eg).applyMatrix4(ey)),s.dispatchEvent({type:"drag",object:i});return}if("mouse"===l.pointerType||"pen"===l.pointerType){if(a.length=0,ef.setFromCamera(ep,n),ef.intersectObjects(e,!0,a),a.length>0){let e=a[0].object;ed.setFromNormalAndCoplanarPoint(n.getWorldDirection(ed.normal),ev.setFromMatrixPosition(e.matrixWorld)),o!==e&&null!==o&&(s.dispatchEvent({type:"hoveroff",object:o}),r.style.cursor="auto",o=null),o!==e&&(s.dispatchEvent({type:"hoveron",object:e}),r.style.cursor="pointer",o=e)}else null!==o&&(s.dispatchEvent({type:"hoveroff",object:o}),r.style.cursor="auto",o=null)}}}function h(o){!1!==s.enabled&&(f(o),a.length=0,ef.setFromCamera(ep,n),ef.intersectObjects(e,!0,a),a.length>0&&(i=!0===s.transformGroup?e[0]:a[0].object,ed.setFromNormalAndCoplanarPoint(n.getWorldDirection(ed.normal),ev.setFromMatrixPosition(i.matrixWorld)),ef.ray.intersectPlane(ed,em)&&(ey.copy(i.parent.matrixWorld).invert(),eg.copy(em).sub(ev.setFromMatrixPosition(i.matrixWorld))),r.style.cursor="move",s.dispatchEvent({type:"dragstart",object:i})))}function d(){!1!==s.enabled&&(i&&(s.dispatchEvent({type:"dragend",object:i}),i=null),r.style.cursor=o?"pointer":"auto")}function f(e){let n=r.getBoundingClientRect();ep.x=(e.clientX-n.left)/n.width*2-1,ep.y=-(e.clientY-n.top)/n.height*2+1}l(),this.enabled=!0,this.transformGroup=!1,this.activate=l,this.deactivate=c,this.dispose=function(){c()},this.getObjects=function(){return e},this.getRaycaster=function(){return ef}}}var ew=r(2752);let ex={type:"change"},eE={type:"start"},e_={type:"end"};class ek extends eh.EventDispatcher{constructor(e,n){super();let r=this,i={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:eh.MOUSE.ROTATE,MIDDLE:eh.MOUSE.DOLLY,RIGHT:eh.MOUSE.PAN},this.target=new eh.Vector3;let o=new eh.Vector3,a=1,s=i.NONE,l=i.NONE,c=0,u=0,h=0,d=new eh.Vector3,f=new eh.Vector2,p=new eh.Vector2,g=new eh.Vector3,m=new eh.Vector2,v=new eh.Vector2,y=new eh.Vector2,b=new eh.Vector2,w=[],x={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){let e=r.domElement.getBoundingClientRect(),n=r.domElement.ownerDocument.documentElement;r.screen.left=e.left+window.pageXOffset-n.clientLeft,r.screen.top=e.top+window.pageYOffset-n.clientTop,r.screen.width=e.width,r.screen.height=e.height};let E=function(){let e=new eh.Vector2;return function(n,i){return e.set((n-r.screen.left)/r.screen.width,(i-r.screen.top)/r.screen.height),e}}(),_=function(){let e=new eh.Vector2;return function(n,i){return e.set((n-.5*r.screen.width-r.screen.left)/(.5*r.screen.width),(r.screen.height+2*(r.screen.top-i))/r.screen.width),e}}();function k(e){!1!==r.enabled&&(0===w.length&&(r.domElement.setPointerCapture(e.pointerId),r.domElement.addEventListener("pointermove",T),r.domElement.addEventListener("pointerup",O)),w.push(e),"touch"===e.pointerType?function(e){if(P(e),1===w.length)s=i.TOUCH_ROTATE,p.copy(_(w[0].pageX,w[0].pageY)),f.copy(p);else{s=i.TOUCH_ZOOM_PAN;let e=w[0].pageX-w[1].pageX,n=w[0].pageY-w[1].pageY;u=c=Math.sqrt(e*e+n*n);let r=(w[0].pageX+w[1].pageX)/2,o=(w[0].pageY+w[1].pageY)/2;y.copy(E(r,o)),b.copy(y)}r.dispatchEvent(eE)}(e):function(e){if(s===i.NONE)switch(e.button){case r.mouseButtons.LEFT:s=i.ROTATE;break;case r.mouseButtons.MIDDLE:s=i.ZOOM;break;case r.mouseButtons.RIGHT:s=i.PAN}let n=l!==i.NONE?l:s;n!==i.ROTATE||r.noRotate?n!==i.ZOOM||r.noZoom?n!==i.PAN||r.noPan||(y.copy(E(e.pageX,e.pageY)),b.copy(y)):(m.copy(E(e.pageX,e.pageY)),v.copy(m)):(p.copy(_(e.pageX,e.pageY)),f.copy(p)),r.dispatchEvent(eE)}(e))}function T(e){!1!==r.enabled&&("touch"===e.pointerType?function(e){if(P(e),1===w.length)f.copy(p),p.copy(_(e.pageX,e.pageY));else{let n=function(e){let n=e.pointerId===w[0].pointerId?w[1]:w[0];return x[n.pointerId]}(e),r=e.pageX-n.x,i=e.pageY-n.y;u=Math.sqrt(r*r+i*i);let o=(e.pageX+n.x)/2,a=(e.pageY+n.y)/2;b.copy(E(o,a))}}(e):function(e){let n=l!==i.NONE?l:s;n!==i.ROTATE||r.noRotate?n!==i.ZOOM||r.noZoom?n!==i.PAN||r.noPan||b.copy(E(e.pageX,e.pageY)):v.copy(E(e.pageX,e.pageY)):(f.copy(p),p.copy(_(e.pageX,e.pageY)))}(e))}function O(e){!1!==r.enabled&&("touch"===e.pointerType?function(e){switch(w.length){case 0:s=i.NONE;break;case 1:s=i.TOUCH_ROTATE,p.copy(_(e.pageX,e.pageY)),f.copy(p);break;case 2:s=i.TOUCH_ZOOM_PAN;for(let n=0;n<w.length;n++)if(w[n].pointerId!==e.pointerId){let e=x[w[n].pointerId];p.copy(_(e.x,e.y)),f.copy(p);break}}r.dispatchEvent(e_)}(e):(s=i.NONE,r.dispatchEvent(e_)),j(e),0===w.length&&(r.domElement.releasePointerCapture(e.pointerId),r.domElement.removeEventListener("pointermove",T),r.domElement.removeEventListener("pointerup",O)))}function C(e){j(e)}function A(e){!1!==r.enabled&&(window.removeEventListener("keydown",A),l===i.NONE&&(e.code!==r.keys[i.ROTATE]||r.noRotate?e.code!==r.keys[i.ZOOM]||r.noZoom?e.code!==r.keys[i.PAN]||r.noPan||(l=i.PAN):l=i.ZOOM:l=i.ROTATE))}function S(){!1!==r.enabled&&(l=i.NONE,window.addEventListener("keydown",A))}function M(e){if(!1!==r.enabled&&!0!==r.noZoom){switch(e.preventDefault(),e.deltaMode){case 2:m.y-=.025*e.deltaY;break;case 1:m.y-=.01*e.deltaY;break;default:m.y-=25e-5*e.deltaY}r.dispatchEvent(eE),r.dispatchEvent(e_)}}function R(e){!1!==r.enabled&&e.preventDefault()}function j(e){delete x[e.pointerId];for(let n=0;n<w.length;n++)if(w[n].pointerId==e.pointerId){w.splice(n,1);return}}function P(e){let n=x[e.pointerId];void 0===n&&(n=new eh.Vector2,x[e.pointerId]=n),n.set(e.pageX,e.pageY)}this.rotateCamera=function(){let e=new eh.Vector3,n=new eh.Quaternion,i=new eh.Vector3,o=new eh.Vector3,a=new eh.Vector3,s=new eh.Vector3;return function(){s.set(p.x-f.x,p.y-f.y,0);let l=s.length();l?(d.copy(r.object.position).sub(r.target),i.copy(d).normalize(),o.copy(r.object.up).normalize(),a.crossVectors(o,i).normalize(),o.setLength(p.y-f.y),a.setLength(p.x-f.x),s.copy(o.add(a)),e.crossVectors(s,d).normalize(),l*=r.rotateSpeed,n.setFromAxisAngle(e,l),d.applyQuaternion(n),r.object.up.applyQuaternion(n),g.copy(e),h=l):!r.staticMoving&&h&&(h*=Math.sqrt(1-r.dynamicDampingFactor),d.copy(r.object.position).sub(r.target),n.setFromAxisAngle(g,h),d.applyQuaternion(n),r.object.up.applyQuaternion(n)),f.copy(p)}}(),this.zoomCamera=function(){let e;s===i.TOUCH_ZOOM_PAN?(e=c/u,c=u,r.object.isPerspectiveCamera?d.multiplyScalar(e):r.object.isOrthographicCamera?(r.object.zoom=eh.MathUtils.clamp(r.object.zoom/e,r.minZoom,r.maxZoom),a!==r.object.zoom&&r.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!=(e=1+(v.y-m.y)*r.zoomSpeed)&&e>0&&(r.object.isPerspectiveCamera?d.multiplyScalar(e):r.object.isOrthographicCamera?(r.object.zoom=eh.MathUtils.clamp(r.object.zoom/e,r.minZoom,r.maxZoom),a!==r.object.zoom&&r.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),r.staticMoving?m.copy(v):m.y+=(v.y-m.y)*this.dynamicDampingFactor)},this.panCamera=function(){let e=new eh.Vector2,n=new eh.Vector3,i=new eh.Vector3;return function(){if(e.copy(b).sub(y),e.lengthSq()){if(r.object.isOrthographicCamera){let n=(r.object.right-r.object.left)/r.object.zoom/r.domElement.clientWidth,i=(r.object.top-r.object.bottom)/r.object.zoom/r.domElement.clientWidth;e.x*=n,e.y*=i}e.multiplyScalar(d.length()*r.panSpeed),i.copy(d).cross(r.object.up).setLength(e.x),i.add(n.copy(r.object.up).setLength(e.y)),r.object.position.add(i),r.target.add(i),r.staticMoving?y.copy(b):y.add(e.subVectors(b,y).multiplyScalar(r.dynamicDampingFactor))}}}(),this.checkDistances=function(){r.noZoom&&r.noPan||(d.lengthSq()>r.maxDistance*r.maxDistance&&(r.object.position.addVectors(r.target,d.setLength(r.maxDistance)),m.copy(v)),d.lengthSq()<r.minDistance*r.minDistance&&(r.object.position.addVectors(r.target,d.setLength(r.minDistance)),m.copy(v)))},this.update=function(){d.subVectors(r.object.position,r.target),r.noRotate||r.rotateCamera(),r.noZoom||r.zoomCamera(),r.noPan||r.panCamera(),r.object.position.addVectors(r.target,d),r.object.isPerspectiveCamera?(r.checkDistances(),r.object.lookAt(r.target),o.distanceToSquared(r.object.position)>1e-6&&(r.dispatchEvent(ex),o.copy(r.object.position))):r.object.isOrthographicCamera?(r.object.lookAt(r.target),(o.distanceToSquared(r.object.position)>1e-6||a!==r.object.zoom)&&(r.dispatchEvent(ex),o.copy(r.object.position),a=r.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){s=i.NONE,l=i.NONE,r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.up.copy(r.up0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),d.subVectors(r.object.position,r.target),r.object.lookAt(r.target),r.dispatchEvent(ex),o.copy(r.object.position),a=r.object.zoom},this.dispose=function(){r.domElement.removeEventListener("contextmenu",R),r.domElement.removeEventListener("pointerdown",k),r.domElement.removeEventListener("pointercancel",C),r.domElement.removeEventListener("wheel",M),r.domElement.removeEventListener("pointermove",T),r.domElement.removeEventListener("pointerup",O),window.removeEventListener("keydown",A),window.removeEventListener("keyup",S)},this.domElement.addEventListener("contextmenu",R),this.domElement.addEventListener("pointerdown",k),this.domElement.addEventListener("pointercancel",C),this.domElement.addEventListener("wheel",M,{passive:!1}),window.addEventListener("keydown",A),window.addEventListener("keyup",S),this.handleResize(),this.update()}}let eT={type:"change"},eO={type:"start"},eC={type:"end"};class eA extends eh.EventDispatcher{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new eh.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:eh.MOUSE.ROTATE,MIDDLE:eh.MOUSE.DOLLY,RIGHT:eh.MOUSE.PAN},this.touches={ONE:eh.TOUCH.ROTATE,TWO:eh.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",U),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",U),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(eT),r.update(),o=i.NONE},this.update=function(){let n=new eh.Vector3,d=new eh.Quaternion().setFromUnitVectors(e.up,new eh.Vector3(0,1,0)),f=d.clone().invert(),p=new eh.Vector3,g=new eh.Quaternion,m=new eh.Vector3,v=2*Math.PI;return function(){let e=r.object.position;n.copy(e).sub(r.target),n.applyQuaternion(d),s.setFromVector3(n),r.autoRotate&&o===i.NONE&&k(2*Math.PI/60/60*r.autoRotateSpeed),r.enableDamping?(s.theta+=l.theta*r.dampingFactor,s.phi+=l.phi*r.dampingFactor):(s.theta+=l.theta,s.phi+=l.phi);let y=r.minAzimuthAngle,b=r.maxAzimuthAngle;return isFinite(y)&&isFinite(b)&&(y<-Math.PI?y+=v:y>Math.PI&&(y-=v),b<-Math.PI?b+=v:b>Math.PI&&(b-=v),y<=b?s.theta=Math.max(y,Math.min(b,s.theta)):s.theta=s.theta>(y+b)/2?Math.max(y,s.theta):Math.min(b,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=c,s.radius=Math.max(r.minDistance,Math.min(r.maxDistance,s.radius)),!0===r.enableDamping?r.target.addScaledVector(u,r.dampingFactor):r.target.add(u),n.setFromSpherical(s),n.applyQuaternion(f),e.copy(r.target).add(n),r.object.lookAt(r.target),!0===r.enableDamping?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,u.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,!!(h||p.distanceToSquared(r.object.position)>a||8*(1-g.dot(r.object.quaternion))>a||m.distanceToSquared(r.target)>0)&&(r.dispatchEvent(eT),p.copy(r.object.position),g.copy(r.object.quaternion),m.copy(r.target),h=!1,!0)}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",G),r.domElement.removeEventListener("pointerdown",H),r.domElement.removeEventListener("pointercancel",B),r.domElement.removeEventListener("wheel",V),r.domElement.removeEventListener("pointermove",F),r.domElement.removeEventListener("pointerup",B),null!==r._domElementKeyEvents&&(r._domElementKeyEvents.removeEventListener("keydown",U),r._domElementKeyEvents=null)};let r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},o=i.NONE,a=1e-6,s=new eh.Spherical,l=new eh.Spherical,c=1,u=new eh.Vector3,h=!1,d=new eh.Vector2,f=new eh.Vector2,p=new eh.Vector2,g=new eh.Vector2,m=new eh.Vector2,v=new eh.Vector2,y=new eh.Vector2,b=new eh.Vector2,w=new eh.Vector2,x=[],E={};function _(){return Math.pow(.95,r.zoomSpeed)}function k(e){l.theta-=e}function T(e){l.phi-=e}let O=function(){let e=new eh.Vector3;return function(n,r){e.setFromMatrixColumn(r,0),e.multiplyScalar(-n),u.add(e)}}(),C=function(){let e=new eh.Vector3;return function(n,i){!0===r.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(r.object.up,e)),e.multiplyScalar(n),u.add(e)}}(),A=function(){let e=new eh.Vector3;return function(n,i){let o=r.domElement;if(r.object.isPerspectiveCamera){let a=r.object.position;e.copy(a).sub(r.target);let s=e.length();O(2*n*(s*=Math.tan(r.object.fov/2*Math.PI/180))/o.clientHeight,r.object.matrix),C(2*i*s/o.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(O(n*(r.object.right-r.object.left)/r.object.zoom/o.clientWidth,r.object.matrix),C(i*(r.object.top-r.object.bottom)/r.object.zoom/o.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function S(e){r.object.isPerspectiveCamera?c/=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*e)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function M(e){r.object.isPerspectiveCamera?c*=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/e)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function R(e){d.set(e.clientX,e.clientY)}function j(e){g.set(e.clientX,e.clientY)}function P(){if(1===x.length)d.set(x[0].pageX,x[0].pageY);else{let e=.5*(x[0].pageX+x[1].pageX),n=.5*(x[0].pageY+x[1].pageY);d.set(e,n)}}function N(){if(1===x.length)g.set(x[0].pageX,x[0].pageY);else{let e=.5*(x[0].pageX+x[1].pageX),n=.5*(x[0].pageY+x[1].pageY);g.set(e,n)}}function D(){let e=x[0].pageX-x[1].pageX,n=x[0].pageY-x[1].pageY;y.set(0,Math.sqrt(e*e+n*n))}function L(e){if(1==x.length)f.set(e.pageX,e.pageY);else{let n=K(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);f.set(r,i)}p.subVectors(f,d).multiplyScalar(r.rotateSpeed);let n=r.domElement;k(2*Math.PI*p.x/n.clientHeight),T(2*Math.PI*p.y/n.clientHeight),d.copy(f)}function I(e){if(1===x.length)m.set(e.pageX,e.pageY);else{let n=K(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);m.set(r,i)}v.subVectors(m,g).multiplyScalar(r.panSpeed),A(v.x,v.y),g.copy(m)}function z(e){let n=K(e),i=e.pageX-n.x,o=e.pageY-n.y;b.set(0,Math.sqrt(i*i+o*o)),w.set(0,Math.pow(b.y/y.y,r.zoomSpeed)),S(w.y),y.copy(b)}function H(e){!1!==r.enabled&&(0===x.length&&(r.domElement.setPointerCapture(e.pointerId),r.domElement.addEventListener("pointermove",F),r.domElement.addEventListener("pointerup",B)),x.push(e),"touch"===e.pointerType?function(e){switch(q(e),x.length){case 1:switch(r.touches.ONE){case eh.TOUCH.ROTATE:if(!1===r.enableRotate)return;P(),o=i.TOUCH_ROTATE;break;case eh.TOUCH.PAN:if(!1===r.enablePan)return;N(),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case eh.TOUCH.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&D(),r.enablePan&&N(),o=i.TOUCH_DOLLY_PAN;break;case eh.TOUCH.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&D(),r.enableRotate&&P(),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(eO)}(e):function(e){let n;switch(e.button){case 0:n=r.mouseButtons.LEFT;break;case 1:n=r.mouseButtons.MIDDLE;break;case 2:n=r.mouseButtons.RIGHT;break;default:n=-1}switch(n){case eh.MOUSE.DOLLY:if(!1===r.enableZoom)return;y.set(e.clientX,e.clientY),o=i.DOLLY;break;case eh.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enablePan)return;j(e),o=i.PAN}else{if(!1===r.enableRotate)return;R(e),o=i.ROTATE}break;case eh.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enableRotate)return;R(e),o=i.ROTATE}else{if(!1===r.enablePan)return;j(e),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(eO)}(e))}function F(e){!1!==r.enabled&&("touch"===e.pointerType?function(e){switch(q(e),o){case i.TOUCH_ROTATE:if(!1===r.enableRotate)return;L(e),r.update();break;case i.TOUCH_PAN:if(!1===r.enablePan)return;I(e),r.update();break;case i.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&z(e),r.enablePan&&I(e),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&z(e),r.enableRotate&&L(e),r.update();break;default:o=i.NONE}}(e):function(e){switch(o){case i.ROTATE:if(!1===r.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),p.subVectors(f,d).multiplyScalar(r.rotateSpeed);let n=r.domElement;k(2*Math.PI*p.x/n.clientHeight),T(2*Math.PI*p.y/n.clientHeight),d.copy(f),r.update()}(e);break;case i.DOLLY:if(!1===r.enableZoom)return;b.set(e.clientX,e.clientY),w.subVectors(b,y),w.y>0?S(_()):w.y<0&&M(_()),y.copy(b),r.update();break;case i.PAN:if(!1===r.enablePan)return;m.set(e.clientX,e.clientY),v.subVectors(m,g).multiplyScalar(r.panSpeed),A(v.x,v.y),g.copy(m),r.update()}}(e))}function B(e){(function(e){delete E[e.pointerId];for(let n=0;n<x.length;n++)if(x[n].pointerId==e.pointerId){x.splice(n,1);return}})(e),0===x.length&&(r.domElement.releasePointerCapture(e.pointerId),r.domElement.removeEventListener("pointermove",F),r.domElement.removeEventListener("pointerup",B)),r.dispatchEvent(eC),o=i.NONE}function V(e){!1!==r.enabled&&!1!==r.enableZoom&&o===i.NONE&&(e.preventDefault(),r.dispatchEvent(eO),e.deltaY<0?M(_()):e.deltaY>0&&S(_()),r.update(),r.dispatchEvent(eC))}function U(e){!1!==r.enabled&&!1!==r.enablePan&&function(e){let n=!1;switch(e.code){case r.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?T(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):A(0,r.keyPanSpeed),n=!0;break;case r.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?T(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):A(0,-r.keyPanSpeed),n=!0;break;case r.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?k(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):A(r.keyPanSpeed,0),n=!0;break;case r.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?k(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):A(-r.keyPanSpeed,0),n=!0}n&&(e.preventDefault(),r.update())}(e)}function G(e){!1!==r.enabled&&e.preventDefault()}function q(e){let n=E[e.pointerId];void 0===n&&(n=new eh.Vector2,E[e.pointerId]=n),n.set(e.pageX,e.pageY)}function K(e){let n=e.pointerId===x[0].pointerId?x[1]:x[0];return E[n.pointerId]}r.domElement.addEventListener("contextmenu",G),r.domElement.addEventListener("pointerdown",H),r.domElement.addEventListener("pointercancel",B),r.domElement.addEventListener("wheel",V,{passive:!1}),this.update()}}let eS={type:"change"};class eM extends eh.EventDispatcher{constructor(e,n){super(),this.object=e,this.domElement=n,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;let r=this,i=new eh.Quaternion,o=new eh.Vector3;this.tmpQuaternion=new eh.Quaternion,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new eh.Vector3(0,0,0),this.rotationVector=new eh.Vector3(0,0,0),this.keydown=function(e){if(!e.altKey){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(e){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.pointerdown=function(e){if(this.dragToLook)this.status++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.pointermove=function(e){if(!this.dragToLook||this.status>0){let n=this.getContainerDimensions(),r=n.size[0]/2,i=n.size[1]/2;this.moveState.yawLeft=-(e.pageX-n.offset[0]-r)/r,this.moveState.pitchDown=(e.pageY-n.offset[1]-i)/i,this.updateRotationVector()}},this.pointerup=function(e){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(e){let n=e*r.movementSpeed,a=e*r.rollSpeed;r.object.translateX(r.moveVector.x*n),r.object.translateY(r.moveVector.y*n),r.object.translateZ(r.moveVector.z*n),r.tmpQuaternion.set(r.rotationVector.x*a,r.rotationVector.y*a,r.rotationVector.z*a,1).normalize(),r.object.quaternion.multiply(r.tmpQuaternion),(o.distanceToSquared(r.object.position)>1e-6||8*(1-i.dot(r.object.quaternion))>1e-6)&&(r.dispatchEvent(eS),i.copy(r.object.quaternion),o.copy(r.object.position))},this.updateMovementVector=function(){let e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",eR),this.domElement.removeEventListener("pointerdown",s),this.domElement.removeEventListener("pointermove",a),this.domElement.removeEventListener("pointerup",l),window.removeEventListener("keydown",c),window.removeEventListener("keyup",u)};let a=this.pointermove.bind(this),s=this.pointerdown.bind(this),l=this.pointerup.bind(this),c=this.keydown.bind(this),u=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",eR),this.domElement.addEventListener("pointerdown",s),this.domElement.addEventListener("pointermove",a),this.domElement.addEventListener("pointerup",l),window.addEventListener("keydown",c),window.addEventListener("keyup",u),this.updateMovementVector(),this.updateRotationVector()}}function eR(e){e.preventDefault()}let ej={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class eP{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}let eN=new eh.OrthographicCamera(-1,1,1,-1,0,1),eD=new eh.BufferGeometry;eD.setAttribute("position",new eh.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),eD.setAttribute("uv",new eh.Float32BufferAttribute([0,2,0,0,2,0],2));class eL{constructor(e){this._mesh=new eh.Mesh(eD,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,eN)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class eI extends eP{constructor(e,n){super(),this.textureID=void 0!==n?n:"tDiffuse",e instanceof eh.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=eh.UniformsUtils.clone(e.uniforms),this.material=new eh.ShaderMaterial({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new eL(this.material)}render(e,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class ez extends eP{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,r){let i,o;let a=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(i=0,o=1):(i=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.buffers.stencil.setFunc(a.ALWAYS,i,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(a.EQUAL,1,4294967295),s.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.buffers.stencil.setLocked(!0)}}class eH extends eP{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class eF{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===n){let r=e.getSize(new eh.Vector2);this._width=r.width,this._height=r.height,(n=new eh.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:eh.HalfFloatType})).texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new eI(ej),this.clock=new eh.Clock}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let n=this.passes.indexOf(e);-1!==n&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());let n=this.renderer.getRenderTarget(),r=!1;for(let n=0,i=this.passes.length;n<i;n++){let i=this.passes[n];if(!1!==i.enabled){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),i.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),i.needsSwap){if(r){let n=this.renderer.getContext(),r=this.renderer.state.buffers.stencil;r.setFunc(n.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),r.setFunc(n.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==ez&&(i instanceof ez?r=!0:i instanceof eH&&(r=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(void 0===e){let n=this.renderer.getSize(new eh.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;let r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class eB extends eP{constructor(e,n,r,i,o){super(),this.scene=e,this.camera=n,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new eh.Color}render(e,n,r){let i,o;let a=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=a}}var eV=r(4155),eU=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return this.None(e)},Out:function(e){return this.None(e)},InOut:function(e){return this.None(e)}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1}}),Back:Object.freeze({In:function(e){return 1===e?1:e*e*(2.70158*e-1.70158)},Out:function(e){return 0===e?0:--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return(e*=2)<1?.5*(e*e*(3.5949095*e-2.5949095)):.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}}),Bounce:Object.freeze({In:function(e){return 1-eU.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*eU.Bounce.In(2*e):.5*eU.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=(e=e<Number.EPSILON?Number.EPSILON:e)>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(2*n,e)/2:(1-Math.pow(2-2*n,e))/2+.5}}}}),eG="undefined"==typeof self&&void 0!==eV&&eV.hrtime?function(){var e=eV.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return new Date().getTime()},eq=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,n){void 0===e&&(e=eG()),void 0===n&&(n=!1);var r=Object.keys(this._tweens);if(0===r.length)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]],a=!n;o&&!1===o.update(e,a)&&!n&&delete this._tweens[r[i]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),eK={Linear:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),a=eK.Utils.Linear;return n<0?a(e[0],e[1],i):n>1?a(e[r],e[r-1],r-i):a(e[o],e[o+1>r?r:o+1],i-o)},Bezier:function(e,n){for(var r=0,i=e.length-1,o=Math.pow,a=eK.Utils.Bernstein,s=0;s<=i;s++)r+=o(1-n,i-s)*o(n,s)*e[s]*a(i,s);return r},CatmullRom:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),a=eK.Utils.CatmullRom;return e[0]===e[r]?(n<0&&(o=Math.floor(i=r*(1+n))),a(e[(o-1+r)%r],e[o],e[(o+1)%r],e[(o+2)%r],i-o)):n<0?e[0]-(a(e[0],e[0],e[1],e[1],-i)-e[0]):n>1?e[r]-(a(e[r],e[r],e[r-1],e[r-1],i-r)-e[r]):a(e[o?o-1:0],e[o],e[r<o+1?r:o+1],e[r<o+2?r:o+2],i-o)},Utils:{Linear:function(e,n,r){return(n-e)*r+e},Bernstein:function(e,n){var r=eK.Utils.Factorial;return r(e)/r(n)/r(e-n)},Factorial:(o=[1],function(e){var n=1;if(o[e])return o[e];for(var r=e;r>1;r--)n*=r;return o[e]=n,n}),CatmullRom:function(e,n,r,i,o){var a=(r-e)*.5,s=(i-n)*.5,l=o*o;return(2*n-2*r+a+s)*(o*l)+(-3*n+3*r-2*a-s)*l+a*o+n}}},eZ=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),e$=new eq,eW=function(){function e(e,n){void 0===n&&(n=e$),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=eU.Linear.None,this._interpolationFunction=eK.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=eZ.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,n){return this._valuesEnd=Object.create(e),void 0!==n&&(this._duration=n),this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e,this},e.prototype.start=function(e,n){if(void 0===e&&(e=eG()),void 0===n&&(n=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var r in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n),this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,n,r,i,o){for(var a in r){var s=e[a],l=Array.isArray(s),c=l?"array":typeof s,u=!l&&Array.isArray(r[a]);if("undefined"!==c&&"function"!==c){if(u){var h=r[a];if(0===h.length)continue;h=h.map(this._handleRelativeValue.bind(this,s)),void 0===n[a]&&(r[a]=[s].concat(h))}if(("object"===c||l)&&s&&!u){for(var d in n[a]=l?[]:{},s)n[a][d]=s[d];i[a]=l?[]:{},this._setupProperties(s,n[a],r[a],i[a],o)}else(void 0===n[a]||o)&&(n[a]=s),l||(n[a]*=1),u?i[a]=r[a].slice().reverse():i[a]=n[a]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying&&(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object)),this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=eG()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=eG()),this._isPaused&&this._isPlaying&&(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this)),this},e.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return void 0===e&&(e=e$),this._group=e,this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=eU.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=eK.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,n){if(void 0===e&&(e=eG()),void 0===n&&(n=!0),this._isPaused)return!0;var r,i,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;n&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var a=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(r in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[r]||(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}}return!0},e.prototype._updateProperties=function(e,n,r,i){for(var o in r)if(void 0!==n[o]){var a=n[o]||0,s=r[o],l=Array.isArray(e[o]),c=Array.isArray(s);!l&&c?e[o]=this._interpolationFunction(s,i):"object"==typeof s&&s?this._updateProperties(e[o],a,s,i):"number"==typeof(s=this._handleRelativeValue(a,s))&&(e[o]=a+(s-a)*i)}},e.prototype._handleRelativeValue=function(e,n){return"string"!=typeof n?n:"+"===n.charAt(0)||"-"===n.charAt(0)?e+parseFloat(n):parseFloat(n)},e.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];"string"==typeof r?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},e}(),eX=eZ.nextId,eY=e$.getAll.bind(e$),eQ=e$.removeAll.bind(e$),eJ=e$.add.bind(e$),e0=e$.remove.bind(e$),e1=e$.update.bind(e$),e2={Easing:eU,Group:eq,Interpolation:eK,now:eG,Sequence:eZ,nextId:eX,Tween:eW,VERSION:"19.0.0",getAll:eY,removeAll:eQ,add:eJ,remove:e0,update:e1};function e3(e){return function(e){if(Array.isArray(e))return e6(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||e5(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e5(e,n){if(e){if("string"==typeof e)return e6(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e6(e,n)}}function e6(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}!function(e,n){void 0===n&&(n={});var r=n.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  top: 0;\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}");var e4=window.THREE?window.THREE:{WebGLRenderer:eh.WebGLRenderer,Scene:eh.Scene,PerspectiveCamera:eh.PerspectiveCamera,Raycaster:eh.Raycaster,SRGBColorSpace:eh.SRGBColorSpace,TextureLoader:eh.TextureLoader,Vector2:eh.Vector2,Vector3:eh.Vector3,Box3:eh.Box3,Color:eh.Color,Mesh:eh.Mesh,SphereGeometry:eh.SphereGeometry,MeshBasicMaterial:eh.MeshBasicMaterial,BackSide:eh.BackSide,EventDispatcher:eh.EventDispatcher,MOUSE:eh.MOUSE,Quaternion:eh.Quaternion,Spherical:eh.Spherical,Clock:eh.Clock},e8=(0,w.Z)({props:{width:{default:window.innerWidth,onChange:function(e,n,r){isNaN(e)&&(n.width=r)}},height:{default:window.innerHeight,onChange:function(e,n,r){isNaN(e)&&(n.height=r)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,n){n.hoverObj=null,n.toolTipElem&&(n.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return -1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(e.clock.getDelta()),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(n){return n.render(e.scene,e.camera)}),e.enablePointerInteraction){var n=null;if(e.hoverDuringDrag||!e.isPointerDragging){var r=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter(function(n){return e.hoverFilter(n.object)}).sort(function(n,r){return e.hoverOrderComparator(n.object,r.object)}),i=r.length?r[0]:null;n=i?i.object:null,e.intersectionPoint=i?i.point:null}n!==e.hoverObj&&(e.onHover(n,e.hoverObj),e.toolTipElem.innerHTML=n&&(0,x.default)(e.tooltipContent)(n)||"",e.hoverObj=n)}e2.update()}return this},getPointerPos:function(e){var n=e.pointerPos;return{x:n.x,y:n.y}},cameraPosition:function(e,n,r,i){var o=e.camera;if(n&&e.initialised){var a=r||{x:0,y:0,z:0};if(i){var s=Object.assign({},o.position),l=h();new e2.Tween(s).to(n,i).easing(e2.Easing.Quadratic.Out).onUpdate(c).start(),new e2.Tween(l).to(a,i/3).easing(e2.Easing.Quadratic.Out).onUpdate(u).start()}else c(n),u(a);return this}return Object.assign({},o.position,{lookAt:h()});function c(e){var n=e.x,r=e.y,i=e.z;void 0!==n&&(o.position.x=n),void 0!==r&&(o.position.y=r),void 0!==i&&(o.position.z=i)}function u(n){var r=new e4.Vector3(n.x,n.y,n.z);e.controls.target?e.controls.target=r:o.lookAt(r)}function h(){return Object.assign(new e4.Vector3(0,0,-1e3).applyQuaternion(o.quaternion).add(o.position))}},zoomToFit:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length,o=Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return this.fitToBbox(this.getBbox.apply(this,o),n,r)},fitToBbox:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=e.camera;if(n){var a=new e4.Vector3(0,0,0),s=2*Math.max.apply(Math,e3(Object.entries(n).map(function(e){var n=function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,2)||e5(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],i=n[1];return Math.max.apply(Math,e3(i.map(function(e){return Math.abs(a[r]-e)})))})))/Math.atan((1-2*i/e.height)*o.fov*Math.PI/180),l=s/o.aspect,c=Math.max(s,l);if(c>0){var u=a.clone().sub(o.position).normalize().multiplyScalar(-c);this.cameraPosition(u,a,r)}}return this},getBbox:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=new e4.Box3(new e4.Vector3(0,0,0),new e4.Vector3(0,0,0)),i=e.objects.filter(n);return i.length?(i.forEach(function(e){return r.expandByObject(e)}),Object.assign.apply(Object,e3(["x","y","z"].map(function(e){var n,i,o,a;return n={},i=e,o=[r.min[e],r.max[e]],(i="symbol"==typeof(a=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(i,"string"))?a:String(a))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n})))):null},getScreenCoords:function(e,n,r,i){var o=new e4.Vector3(n,r,i);return o.project(this.camera()),{x:(o.x+1)*e.width/2,y:-(o.y-1)*e.height/2}},getSceneCoords:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new e4.Vector2(n/e.width*2-1,-(2*(r/e.height))+1),a=new e4.Raycaster;return a.setFromCamera(o,e.camera),Object.assign({},a.ray.at(i,new e4.Vector3))},intersectingObjects:function(e,n,r){var i=new e4.Vector2(n/e.width*2-1,-(2*(r/e.height))+1),o=new e4.Raycaster;return o.params.Line.threshold=e.lineHoverPrecision,o.setFromCamera(i,e.camera),o.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new e4.Scene,camera:new e4.PerspectiveCamera,clock:new e4.Clock}},init:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.controlType,o=void 0===i?"trackball":i,a=r.rendererConfig,s=r.extraRenderers,l=r.waitForLoadComplete;e.innerHTML="",e.appendChild(n.container=document.createElement("div")),n.container.className="scene-container",n.container.style.position="relative",n.container.appendChild(n.navInfo=document.createElement("div")),n.navInfo.className="scene-nav-info",n.navInfo.textContent=({orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"})[o]||"",n.navInfo.style.display=n.showNavInfo?null:"none",n.toolTipElem=document.createElement("div"),n.toolTipElem.classList.add("scene-tooltip"),n.container.appendChild(n.toolTipElem),n.pointerPos=new e4.Vector2,n.pointerPos.x=-2,n.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(e){return n.container.addEventListener(e,function(r){if("pointerdown"===e&&(n.isPointerPressed=!0),!n.isPointerDragging&&"pointermove"===r.type&&(r.pressure>0||n.isPointerPressed)&&("touch"!==r.pointerType||void 0===r.movementX||[r.movementX,r.movementY].some(function(e){return Math.abs(e)>1}))&&(n.isPointerDragging=!0),n.enablePointerInteraction){var i,o,a,s=(i=n.container.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,a=window.pageYOffset||document.documentElement.scrollTop,{top:i.top+a,left:i.left+o});n.pointerPos.x=r.pageX-s.left,n.pointerPos.y=r.pageY-s.top,n.toolTipElem.style.top="".concat(n.pointerPos.y,"px"),n.toolTipElem.style.left="".concat(n.pointerPos.x,"px"),n.toolTipElem.style.transform="translate(-".concat(n.pointerPos.x/n.width*100,"%, ").concat(n.height-n.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}},{passive:!0})}),n.container.addEventListener("pointerup",function(e){n.isPointerPressed=!1,(!n.isPointerDragging||(n.isPointerDragging=!1,n.clickAfterDrag))&&requestAnimationFrame(function(){0===e.button&&n.onClick(n.hoverObj||null,e,n.intersectionPoint),2===e.button&&n.onRightClick&&n.onRightClick(n.hoverObj||null,e,n.intersectionPoint)})},{passive:!0,capture:!0}),n.container.addEventListener("contextmenu",function(e){n.onRightClick&&e.preventDefault()}),n.renderer=new e4.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},void 0===a?{}:a)),n.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),n.container.appendChild(n.renderer.domElement),n.extraRenderers=void 0===s?[]:s,n.extraRenderers.forEach(function(e){e.domElement.style.position="absolute",e.domElement.style.top="0px",e.domElement.style.pointerEvents="none",n.container.appendChild(e.domElement)}),n.postProcessingComposer=new eF(n.renderer),n.postProcessingComposer.addPass(new eB(n.scene,n.camera)),n.controls=new({trackball:ek,orbit:eA,fly:eM})[o](n.camera,n.renderer.domElement),"fly"===o&&(n.controls.movementSpeed=300,n.controls.rollSpeed=Math.PI/6,n.controls.dragToLook=!0),("trackball"===o||"orbit"===o)&&(n.controls.minDistance=.1,n.controls.maxDistance=n.skyRadius,n.controls.addEventListener("start",function(){n.controlsEngaged=!0}),n.controls.addEventListener("change",function(){n.controlsEngaged&&(n.controlsDragging=!0)}),n.controls.addEventListener("end",function(){n.controlsEngaged=!1,n.controlsDragging=!1})),[n.renderer,n.postProcessingComposer].concat(e3(n.extraRenderers)).forEach(function(e){return e.setSize(n.width,n.height)}),n.camera.aspect=n.width/n.height,n.camera.updateProjectionMatrix(),n.camera.position.z=1e3,n.scene.add(n.skysphere=new e4.Mesh),n.skysphere.visible=!1,n.loadComplete=n.scene.visible=!(void 0===l||l),window.scene=n.scene},update:function(e,n){if(e.width&&e.height&&(n.hasOwnProperty("width")||n.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(e3(e.extraRenderers)).forEach(function(n){return n.setSize(e.width,e.height)}),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),n.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&n.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=2.5*e.skyRadius,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new e4.SphereGeometry(e.skyRadius)),n.hasOwnProperty("backgroundColor")){var r=V(e.backgroundColor).alpha;void 0===r&&(r=1),e.renderer.setClearColor(new e4.Color(Z(1,e.backgroundColor)),r)}function i(){e.loadComplete=e.scene.visible=!0}n.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new e4.TextureLoader().load(e.backgroundImageUrl,function(n){n.colorSpace=e4.SRGBColorSpace,e.skysphere.material=new e4.MeshBasicMaterial({map:n,side:e4.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),e.loadComplete||i()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,e.loadComplete||i())),n.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),n.hasOwnProperty("objects")&&((n.objects||[]).forEach(function(n){return e.scene.remove(n)}),e.objects.forEach(function(n){return e.scene.add(n)}))}});function e9(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function e7(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e9(Object(r),!0).forEach(function(n){te(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function te(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:String(i))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function tt(e){return function(e){if(Array.isArray(e))return tn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return tn(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tn(e,n)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function tr(e,n){var r=new n;return{linkProp:function(n){return{default:r[n](),onChange:function(r,i){i[e][n](r)},triggerUpdate:!1}},linkMethod:function(n){return function(r){for(var i=r[e],o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var l=i[n].apply(i,a);return l===i?this:l}}}}!function(e,n){void 0===n&&(n={});var r=n.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".graph-info-msg {\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: lavender;\n  opacity: 0.7;\n  font-size: 22px;\n  position: absolute;\n  font-family: Sans-serif;\n}\n\n.scene-container .clickable {\n  cursor: pointer;\n}\n\n.scene-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.scene-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}");var ti=window.THREE?window.THREE:{AmbientLight:eh.AmbientLight,DirectionalLight:eh.DirectionalLight,Vector3:eh.Vector3},to=tr("forceGraph",ew.default),ta=Object.assign.apply(Object,tt(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return te({},e,to.linkProp(e))}))),ts=Object.assign.apply(Object,tt(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return te({},e,to.linkMethod(e))}))),tl=tr("renderObjs",e8),tc=Object.assign.apply(Object,tt(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(e){return te({},e,tl.linkProp(e))}))),tu=Object.assign.apply(Object,tt(["cameraPosition","postProcessingComposer"].map(function(e){return te({},e,tl.linkMethod(e))})).concat([{graph2ScreenCoords:tl.linkMethod("getScreenCoords"),screen2GraphCoords:tl.linkMethod("getSceneCoords")}])),th=(0,w.Z)({props:e7(e7({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,n){return n.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,n){var r=n.renderObjs.controls();r&&(r.enabled=e,e&&r.domElement&&r.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},ta),tc),methods:e7(e7({zoomToFit:function(e,n,r){for(var i,o=arguments.length,a=Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return e.renderObjs.fitToBbox((i=e.forceGraph).getGraphBbox.apply(i,a),n,r),this},pauseAnimation:function(e){return null!==e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return null===e.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},ts),tu),stateInit:function(e){var n=e.controlType,r=e.rendererConfig,i=e.extraRenderers;return{forceGraph:new ew.default,renderObjs:e8({controlType:n,rendererConfig:r,extraRenderers:i})}},init:function(e,n){e.innerHTML="",e.appendChild(n.container=document.createElement("div")),n.container.style.position="relative";var r,i=document.createElement("div");n.container.appendChild(i),n.renderObjs(i);var o=n.renderObjs.camera(),a=n.renderObjs.renderer(),s=n.renderObjs.controls();s.enabled=!!n.enableNavigationControls,n.lastSetCameraZ=o.position.z,n.container.appendChild(r=document.createElement("div")),r.className="graph-info-msg",r.textContent="",n.forceGraph.onLoading(function(){r.textContent="Loading..."}).onFinishLoading(function(){r.textContent=""}).onUpdate(function(){n.graphData=n.forceGraph.graphData(),0===o.position.x&&0===o.position.y&&o.position.z===n.lastSetCameraZ&&n.graphData.nodes.length&&(o.lookAt(n.forceGraph.position),n.lastSetCameraZ=o.position.z=170*Math.cbrt(n.graphData.nodes.length))}).onFinishUpdate(function(){if(n._dragControls){var e=n.graphData.nodes.find(function(e){return e.__initialFixedPos&&!e.__disposeControlsAfterDrag});e?e.__disposeControlsAfterDrag=!0:n._dragControls.dispose(),n._dragControls=void 0}if(n.enableNodeDrag&&n.enablePointerInteraction&&"d3"===n.forceEngine){var r=n._dragControls=new eb(n.graphData.nodes.map(function(e){return e.__threeObj}).filter(function(e){return e}),o,a.domElement);r.addEventListener("dragstart",function(e){s.enabled=!1,e.object.__initialPos=e.object.position.clone(),e.object.__prevPos=e.object.position.clone();var n=td(e.object).__data;n.__initialFixedPos||(n.__initialFixedPos={fx:n.fx,fy:n.fy,fz:n.fz}),n.__initialPos||(n.__initialPos={x:n.x,y:n.y,z:n.z}),["x","y","z"].forEach(function(e){return n["f".concat(e)]=n[e]}),a.domElement.classList.add("grabbable")}),r.addEventListener("drag",function(e){var r=td(e.object);if(!e.object.hasOwnProperty("__graphObjType")){var i=e.object.__initialPos,o=e.object.__prevPos,a=e.object.position;r.position.add(a.clone().sub(o)),o.copy(a),a.copy(i)}var s=r.__data,l=r.position,c={x:l.x-s.x,y:l.y-s.y,z:l.z-s.z};["x","y","z"].forEach(function(e){return s["f".concat(e)]=s[e]=l[e]}),n.forceGraph.d3AlphaTarget(.3).resetCountdown(),s.__dragged=!0,n.onNodeDrag(s,c)}),r.addEventListener("dragend",function(e){delete e.object.__initialPos,delete e.object.__prevPos;var i=td(e.object).__data;i.__disposeControlsAfterDrag&&(r.dispose(),delete i.__disposeControlsAfterDrag);var o=i.__initialFixedPos,l=i.__initialPos,c={x:l.x-i.x,y:l.y-i.y,z:l.z-i.z};o&&(["x","y","z"].forEach(function(e){var n="f".concat(e);void 0===o[n]&&delete i[n]}),delete i.__initialFixedPos,delete i.__initialPos,i.__dragged&&(delete i.__dragged,n.onNodeDragEnd(i,c))),n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.enableNavigationControls&&(s.enabled=!0,s.domElement&&s.domElement.ownerDocument&&s.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),a.domElement.classList.remove("grabbable")})}}),n.renderObjs.objects([new ti.AmbientLight(13421772),new ti.DirectionalLight(16777215,.6),n.forceGraph]).hoverOrderComparator(function(e,n){var r=td(e);if(!r)return 1;var i=td(n);if(!i)return -1;var o=function(e){return"node"===e.__graphObjType};return o(i)-o(r)}).tooltipContent(function(e){var r=td(e);return r&&(0,x.default)(n["".concat(r.__graphObjType,"Label")])(r.__data)||""}).hoverDuringDrag(!1).onHover(function(e){var r=td(e);if(r!==n.hoverObj){var i=n.hoverObj?n.hoverObj.__graphObjType:null,o=n.hoverObj?n.hoverObj.__data:null,s=r?r.__graphObjType:null,l=r?r.__data:null;if(i&&i!==s){var c=n["on".concat("node"===i?"Node":"Link","Hover")];c&&c(null,o)}if(s){var u=n["on".concat("node"===s?"Node":"Link","Hover")];u&&u(l,i===s?o:null)}a.domElement.classList[r&&n["on".concat("node"===s?"Node":"Link","Click")]||!r&&n.onBackgroundClick?"add":"remove"]("clickable"),n.hoverObj=r}}).clickAfterDrag(!1).onClick(function(e,r){var i=td(e);if(i){var o=n["on".concat("node"===i.__graphObjType?"Node":"Link","Click")];o&&o(i.__data,r)}else n.onBackgroundClick&&n.onBackgroundClick(r)}).onRightClick(function(e,r){var i=td(e);if(i){var o=n["on".concat("node"===i.__graphObjType?"Node":"Link","RightClick")];o&&o(i.__data,r)}else n.onBackgroundRightClick&&n.onBackgroundRightClick(r)}),this._animationCycle()}});function td(e){for(var n=e;n&&!n.hasOwnProperty("__graphObjType");)n=n.parent;return n}function tf(){}function tp(e){return null==e?tf:function(){return this.querySelector(e)}}function tg(){return[]}function tm(e){return null==e?tg:function(){return this.querySelectorAll(e)}}function tv(e){return function(){return this.matches(e)}}function ty(e){return function(n){return n.matches(e)}}var tb=Array.prototype.find;function tw(){return this.firstElementChild}var tx=Array.prototype.filter;function tE(){return Array.from(this.children)}function t_(e){return Array(e.length)}function tk(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}function tT(e,n,r,i,o,a){for(var s,l=0,c=n.length,u=a.length;l<u;++l)(s=n[l])?(s.__data__=a[l],i[l]=s):r[l]=new tk(e,a[l]);for(;l<c;++l)(s=n[l])&&(o[l]=s)}function tO(e,n,r,i,o,a,s){var l,c,u,h=new Map,d=n.length,f=a.length,p=Array(d);for(l=0;l<d;++l)(c=n[l])&&(p[l]=u=s.call(c,c.__data__,l,n)+"",h.has(u)?o[l]=c:h.set(u,c));for(l=0;l<f;++l)u=s.call(e,a[l],l,a)+"",(c=h.get(u))?(i[l]=c,c.__data__=a[l],h.delete(u)):r[l]=new tk(e,a[l]);for(l=0;l<d;++l)(c=n[l])&&h.get(p[l])===c&&(o[l]=c)}function tC(e){return e.__data__}function tA(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}tk.prototype={constructor:tk,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var tS="http://www.w3.org/1999/xhtml",tM={svg:"http://www.w3.org/2000/svg",xhtml:tS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tR(e){var n=e+="",r=n.indexOf(":");return r>=0&&"xmlns"!==(n=e.slice(0,r))&&(e=e.slice(r+1)),tM.hasOwnProperty(n)?{space:tM[n],local:e}:e}function tj(e){return function(){this.removeAttribute(e)}}function tP(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tN(e,n){return function(){this.setAttribute(e,n)}}function tD(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function tL(e,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}function tI(e,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function tz(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function tH(e){return function(){this.style.removeProperty(e)}}function tF(e,n,r){return function(){this.style.setProperty(e,n,r)}}function tB(e,n,r){return function(){var i=n.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function tV(e,n){return e.style.getPropertyValue(n)||tz(e).getComputedStyle(e,null).getPropertyValue(n)}function tU(e){return function(){delete this[e]}}function tG(e,n){return function(){this[e]=n}}function tq(e,n){return function(){var r=n.apply(this,arguments);null==r?delete this[e]:this[e]=r}}function tK(e){return e.trim().split(/^|\s+/)}function tZ(e){return e.classList||new t$(e)}function t$(e){this._node=e,this._names=tK(e.getAttribute("class")||"")}function tW(e,n){for(var r=tZ(e),i=-1,o=n.length;++i<o;)r.add(n[i])}function tX(e,n){for(var r=tZ(e),i=-1,o=n.length;++i<o;)r.remove(n[i])}function tY(e){return function(){tW(this,e)}}function tQ(e){return function(){tX(this,e)}}function tJ(e,n){return function(){(n.apply(this,arguments)?tW:tX)(this,e)}}function t0(){this.textContent=""}function t1(e){return function(){this.textContent=e}}function t2(e){return function(){var n=e.apply(this,arguments);this.textContent=null==n?"":n}}function t3(){this.innerHTML=""}function t5(e){return function(){this.innerHTML=e}}function t6(e){return function(){var n=e.apply(this,arguments);this.innerHTML=null==n?"":n}}function t4(){this.nextSibling&&this.parentNode.appendChild(this)}function t8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function t9(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===tS&&n.documentElement.namespaceURI===tS?n.createElement(e):n.createElementNS(r,e)}}function t7(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ne(e){var n=tR(e);return(n.local?t7:t9)(n)}function nt(){return null}function nn(){var e=this.parentNode;e&&e.removeChild(this)}function nr(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function ni(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function no(e){return function(){var n=this.__on;if(n){for(var r,i=0,o=-1,a=n.length;i<a;++i)(r=n[i],e.type&&r.type!==e.type||r.name!==e.name)?n[++o]=r:this.removeEventListener(r.type,r.listener,r.options);++o?n.length=o:delete this.__on}}}function na(e,n,r){return function(){var i,o=this.__on,a=function(e){n.call(this,e,this.__data__)};if(o){for(var s=0,l=o.length;s<l;++s)if((i=o[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=r),i.value=n;return}}this.addEventListener(e.type,a,r),i={type:e.type,name:e.name,value:n,listener:a,options:r},o?o.push(i):this.__on=[i]}}function ns(e,n,r){var i=tz(e),o=i.CustomEvent;"function"==typeof o?o=new o(n,r):(o=i.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}function nl(e,n){return function(){return ns(this,e,n)}}function nc(e,n){return function(){return ns(this,e,n.apply(this,arguments))}}t$.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var nu=[null];function nh(e,n){this._groups=e,this._parents=n}function nd(){return new nh([[document.documentElement]],nu)}nh.prototype=nd.prototype={constructor:nh,select:function(e){"function"!=typeof e&&(e=tp(e));for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o)for(var a,s,l=n[o],c=l.length,u=i[o]=Array(c),h=0;h<c;++h)(a=l[h])&&(s=e.call(a,a.__data__,h,l))&&("__data__"in a&&(s.__data__=a.__data__),u[h]=s);return new nh(i,this._parents)},selectAll:function(e){if("function"==typeof e){var n;n=e,e=function(){var e;return e=n.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=tm(e);for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)(l=c[h])&&(o.push(e.call(l,l.__data__,h,c)),a.push(l));return new nh(o,a)},selectChild:function(e){var n;return this.select(null==e?tw:(n="function"==typeof e?e:ty(e),function(){return tb.call(this.children,n)}))},selectChildren:function(e){var n;return this.selectAll(null==e?tE:(n="function"==typeof e?e:ty(e),function(){return tx.call(this.children,n)}))},filter:function(e){"function"!=typeof e&&(e=tv(e));for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o)for(var a,s=n[o],l=s.length,c=i[o]=[],u=0;u<l;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&c.push(a);return new nh(i,this._parents)},data:function(e,n){if(!arguments.length)return Array.from(this,tC);var r=n?tO:tT,i=this._parents,o=this._groups;"function"!=typeof e&&(b=e,e=function(){return b});for(var a=o.length,s=Array(a),l=Array(a),c=Array(a),u=0;u<a;++u){var h=i[u],d=o[u],f=d.length,p="object"==typeof(y=e.call(h,h&&h.__data__,u,i))&&"length"in y?y:Array.from(y),g=p.length,m=l[u]=Array(g),v=s[u]=Array(g);r(h,d,m,v,c[u]=Array(f),p,n);for(var y,b,w,x,E=0,_=0;E<g;++E)if(w=m[E]){for(E>=_&&(_=E+1);!(x=v[_])&&++_<g;);w._next=x||null}}return(s=new nh(s,i))._enter=l,s._exit=c,s},enter:function(){return new nh(this._enter||this._groups.map(t_),this._parents)},exit:function(){return new nh(this._exit||this._groups.map(t_),this._parents)},join:function(e,n,r){var i=this.enter(),o=this,a=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=n&&(o=n(o))&&(o=o.selection()),null==r?a.remove():r(a),i&&o?i.merge(o).order():o},merge:function(e){for(var n=e.selection?e.selection():e,r=this._groups,i=n._groups,o=r.length,a=i.length,s=Math.min(o,a),l=Array(o),c=0;c<s;++c)for(var u,h=r[c],d=i[c],f=h.length,p=l[c]=Array(f),g=0;g<f;++g)(u=h[g]||d[g])&&(p[g]=u);for(;c<o;++c)l[c]=r[c];return new nh(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var i,o=e[n],a=o.length-1,s=o[a];--a>=0;)(i=o[a])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(e){function n(n,r){return n&&r?e(n.__data__,r.__data__):!n-!r}e||(e=tA);for(var r=this._groups,i=r.length,o=Array(i),a=0;a<i;++a){for(var s,l=r[a],c=l.length,u=o[a]=Array(c),h=0;h<c;++h)(s=l[h])&&(u[h]=s);u.sort(n)}return new nh(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;++o){var s=i[o];if(s)return s}return null},size:function(){let e=0;for(let n of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var o,a=n[r],s=0,l=a.length;s<l;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this},attr:function(e,n){var r=tR(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==n?r.local?tP:tj:"function"==typeof n?r.local?tI:tL:r.local?tD:tN)(r,n))},style:function(e,n,r){return arguments.length>1?this.each((null==n?tH:"function"==typeof n?tB:tF)(e,n,null==r?"":r)):tV(this.node(),e)},property:function(e,n){return arguments.length>1?this.each((null==n?tU:"function"==typeof n?tq:tG)(e,n)):this.node()[e]},classed:function(e,n){var r=tK(e+"");if(arguments.length<2){for(var i=tZ(this.node()),o=-1,a=r.length;++o<a;)if(!i.contains(r[o]))return!1;return!0}return this.each(("function"==typeof n?tJ:n?tY:tQ)(r,n))},text:function(e){return arguments.length?this.each(null==e?t0:("function"==typeof e?t2:t1)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?t3:("function"==typeof e?t6:t5)(e)):this.node().innerHTML},raise:function(){return this.each(t4)},lower:function(){return this.each(t8)},append:function(e){var n="function"==typeof e?e:ne(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(e,n){var r="function"==typeof e?e:ne(e),i=null==n?nt:"function"==typeof n?n:tp(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(nn)},clone:function(e){return this.select(e?ni:nr)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,n,r){var i,o,a=(e+"").trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}}),s=a.length;if(arguments.length<2){var l=this.node().__on;if(l){for(var c,u=0,h=l.length;u<h;++u)for(i=0,c=l[u];i<s;++i)if((o=a[i]).type===c.type&&o.name===c.name)return c.value}return}for(i=0,l=n?na:no;i<s;++i)this.each(l(a[i],n,r));return this},dispatch:function(e,n){return this.each(("function"==typeof n?nc:nl)(e,n))},[Symbol.iterator]:function*(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&(yield i)}};var nf=nd;function np(e){return"string"==typeof e?new nh([[document.querySelector(e)]],[document.documentElement]):new nh([[e]],nu)}var ng=r(6057);let nm={passive:!1},nv={capture:!0,passive:!1};function ny(e){e.stopImmediatePropagation()}function nb(e){e.preventDefault(),e.stopImmediatePropagation()}function nw(e){var n=e.document.documentElement,r=np(e).on("dragstart.drag",nb,nv);"onselectstart"in n?r.on("selectstart.drag",nb,nv):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function nx(e,n){var r=e.document.documentElement,i=np(e).on("dragstart.drag",null);n&&(i.on("click.drag",nb,nv),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function nE(e){return((e=Math.exp(e))+1/e)/2}var n_=function e(n,r,i){function o(e,o){var a,s,l=e[0],c=e[1],u=e[2],h=o[0],d=o[1],f=o[2],p=h-l,g=d-c,m=p*p+g*g;if(m<1e-12)s=Math.log(f/u)/n,a=function(e){return[l+e*p,c+e*g,u*Math.exp(n*e*s)]};else{var v=Math.sqrt(m),y=(f*f-u*u+i*m)/(2*u*r*v),b=(f*f-u*u-i*m)/(2*f*r*v),w=Math.log(Math.sqrt(y*y+1)-y);s=(Math.log(Math.sqrt(b*b+1)-b)-w)/n,a=function(e){var i,o,a=e*s,h=nE(w),d=u/(r*v)*(h*(((i=Math.exp(2*(i=n*a+w)))-1)/(i+1))-((o=Math.exp(o=w))-1/o)/2);return[l+d*p,c+d*g,u*h/nE(n*a+w)]}}return a.duration=1e3*s*n/Math.SQRT2,a}return o.rho=function(n){var r=Math.max(.001,+n),i=r*r;return e(r,i,i*i)},o}(Math.SQRT2,2,4);function nk(e,n){if(e=function(e){let n;for(;n=e.sourceEvent;)e=n;return e}(e),void 0===n&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(n.getScreenCTM().inverse())).x,i.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}var nT=r(1739);function nO(e,n,r){var i=new nT.B7;return n=null==n?0:+n,i.restart(r=>{i.stop(),e(r+n)},n,r),i}var nC=(0,ng.Z)("start","end","cancel","interrupt"),nA=[];function nS(e,n,r,i,o,a){var s=e.__transition;if(s){if(r in s)return}else e.__transition={};!function(e,n,r){var i,o=e.__transition;function a(c){var u,h,d,f;if(1!==r.state)return l();for(u in o)if((f=o[u]).name===r.name){if(3===f.state)return nO(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[u]):+u<n&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[u])}if(nO(function(){3===r.state&&(r.state=4,r.timer.restart(s,r.delay,r.time),s(c))}),r.state=2,r.on.call("start",e,e.__data__,r.index,r.group),2===r.state){for(u=0,r.state=3,i=Array(d=r.tween.length),h=-1;u<d;++u)(f=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(i[++h]=f);i.length=h+1}}function s(n){for(var o=n<r.duration?r.ease.call(null,n/r.duration):(r.timer.restart(l),r.state=5,1),a=-1,s=i.length;++a<s;)i[a].call(e,o);5===r.state&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){for(var i in r.state=6,r.timer.stop(),delete o[n],o)return;delete e.__transition}o[n]=r,r.timer=(0,nT.HT)(function(e){r.state=1,r.timer.restart(a,r.delay,r.time),r.delay<=e&&a(e-r.delay)},0,r.time)}(e,r,{name:n,index:i,group:o,on:nC,tween:nA,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function nM(e,n){var r=nj(e,n);if(r.state>0)throw Error("too late; already scheduled");return r}function nR(e,n){var r=nj(e,n);if(r.state>3)throw Error("too late; already running");return r}function nj(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw Error("transition not found");return r}function nP(e,n){var r,i,o,a=e.__transition,s=!0;if(a){for(o in n=null==n?null:n+"",a){if((r=a[o]).name!==n){s=!1;continue}i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete a[o]}s&&delete e.__transition}}function nN(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var nD=180/Math.PI,nL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nI(e,n,r,i,o,a){var s,l,c;return(s=Math.sqrt(e*e+n*n))&&(e/=s,n/=s),(c=e*r+n*i)&&(r-=e*c,i-=n*c),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,c/=l),e*i<n*r&&(e=-e,n=-n,c=-c,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(n,e)*nD,skewX:Math.atan(c)*nD,scaleX:s,scaleY:l}}function nz(e,n,r,i){function o(e){return e.length?e.pop()+" ":""}return function(a,s){var l,c,u,h,d=[],f=[];return a=e(a),s=e(s),!function(e,i,o,a,s,l){if(e!==o||i!==a){var c=s.push("translate(",null,n,null,r);l.push({i:c-4,x:nN(e,o)},{i:c-2,x:nN(i,a)})}else(o||a)&&s.push("translate("+o+n+a+r)}(a.translateX,a.translateY,s.translateX,s.translateY,d,f),(l=a.rotate)!==(c=s.rotate)?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,i)-2,x:nN(l,c)})):c&&d.push(o(d)+"rotate("+c+i),(u=a.skewX)!==(h=s.skewX)?f.push({i:d.push(o(d)+"skewX(",null,i)-2,x:nN(u,h)}):h&&d.push(o(d)+"skewX("+h+i),!function(e,n,r,i,a,s){if(e!==r||n!==i){var l=a.push(o(a)+"scale(",null,",",null,")");s.push({i:l-4,x:nN(e,r)},{i:l-2,x:nN(n,i)})}else(1!==r||1!==i)&&a.push(o(a)+"scale("+r+","+i+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,d,f),a=s=null,function(e){for(var n,r=-1,i=f.length;++r<i;)d[(n=f[r]).i]=n.x(e);return d.join("")}}}var nH=nz(function(e){let n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?nL:nI(n.a,n.b,n.c,n.d,n.e,n.f)},"px, ","px)","deg)"),nF=nz(function(e){return null==e?nL:(a||(a=document.createElementNS("http://www.w3.org/2000/svg","g")),a.setAttribute("transform",e),e=a.transform.baseVal.consolidate())?nI((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):nL},", ",")",")");function nB(e,n){var r,i;return function(){var o=nR(this,e),a=o.tween;if(a!==r){i=r=a;for(var s=0,l=i.length;s<l;++s)if(i[s].name===n){(i=i.slice()).splice(s,1);break}}o.tween=i}}function nV(e,n,r){var i,o;if("function"!=typeof r)throw Error();return function(){var a=nR(this,e),s=a.tween;if(s!==i){o=(i=s).slice();for(var l={name:n,value:r},c=0,u=o.length;c<u;++c)if(o[c].name===n){o[c]=l;break}c===u&&o.push(l)}a.tween=o}}function nU(e,n,r){var i=e._id;return e.each(function(){var e=nR(this,i);(e.value||(e.value={}))[n]=r.apply(this,arguments)}),function(e){return nj(e,i).value[n]}}function nG(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function nq(e,n){var r=Object.create(e.prototype);for(var i in n)r[i]=n[i];return r}function nK(){}var nZ="\\s*([+-]?\\d+)\\s*",n$="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nW="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nX=/^#([0-9a-f]{3,8})$/,nY=RegExp(`^rgb\\(${nZ},${nZ},${nZ}\\)$`),nQ=RegExp(`^rgb\\(${nW},${nW},${nW}\\)$`),nJ=RegExp(`^rgba\\(${nZ},${nZ},${nZ},${n$}\\)$`),n0=RegExp(`^rgba\\(${nW},${nW},${nW},${n$}\\)$`),n1=RegExp(`^hsl\\(${n$},${nW},${nW}\\)$`),n2=RegExp(`^hsla\\(${n$},${nW},${nW},${n$}\\)$`),n3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function n5(){return this.rgb().formatHex()}function n6(){return this.rgb().formatRgb()}function n4(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=nX.exec(e))?(r=n[1].length,n=parseInt(n[1],16),6===r?n8(n):3===r?new re(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===r?n9(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===r?n9(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=nY.exec(e))?new re(n[1],n[2],n[3],1):(n=nQ.exec(e))?new re(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=nJ.exec(e))?n9(n[1],n[2],n[3],n[4]):(n=n0.exec(e))?n9(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=n1.exec(e))?ra(n[1],n[2]/100,n[3]/100,1):(n=n2.exec(e))?ra(n[1],n[2]/100,n[3]/100,n[4]):n3.hasOwnProperty(e)?n8(n3[e]):"transparent"===e?new re(NaN,NaN,NaN,0):null}function n8(e){return new re(e>>16&255,e>>8&255,255&e,1)}function n9(e,n,r,i){return i<=0&&(e=n=r=NaN),new re(e,n,r,i)}function n7(e,n,r,i){var o;return 1==arguments.length?((o=e)instanceof nK||(o=n4(o)),o)?(o=o.rgb(),new re(o.r,o.g,o.b,o.opacity)):new re:new re(e,n,r,null==i?1:i)}function re(e,n,r,i){this.r=+e,this.g=+n,this.b=+r,this.opacity=+i}function rt(){return`#${ro(this.r)}${ro(this.g)}${ro(this.b)}`}function rn(){let e=rr(this.opacity);return`${1===e?"rgb(":"rgba("}${ri(this.r)}, ${ri(this.g)}, ${ri(this.b)}${1===e?")":`, ${e})`}`}function rr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ri(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ro(e){return((e=ri(e))<16?"0":"")+e.toString(16)}function ra(e,n,r,i){return i<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new rl(e,n,r,i)}function rs(e){if(e instanceof rl)return new rl(e.h,e.s,e.l,e.opacity);if(e instanceof nK||(e=n4(e)),!e)return new rl;if(e instanceof rl)return e;var n=(e=e.rgb()).r/255,r=e.g/255,i=e.b/255,o=Math.min(n,r,i),a=Math.max(n,r,i),s=NaN,l=a-o,c=(a+o)/2;return l?(s=n===a?(r-i)/l+(r<i)*6:r===a?(i-n)/l+2:(n-r)/l+4,l/=c<.5?a+o:2-a-o,s*=60):l=c>0&&c<1?0:s,new rl(s,l,c,e.opacity)}function rl(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}function rc(e){return(e=(e||0)%360)<0?e+360:e}function ru(e){return Math.max(0,Math.min(1,e||0))}function rh(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}function rd(e,n,r,i,o){var a=e*e,s=a*e;return((1-3*e+3*a-s)*n+(4-6*a+3*s)*r+(1+3*e+3*a-3*s)*i+s*o)/6}nG(nK,n4,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:n5,formatHex:n5,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return rs(this).formatHsl()},formatRgb:n6,toString:n6}),nG(re,n7,nq(nK,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new re(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new re(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new re(ri(this.r),ri(this.g),ri(this.b),rr(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rt,formatHex:rt,formatHex8:function(){return`#${ro(this.r)}${ro(this.g)}${ro(this.b)}${ro((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:rn,toString:rn})),nG(rl,function(e,n,r,i){return 1==arguments.length?rs(e):new rl(e,n,r,null==i?1:i)},nq(nK,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new rl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new rl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,o=2*r-i;return new re(rh(e>=240?e-240:e+120,o,i),rh(e,o,i),rh(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new rl(rc(this.h),ru(this.s),ru(this.l),rr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=rr(this.opacity);return`${1===e?"hsl(":"hsla("}${rc(this.h)}, ${100*ru(this.s)}%, ${100*ru(this.l)}%${1===e?")":`, ${e})`}`}}));var rf=e=>()=>e;function rp(e,n){var r=n-e;return r?function(n){return e+n*r}:rf(isNaN(e)?n:e)}var rg=function e(n){var r,i=1==(r=+(r=n))?rp:function(e,n){var i,o,a;return n-e?(i=e,o=n,i=Math.pow(i,a=r),o=Math.pow(o,a)-i,a=1/a,function(e){return Math.pow(i+e*o,a)}):rf(isNaN(e)?n:e)};function o(e,n){var r=i((e=n7(e)).r,(n=n7(n)).r),o=i(e.g,n.g),a=i(e.b,n.b),s=rp(e.opacity,n.opacity);return function(n){return e.r=r(n),e.g=o(n),e.b=a(n),e.opacity=s(n),e+""}}return o.gamma=e,o}(1);function rm(e){return function(n){var r,i,o=n.length,a=Array(o),s=Array(o),l=Array(o);for(r=0;r<o;++r)i=n7(n[r]),a[r]=i.r||0,s[r]=i.g||0,l[r]=i.b||0;return a=e(a),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=l(e),i+""}}}rm(function(e){var n=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,n-1):Math.floor(r*n),o=e[i],a=e[i+1],s=i>0?e[i-1]:2*o-a,l=i<n-1?e[i+2]:2*a-o;return rd((r-i/n)*n,s,o,a,l)}}),rm(function(e){var n=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*n),o=e[(i+n-1)%n],a=e[i%n],s=e[(i+1)%n],l=e[(i+2)%n];return rd((r-i/n)*n,o,a,s,l)}});var rv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ry=RegExp(rv.source,"g");function rb(e,n){var r,i,o,a,s,l=rv.lastIndex=ry.lastIndex=0,c=-1,u=[],h=[];for(e+="",n+="";(o=rv.exec(e))&&(a=ry.exec(n));)(s=a.index)>l&&(s=n.slice(l,s),u[c]?u[c]+=s:u[++c]=s),(o=o[0])===(a=a[0])?u[c]?u[c]+=a:u[++c]=a:(u[++c]=null,h.push({i:c,x:nN(o,a)})),l=ry.lastIndex;return l<n.length&&(s=n.slice(l),u[c]?u[c]+=s:u[++c]=s),u.length<2?h[0]?(r=h[0].x,function(e){return r(e)+""}):(i=n,function(){return i}):(n=h.length,function(e){for(var r,i=0;i<n;++i)u[(r=h[i]).i]=r.x(e);return u.join("")})}function rw(e,n){var r;return("number"==typeof n?nN:n instanceof n4?rg:(r=n4(n))?(n=r,rg):rb)(e,n)}function rx(e){return function(){this.removeAttribute(e)}}function rE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function r_(e,n,r){var i,o,a=r+"";return function(){var s=this.getAttribute(e);return s===a?null:s===i?o:o=n(i=s,r)}}function rk(e,n,r){var i,o,a=r+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===a?null:s===i?o:o=n(i=s,r)}}function rT(e,n,r){var i,o,a;return function(){var s,l,c=r(this);return null==c?void this.removeAttribute(e):(s=this.getAttribute(e))===(l=c+"")?null:s===i&&l===o?a:(o=l,a=n(i=s,c))}}function rO(e,n,r){var i,o,a;return function(){var s,l,c=r(this);return null==c?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local))===(l=c+"")?null:s===i&&l===o?a:(o=l,a=n(i=s,c))}}function rC(e,n){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(n){this.setAttributeNS(e.space,e.local,o.call(this,n))}),r}return o._value=n,o}function rA(e,n){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(n){this.setAttribute(e,o.call(this,n))}),r}return o._value=n,o}function rS(e,n){return function(){nM(this,e).delay=+n.apply(this,arguments)}}function rM(e,n){return n=+n,function(){nM(this,e).delay=n}}function rR(e,n){return function(){nR(this,e).duration=+n.apply(this,arguments)}}function rj(e,n){return n=+n,function(){nR(this,e).duration=n}}var rP=nf.prototype.constructor;function rN(e){return function(){this.style.removeProperty(e)}}var rD=0;function rL(e,n,r,i){this._groups=e,this._parents=n,this._name=r,this._id=i}var rI=nf.prototype;rL.prototype=(function(e){return nf().transition(e)}).prototype={constructor:rL,select:function(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=tp(e));for(var i=this._groups,o=i.length,a=Array(o),s=0;s<o;++s)for(var l,c,u=i[s],h=u.length,d=a[s]=Array(h),f=0;f<h;++f)(l=u[f])&&(c=e.call(l,l.__data__,f,u))&&("__data__"in l&&(c.__data__=l.__data__),d[f]=c,nS(d[f],n,r,f,d,nj(l,r)));return new rL(a,this._parents,n,r)},selectAll:function(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=tm(e));for(var i=this._groups,o=i.length,a=[],s=[],l=0;l<o;++l)for(var c,u=i[l],h=u.length,d=0;d<h;++d)if(c=u[d]){for(var f,p=e.call(c,c.__data__,d,u),g=nj(c,r),m=0,v=p.length;m<v;++m)(f=p[m])&&nS(f,n,r,m,p,g);a.push(p),s.push(c)}return new rL(a,s,n,r)},selectChild:rI.selectChild,selectChildren:rI.selectChildren,filter:function(e){"function"!=typeof e&&(e=tv(e));for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o)for(var a,s=n[o],l=s.length,c=i[o]=[],u=0;u<l;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&c.push(a);return new rL(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=Array(i),l=0;l<a;++l)for(var c,u=n[l],h=r[l],d=u.length,f=s[l]=Array(d),p=0;p<d;++p)(c=u[p]||h[p])&&(f[p]=c);for(;l<i;++l)s[l]=n[l];return new rL(s,this._parents,this._name,this._id)},selection:function(){return new rP(this._groups,this._parents)},transition:function(){for(var e=this._name,n=this._id,r=++rD,i=this._groups,o=i.length,a=0;a<o;++a)for(var s,l=i[a],c=l.length,u=0;u<c;++u)if(s=l[u]){var h=nj(s,n);nS(s,e,r,u,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new rL(i,this._parents,e,r)},call:rI.call,nodes:rI.nodes,node:rI.node,size:rI.size,empty:rI.empty,each:rI.each,on:function(e,n){var r,i,o,a=this._id;return arguments.length<2?nj(this.node(),a).on.on(e):this.each((o=(e+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||"start"===e})?nM:nR,function(){var s=o(this,a),l=s.on;l!==r&&(i=(r=l).copy()).on(e,n),s.on=i}))},attr:function(e,n){var r=tR(e),i="transform"===r?nF:rw;return this.attrTween(e,"function"==typeof n?(r.local?rO:rT)(r,i,nU(this,"attr."+e,n)):null==n?(r.local?rE:rx)(r):(r.local?rk:r_)(r,i,n))},attrTween:function(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw Error();var i=tR(e);return this.tween(r,(i.local?rC:rA)(i,n))},style:function(e,n,r){var i,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,w,x,E,_,k,T="transform"==(e+="")?nH:rw;return null==n?this.styleTween(e,(i=e,function(){var e=tV(this,i),n=(this.style.removeProperty(i),tV(this,i));return e===n?null:e===o&&n===a?s:s=T(o=e,a=n)})).on("end.style."+e,rN(e)):"function"==typeof n?this.styleTween(e,(l=e,c=nU(this,"style."+e,n),function(){var e=tV(this,l),n=c(this),r=n+"";return null==n&&(this.style.removeProperty(l),r=n=tV(this,l)),e===r?null:e===u&&r===h?d:(h=r,d=T(u=e,n))})).each((f=this._id,w="end."+(b="style."+(p=e)),function(){var e=nR(this,f),n=e.on,r=null==e.value[b]?y||(y=rN(p)):void 0;(n!==g||v!==r)&&(m=(g=n).copy()).on(w,v=r),e.on=m})):this.styleTween(e,(x=e,k=n+"",function(){var e=tV(this,x);return e===k?null:e===E?_:_=T(E=e,n)}),r).on("end.style."+e,null)},styleTween:function(e,n,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==n)return this.tween(i,null);if("function"!=typeof n)throw Error();return this.tween(i,function(e,n,r){var i,o;function a(){var a=n.apply(this,arguments);return a!==o&&(i=(o=a)&&function(n){this.style.setProperty(e,a.call(this,n),r)}),i}return a._value=n,a}(e,n,null==r?"":r))},text:function(e){var n,r;return this.tween("text","function"==typeof e?(n=nU(this,"text",e),function(){var e=n(this);this.textContent=null==e?"":e}):(r=null==e?"":e+"",function(){this.textContent=r}))},textTween:function(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw Error();return this.tween(n,function(e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e){this.textContent=i.call(this,e)}),n}return i._value=e,i}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}))},tween:function(e,n){var r=this._id;if(e+="",arguments.length<2){for(var i,o=nj(this.node(),r).tween,a=0,s=o.length;a<s;++a)if((i=o[a]).name===e)return i.value;return null}return this.each((null==n?nB:nV)(r,e,n))},delay:function(e){var n=this._id;return arguments.length?this.each(("function"==typeof e?rS:rM)(n,e)):nj(this.node(),n).delay},duration:function(e){var n=this._id;return arguments.length?this.each(("function"==typeof e?rR:rj)(n,e)):nj(this.node(),n).duration},ease:function(e){var n=this._id;return arguments.length?this.each(function(e,n){if("function"!=typeof n)throw Error();return function(){nR(this,e).ease=n}}(n,e)):nj(this.node(),n).ease},easeVarying:function(e){var n;if("function"!=typeof e)throw Error();return this.each((n=this._id,function(){var r=e.apply(this,arguments);if("function"!=typeof r)throw Error();nR(this,n).ease=r}))},end:function(){var e,n,r=this,i=r._id,o=r.size();return new Promise(function(a,s){var l={value:s},c={value:function(){0==--o&&a()}};r.each(function(){var r=nR(this,i),o=r.on;o!==e&&((n=(e=o).copy())._.cancel.push(l),n._.interrupt.push(l),n._.end.push(c)),r.on=n}),0===o&&a()})},[Symbol.iterator]:rI[Symbol.iterator]};var rz={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};nf.prototype.interrupt=function(e){return this.each(function(){nP(this,e)})},nf.prototype.transition=function(e){var n,r;e instanceof rL?(n=e._id,e=e._name):(n=++rD,(r=rz).time=(0,nT.zO)(),e=null==e?null:e+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s,l=i[a],c=l.length,u=0;u<c;++u)(s=l[u])&&nS(s,e,n,u,l,r||function(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw Error(`transition ${n} not found`);return r}(s,n));return new rL(i,this._parents,e,n)};var rH=e=>()=>e;function rF(e,{sourceEvent:n,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function rB(e,n,r){this.k=e,this.x=n,this.y=r}rB.prototype={constructor:rB,scale:function(e){return 1===e?this:new rB(this.k*e,this.x,this.y)},translate:function(e,n){return 0===e&0===n?this:new rB(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rV=new rB(1,0,0);function rU(e){for(;!e.__zoom;)if(!(e=e.parentNode))return rV;return e.__zoom}function rG(e){e.stopImmediatePropagation()}function rq(e){e.preventDefault(),e.stopImmediatePropagation()}function rK(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function rZ(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function r$(){return this.__zoom||rV}function rW(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function rX(){return navigator.maxTouchPoints||"ontouchstart"in this}function rY(e,n,r){var i=e.invertX(n[0][0])-r[0][0],o=e.invertX(n[1][0])-r[1][0],a=e.invertY(n[0][1])-r[0][1],s=e.invertY(n[1][1])-r[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}rU.prototype=rB.prototype;var rQ=e=>()=>e;function rJ(e,{sourceEvent:n,subject:r,target:i,identifier:o,active:a,x:s,y:l,dx:c,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function r0(e){return!e.ctrlKey&&!e.button}function r1(){return this.parentNode}function r2(e,n){return null==n?{x:e.x,y:e.y}:n}function r3(){return navigator.maxTouchPoints||"ontouchstart"in this}rJ.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var r5=r(8398),r6=r(8776),r4=r(4615),r8=r(7226),r9=function(e,n,r){var i=!0,o=!0;if("function"!=typeof e)throw TypeError("Expected a function");return(0,r8.Z)(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),(0,r4.Z)(e,n,{leading:i,maxWait:n,trailing:o})},r7=r(7234);function ie(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){var n=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:String(n)}(i.key),i)}}function it(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}var ir=function(e,n,r){return(e<<16)+(n<<8)+r},ii=function(e){var n=(0,r7.Z)(e).toRgb();return ir(n.r,n.g,n.b)},io=function(e,n){return 123*e%Math.pow(2,n)},ia=function(){var e,n;function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,r),this.csBits=e,this.registry=["__reserved for background__"]}return e=[{key:"register",value:function(e){if(this.registry.length>=Math.pow(2,24-this.csBits))return null;var n,r=this.registry.length,i=io(r,this.csBits),o=(n=r+(i<<24-this.csBits),"#".concat(Math.min(n,16777216).toString(16).padStart(6,"0")));return this.registry.push(e),o}},{key:"lookup",value:function(e){var n="string"==typeof e?ii(e):ir.apply(void 0,function(e){if(Array.isArray(e))return it(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return it(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return it(e,n)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());if(!n)return null;var r=n&Math.pow(2,24-this.csBits)-1,i=n>>24-this.csBits&Math.pow(2,this.csBits)-1;return io(r,this.csBits)!==i||r>=this.registry.length?null:this.registry[r]}}],ie(r.prototype,e),n&&ie(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}(),is=r(9330),il=r(6248),ic=r(3581),iu=r(4903),ih=r(8376);let{abs:id,cos:ip,sin:ig,acos:im,atan2:iv,sqrt:iy,pow:ib}=Math;function iw(e){return e<0?-ib(-e,1/3):ib(e,1/3)}let ix=Math.PI,iE=2*ix,i_=ix/2,ik=Number.MAX_SAFE_INTEGER||9007199254740991,iT=Number.MIN_SAFE_INTEGER||-9007199254740991,iO={x:0,y:0,z:0},iC={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){let r=n(e),i=r.x*r.x+r.y*r.y;return void 0!==r.z&&(i+=r.z*r.z),iy(i)},compute:function(e,n,r){if(0===e)return n[0].t=0,n[0];let i=n.length-1;if(1===e)return n[i].t=1,n[i];let o=1-e,a=n;if(0===i)return n[0].t=e,n[0];if(1===i){let n={x:o*a[0].x+e*a[1].x,y:o*a[0].y+e*a[1].y,t:e};return r&&(n.z=o*a[0].z+e*a[1].z),n}if(i<4){let n=o*o,s=e*e,l,c,u,h=0;2===i?(a=[a[0],a[1],a[2],iO],l=n,c=o*e*2,u=s):3===i&&(l=n*o,c=n*e*3,u=o*s*3,h=e*s);let d={x:l*a[0].x+c*a[1].x+u*a[2].x+h*a[3].x,y:l*a[0].y+c*a[1].y+u*a[2].y+h*a[3].y,t:e};return r&&(d.z=l*a[0].z+c*a[1].z+u*a[2].z+h*a[3].z),d}let s=JSON.parse(JSON.stringify(n));for(;s.length>1;){for(let n=0;n<s.length-1;n++)s[n]={x:s[n].x+(s[n+1].x-s[n].x)*e,y:s[n].y+(s[n+1].y-s[n].y)*e},void 0!==s[n].z&&(s[n]=s[n].z+(s[n+1].z-s[n].z)*e);s.splice(s.length-1,1)}return s[0].t=e,s[0]},computeWithRatios:function(e,n,r,i){let o=1-e,a=r[0],s=r[1],l=r[2],c=r[3],u;return(a*=o,s*=e,2===n.length)?(u=a+s,{x:(a*n[0].x+s*n[1].x)/u,y:(a*n[0].y+s*n[1].y)/u,z:!!i&&(a*n[0].z+s*n[1].z)/u,t:e}):(a*=o,s*=2*o,l*=e*e,3===n.length)?(u=a+s+l,{x:(a*n[0].x+s*n[1].x+l*n[2].x)/u,y:(a*n[0].y+s*n[1].y+l*n[2].y)/u,z:!!i&&(a*n[0].z+s*n[1].z+l*n[2].z)/u,t:e}):(a*=o,s*=1.5*o,l*=3*o,c*=e*e*e,4===n.length)?(u=a+s+l+c,{x:(a*n[0].x+s*n[1].x+l*n[2].x+c*n[3].x)/u,y:(a*n[0].y+s*n[1].y+l*n[2].y+c*n[3].y)/u,z:!!i&&(a*n[0].z+s*n[1].z+l*n[2].z+c*n[3].z)/u,t:e}):void 0},derive:function(e,n){let r=[];for(let i=e,o=i.length,a=o-1;o>1;o--,a--){let e=[];for(let r=0,o;r<a;r++)o={x:a*(i[r+1].x-i[r].x),y:a*(i[r+1].y-i[r].y)},n&&(o.z=a*(i[r+1].z-i[r].z)),e.push(o);r.push(e),i=e}return r},between:function(e,n,r){return n<=e&&e<=r||iC.approximately(e,n)||iC.approximately(e,r)},approximately:function(e,n,r){return id(e-n)<=(r||1e-6)},length:function(e){let n=iC.Tvalues.length,r=0;for(let i=0,o;i<n;i++)o=.5*iC.Tvalues[i]+.5,r+=iC.Cvalues[i]*iC.arcfn(o,e);return .5*r},map:function(e,n,r,i,o){return i+(o-i)*((e-n)/(r-n))},lerp:function(e,n,r){let i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return void 0!==n.z&&void 0!==r.z&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return void 0!==e.z&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(iC.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){let i=n.x-e.x,o=n.y-e.y,a=r.x-e.x,s=r.y-e.y;return iv(i*s-o*a,i*a+o*s)},round:function(e,n){let r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){let r=e.x-n.x,i=e.y-n.y;return iy(r*r+i*i)},closest:function(e,n){let r=ib(2,63),i,o;return e.forEach(function(e,a){(o=iC.dist(n,e))<r&&(r=o,i=a)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(2!==n&&3!==n)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=ib(e,n)+ib(1-e,n);return id((r-1)/r)},projectionratio:function(e,n){if(2!==n&&3!==n)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=ib(1-e,n),i=ib(e,n)+r;return r/i},lli8:function(e,n,r,i,o,a,s,l){let c=(e-r)*(a-l)-(n-i)*(o-s);return 0!=c&&{x:((e*i-n*r)*(o-s)-(e-r)*(o*l-a*s))/c,y:((e*i-n*r)*(a-l)-(n-i)*(o*l-a*s))/c}},lli4:function(e,n,r,i){let o=e.x,a=e.y,s=n.x,l=n.y,c=r.x,u=r.y,h=i.x,d=i.y;return iC.lli8(o,a,s,l,c,u,h,d)},lli:function(e,n){return iC.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new iI(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=ik,r=ik,i=iT,o=iT;return e.forEach(function(e){let a=e.bbox();n>a.x.min&&(n=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),o<a.y.max&&(o=a.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(e,n,r,i,o){if(!iC.bboxoverlap(n,i))return[];let a=[],s=[e.startcap,e.forward,e.back,e.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return s.forEach(function(n){n.virtual||l.forEach(function(i){if(i.virtual)return;let s=n.intersects(i,o);s.length>0&&(s.c1=n,s.c2=i,s.s1=e,s.s2=r,a.push(s))})}),a},makeshape:function(e,n,r){let i=n.points.length,o=e.points.length,a=iC.makeline(n.points[i-1],e.points[0]),s=iC.makeline(e.points[o-1],n.points[0]),l={startcap:a,forward:e,back:n,endcap:s,bbox:iC.findbbox([a,e,n,s])};return l.intersections=function(e){return iC.shapeintersections(l,l.bbox,e,e.bbox,r)},l},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=ik,o=iT,a,s;-1===r.indexOf(0)&&(r=[0].concat(r)),-1===r.indexOf(1)&&r.push(1);for(let l=0,c=r.length;l<c;l++)a=r[l],(s=e.get(a))[n]<i&&(i=s[n]),s[n]>o&&(o=s[n]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,n){let r=n.p1.x,i=n.p1.y,o=-iv(n.p2.y-i,n.p2.x-r);return e.map(function(e){return{x:(e.x-r)*ip(o)-(e.y-i)*ig(o),y:(e.x-r)*ig(o)+(e.y-i)*ip(o)}})},roots:function(e,n){let r,i,o;n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};let a=e.length-1,s=iC.align(e,n),l=function(e){return 0<=e&&e<=1};if(2===a){let e=s[0].y,n=s[1].y,r=s[2].y,i=e-2*n+r;if(0!==i){let o=-iy(n*n-e*r),a=-e+n;return[-(o+a)/i,-(-o+a)/i].filter(l)}return n!==r&&0===i?[(2*n-r)/(2*n-2*r)].filter(l):[]}let c=s[0].y,u=s[1].y,h=s[2].y,d=s[3].y,f=-c+3*u-3*h+d,p=3*c-6*u+3*h,g=-3*c+3*u,m=c;if(iC.approximately(f,0)){if(iC.approximately(p,0))return iC.approximately(g,0)?[]:[-m/g].filter(l);let e=iy(g*g-4*p*m),n=2*p;return[(e-g)/n,(-g-e)/n].filter(l)}p/=f,g/=f,m/=f;let v=(3*g-p*p)/3,y=v/3,b=(2*p*p*p-9*p*g+27*m)/27,w=b/2,x=w*w+y*y*y;if(x<0){let e=-v/3,n=iy(e*e*e),r=-b/(2*n),o=im(r<-1?-1:r>1?1:r),a=iw(n),s=2*a;return[i=s*ip(o/3)-p/3,s*ip((o+iE)/3)-p/3,s*ip((o+2*iE)/3)-p/3].filter(l)}if(0===x)return[i=2*(r=w<0?iw(-w):-iw(w))-p/3,-r-p/3].filter(l);{let e=iy(x);return[(r=iw(-w+e))-iw(w+e)-p/3].filter(l)}},droots:function(e){if(3===e.length){let n=e[0],r=e[1],i=e[2],o=n-2*r+i;if(0!==o){let e=-iy(r*r-n*i),a=-n+r;return[-(e+a)/o,-(-e+a)/o]}return r!==i&&0===o?[(2*r-i)/(2*(r-i))]:[]}if(2===e.length){let n=e[0],r=e[1];if(n!==r)return[n/(n-r)]}return[]},curvature:function(e,n,r,i,o){let a,s,l,c,u=0,h=0,d=iC.compute(e,n),f=iC.compute(e,r),p=d.x*d.x+d.y*d.y;if(i?(a=iy(ib(d.y*f.z-f.y*d.z,2)+ib(d.z*f.x-f.z*d.x,2)+ib(d.x*f.y-f.x*d.y,2)),s=ib(p+d.z*d.z,1.5)):(a=d.x*f.y-d.y*f.x,s=ib(p,1.5)),0===a||0===s)return{k:0,r:0};if(u=a/s,h=s/a,!o){let o=iC.curvature(e-.001,n,r,i,!0).k,a=iC.curvature(e+.001,n,r,i,!0).k;c=(a-u+(u-o))/2,l=(id(a-u)+id(u-o))/2}return{k:u,r:h,dk:c,adk:l}},inflections:function(e){if(e.length<4)return[];let n=iC.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,o=n[1].x*n[2].y,a=n[3].x*n[2].y,s=18*(-3*r+2*i+3*o-a),l=18*(3*r-i-3*o),c=18*(o-r);if(iC.approximately(s,0)){if(!iC.approximately(l,0)){let e=-c/l;if(0<=e&&e<=1)return[e]}return[]}let u=2*s;if(iC.approximately(u,0))return[];let h=l*l-4*s*c;if(h<0)return[];let d=Math.sqrt(h);return[(d-l)/u,-(l+d)/u].filter(function(e){return 0<=e&&e<=1})},bboxoverlap:function(e,n){let r=["x","y"],i=r.length;for(let o=0,a,s,l,c;o<i;o++)if(s=e[a=r[o]].mid,l=n[a].mid,c=(e[a].size+n[a].size)/2,id(s-l)>=c)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){let i=e.bbox(),o=n.bbox(),a=r||.5;if(i.x.size+i.y.size<a&&o.x.size+o.y.size<a)return[(1e5*(e._t1+e._t2)/2|0)/1e5+"/"+(1e5*(n._t1+n._t2)/2|0)/1e5];let s=e.split(.5),l=n.split(.5),c=[{left:s.left,right:l.left},{left:s.left,right:l.right},{left:s.right,right:l.right},{left:s.right,right:l.left}];c=c.filter(function(e){return iC.bboxoverlap(e.left.bbox(),e.right.bbox())});let u=[];return 0===c.length?u:(c.forEach(function(e){u=u.concat(iC.pairiteration(e.left,e.right,a))}),u=u.filter(function(e,n){return u.indexOf(e)===n}))},getccenter:function(e,n,r){let i=n.x-e.x,o=n.y-e.y,a=r.x-n.x,s=r.y-n.y,l=i*ip(i_)-o*ig(i_),c=i*ig(i_)+o*ip(i_),u=a*ip(i_)-s*ig(i_),h=a*ig(i_)+s*ip(i_),d=(e.x+n.x)/2,f=(e.y+n.y)/2,p=(n.x+r.x)/2,g=(n.y+r.y)/2,m=iC.lli8(d,f,d+l,f+c,p,g,p+u,g+h),v=iC.dist(m,e),y=iv(e.y-m.y,e.x-m.x),b=iv(n.y-m.y,n.x-m.x),w=iv(r.y-m.y,r.x-m.x),x;return y<w?((y>b||b>w)&&(y+=iE),y>w&&(x=w,w=y,y=x)):w<b&&b<y?(x=w,w=y,y=x):w+=iE,m.s=y,m.e=w,m.r=v,m},numberSort:function(e,n){return e-n}};class iA{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return iC.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){let e=this.curves;for(var n=e[0].bbox(),r=1;r<e.length;r++)iC.expandbox(n,e[r].bbox());return n}offset(e){let n=[];return this.curves.forEach(function(r){n.push(...r.offset(e))}),new iA(n)}}let{abs:iS,min:iM,max:iR,cos:ij,sin:iP,acos:iN,sqrt:iD}=Math,iL=Math.PI;class iI{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),r=!1;if("object"==typeof n[0]){r=n.length;let e=[];n.forEach(function(n){["x","y","z"].forEach(function(r){void 0!==n[r]&&e.push(n[r])})}),n=e}let i=!1,o=n.length;if(r){if(r>4){if(1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let a=this._3d=!i&&(9===o||12===o)||e&&e[0]&&void 0!==e[0].z,s=this.points=[];for(let e=0,r=a?3:2;e<o;e+=r){var l={x:n[e],y:n[e+1]};a&&(l.z=n[e+2]),s.push(l)}let c=this.order=s.length-1,u=this.dims=["x","y"];a&&u.push("z"),this.dimlen=u.length;let h=iC.align(s,{p1:s[0],p2:s[c]}),d=iC.dist(s[0],s[c]);this._linear=h.reduce((e,n)=>e+iS(n.y),0)<d/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,r,i){if(void 0===i&&(i=.5),0===i)return new iI(n,n,r);if(1===i)return new iI(e,n,n);let o=iI.getABC(2,e,n,r,i);return new iI(e,o.A,r)}static cubicFromPoints(e,n,r,i,o){void 0===i&&(i=.5);let a=iI.getABC(3,e,n,r,i);void 0===o&&(o=iC.dist(n,a.C));let s=o*(1-i)/i,l=iC.dist(e,r),c=(r.x-e.x)/l,u=(r.y-e.y)/l,h=o*c,d=o*u,f={x:n.x-h,y:n.y-d},p={x:n.x+s*c,y:n.y+s*u},g=a.A,m={x:g.x+(f.x-g.x)/(1-i),y:g.y+(f.y-g.y)/(1-i)},v={x:g.x+(p.x-g.x)/i,y:g.y+(p.y-g.y)/i},y={x:e.x+(m.x-e.x)/i,y:e.y+(m.y-e.y)/i},b={x:r.x+(v.x-r.x)/(1-i),y:r.y+(v.y-r.y)/(1-i)};return new iI(e,y,b,r)}static getUtils(){return iC}getUtils(){return iI.getUtils()}static get PolyBezier(){return iA}valueOf(){return this.toString()}toString(){return iC.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let e=this.points,n=e[0].x,r=e[0].y,i=["M",n,r,2===this.order?"Q":"C"];for(let n=1,r=e.length;n<r;n++)i.push(e[n].x),i.push(e[n].y);return i.join(" ")}setRatios(e){if(e.length!==this.points.length)throw Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){let e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=iC.derive(this.points,this._3d),this.computedirection()}computedirection(){let e=this.points,n=iC.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return iC.length(this.derivative.bind(this))}static getABC(e=2,n,r,i,o=.5){let a=iC.projectionratio(o,e),s=1-a,l={x:a*n.x+s*i.x,y:a*n.y+s*i.y},c=iC.abcratio(o,e),u={x:r.x+(r.x-l.x)/c,y:r.y+(r.y-l.y)/c};return{A:u,B:r,C:l,S:n,E:i}}getABC(e,n){n=n||this.get(e);let r=this.points[0],i=this.points[this.order];return iI.getABC(this.order,r,n,i,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,r,i;n<e;n++)i=n/(e-1),(r=this.compute(i)).t=i,this._lut.push(r);return this._lut}on(e,n){n=n||5;let r=this.getLUT(),i=[];for(let o=0,a;o<r.length;o++)a=r[o],iC.dist(a,e)<n&&(i.push(a),r.length);return!!i.length&&(t/=i.length)}project(e){let n=this.getLUT(),r=n.length-1,i=iC.closest(n,e),o=i.mpos,a=(o-1)/r,s=(o+1)/r,l=.1/r,c=i.mdist,u=a,h=u,d;c+=1;for(let n;u<s+l;u+=l)d=this.compute(u),(n=iC.dist(e,d))<c&&(c=n,h=u);return h=h<0?0:h>1?1:h,(d=this.compute(h)).t=h,d.d=c,d}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?iC.computeWithRatios(e,this.points,this.ratios,this._3d):iC.compute(e,this.points,this._3d,this.ratios)}raise(){let e=this.points,n=[e[0]],r=e.length;for(let i=1,o,a;i<r;i++)o=e[i],a=e[i-1],n[i]={x:(r-i)/r*o.x+i/r*a.x,y:(r-i)/r*o.y+i/r*a.y};return n[r]=e[r-1],new iI(n)}derivative(e){return iC.compute(e,this.dpoints[0],this._3d)}dderivative(e){return iC.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new iI(iC.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return iC.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return iC.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){let n=this.derivative(e),r=iD(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/r,y:n.x/r}}__normal3(e){let n=this.derivative(e),r=this.derivative(e+.01),i=iD(n.x*n.x+n.y*n.y+n.z*n.z),o=iD(r.x*r.x+r.y*r.y+r.z*r.z);n.x/=i,n.y/=i,n.z/=i,r.x/=o,r.y/=o,r.z/=o;let a={x:r.y*n.z-r.z*n.y,y:r.z*n.x-r.x*n.z,z:r.x*n.y-r.y*n.x},s=iD(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=s,a.y/=s,a.z/=s;let l=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z],c={t:e,x:l[0]*n.x+l[1]*n.y+l[2]*n.z,y:l[3]*n.x+l[4]*n.y+l[5]*n.z,z:l[6]*n.x+l[7]*n.y+l[8]*n.z};return c}hull(e){let n=this.points,r=[],i=[],o=0;for(i[o++]=n[0],i[o++]=n[1],i[o++]=n[2],3===this.order&&(i[o++]=n[3]);n.length>1;){r=[];for(let a=0,s,l=n.length-1;a<l;a++)s=iC.lerp(e,n[a],n[a+1]),i[o++]=s,r.push(s);n=r}return i}split(e,n){if(0===e&&n)return this.split(n).left;if(1===n)return this.split(e).right;let r=this.hull(e),i={left:new iI(2===this.order?[r[0],r[3],r[5]]:[r[0],r[4],r[7],r[9]]),right:new iI(2===this.order?[r[5],r[4],r[2]]:[r[9],r[8],r[6],r[3]]),span:r};return(i.left._t1=iC.map(0,0,1,this._t1,this._t2),i.left._t2=iC.map(e,0,1,this._t1,this._t2),i.right._t1=iC.map(e,0,1,this._t1,this._t2),i.right._t2=iC.map(1,0,1,this._t1,this._t2),n)?(n=iC.map(n,e,1,0,1),i.right.split(n).left):i}extrema(){let e={},n=[];return this.dims.forEach((function(r){let i=function(e){return e[r]},o=this.dpoints[0].map(i);e[r]=iC.droots(o),3===this.order&&(o=this.dpoints[1].map(i),e[r]=e[r].concat(iC.droots(o))),e[r]=e[r].filter(function(e){return e>=0&&e<=1}),n=n.concat(e[r].sort(iC.numberSort))}).bind(this)),e.values=n.sort(iC.numberSort).filter(function(e,r){return n.indexOf(e)===r}),e}bbox(){let e=this.extrema(),n={};return this.dims.forEach((function(r){n[r]=iC.getminmax(this,r,e[r])}).bind(this)),n}overlaps(e){let n=this.bbox(),r=e.bbox();return iC.bboxoverlap(n,r)}offset(e,n){if(void 0!==n){let r=this.get(e),i=this.normal(e),o={c:r,n:i,x:r.x+i.x*n,y:r.y+i.y*n};return this._3d&&(o.z=r.z+i.z*n),o}if(this._linear){let n=this.normal(0),r=this.points.map(function(r){let i={x:r.x+e*n.x,y:r.y+e*n.y};return r.z&&n.z&&(i.z=r.z+e*n.z),i});return[new iI(r)]}return this.reduce().map(function(n){return n._linear?n.offset(e)[0]:n.scale(e)})}simple(){if(3===this.order){let e=iC.angle(this.points[0],this.points[3],this.points[1]),n=iC.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&n<0||e<0&&n>0)return!1}let e=this.normal(0),n=this.normal(1),r=e.x*n.x+e.y*n.y;return this._3d&&(r+=e.z*n.z),iS(iN(r))<iL/3}reduce(){let e,n=0,r=0,i,o=[],a=[],s=this.extrema().values;for(-1===s.indexOf(0)&&(s=[0].concat(s)),-1===s.indexOf(1)&&s.push(1),n=s[0],e=1;e<s.length;e++)r=s[e],(i=this.split(n,r))._t1=n,i._t2=r,o.push(i),n=r;return o.forEach(function(e){for(n=0,r=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(i=e.split(n,r)).simple()){if(.01>iS(n-(r-=.01)))return[];(i=e.split(n,r))._t1=iC.map(n,0,1,e._t1,e._t2),i._t2=iC.map(r,0,1,e._t1,e._t2),a.push(i),n=r;break}n<1&&((i=e.split(n,1))._t1=iC.map(n,0,1,e._t1,e._t2),i._t2=e._t2,a.push(i))}),a}translate(e,n,r){r="number"==typeof r?r:n;let i=this.order,o=this.points.map((e,o)=>(1-o/i)*n+o/i*r);return new iI(this.points.map((n,r)=>({x:n.x+e.x*o[r],y:n.y+e.y*o[r]})))}scale(e){let n=this.order,r=!1;if("function"==typeof e&&(r=e),r&&2===n)return this.raise().scale(r);let i=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):e,r?r(1):e);let a=r?r(0):e,s=r?r(1):e,l=[this.offset(0,10),this.offset(1,10)],c=[],u=iC.lli4(l[0],l[0].c,l[1],l[1].c);if(!u)throw Error("cannot scale this curve. Try reducing it first.");return([0,1].forEach(function(e){let r=c[e*n]=iC.copy(o[e*n]);r.x+=(e?s:a)*l[e].n.x,r.y+=(e?s:a)*l[e].n.y}),r)?([0,1].forEach(function(a){if(2!==n||!a){var s=o[a+1],l={x:s.x-u.x,y:s.y-u.y},h=r?r((a+1)/n):e;r&&!i&&(h=-h);var d=iD(l.x*l.x+l.y*l.y);l.x/=d,l.y/=d,c[a+1]={x:s.x+h*l.x,y:s.y+h*l.y}}}),new iI(c)):([0,1].forEach(e=>{if(2===n&&e)return;let r=c[e*n],i=this.derivative(e),a={x:r.x+i.x,y:r.y+i.y};c[e+1]=iC.lli4(r,a,u,o[e+1])}),new iI(c))}outline(e,n,r,i){if(n=void 0===n?e:n,this._linear){let o,a,s;let l=this.normal(0),c=this.points[0],u=this.points[this.points.length-1];void 0===r&&(r=e,i=n),o={x:c.x+l.x*e,y:c.y+l.y*e},s={x:u.x+l.x*r,y:u.y+l.y*r},a={x:(o.x+s.x)/2,y:(o.y+s.y)/2};let h=[o,a,s];o={x:c.x-l.x*n,y:c.y-l.y*n},s={x:u.x-l.x*i,y:u.y-l.y*i},a={x:(o.x+s.x)/2,y:(o.y+s.y)/2};let d=[s,a,o],f=iC.makeline(d[2],h[0]),p=iC.makeline(h[2],d[0]),g=[f,new iI(h),p,new iI(d)];return new iA(g)}let o=this.reduce(),a=o.length,s=[],l=[],c,u=0,h=this.length(),d=void 0!==r&&void 0!==i;function f(e,n,r,i,o){return function(a){let s=n-e;return iC.map(a,0,1,e+i/r*s,e+(i+o)/r*s)}}o.forEach(function(o){let a=o.length();d?(s.push(o.scale(f(e,r,h,u,a))),l.push(o.scale(f(-n,-i,h,u,a)))):(s.push(o.scale(e)),l.push(o.scale(-n))),u+=a}),l=l.map(function(e){return(c=e.points)[3]?e.points=[c[3],c[2],c[1],c[0]]:e.points=[c[2],c[1],c[0]],e}).reverse();let p=s[0].points[0],g=s[a-1].points[s[a-1].points.length-1],m=l[a-1].points[l[a-1].points.length-1],v=l[0].points[0],y=iC.makeline(m,p),b=iC.makeline(g,v),w=[y].concat(s).concat([b]).concat(l);return new iA(w)}outlineshapes(e,n,r){n=n||e;let i=this.outline(e,n).curves,o=[];for(let e=1,n=i.length;e<n/2;e++){let a=iC.makeshape(i[e],i[n-e],r);a.startcap.virtual=e>1,a.endcap.virtual=e<n/2-1,o.push(a)}return o}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof iI&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){let n=iM(e.p1.x,e.p2.x),r=iM(e.p1.y,e.p2.y),i=iR(e.p1.x,e.p2.x),o=iR(e.p1.y,e.p2.y);return iC.roots(this.points,e).filter(e=>{var a=this.get(e);return iC.between(a.x,n,i)&&iC.between(a.y,r,o)})}selfintersects(e){let n=this.reduce(),r=n.length-2,i=[];for(let o=0,a,s;o<r;o++)a=n.slice(o,o+1),s=n.slice(o+2),i.push(...this.curveintersects(a,s,e));return i}curveintersects(e,n,r){let i=[];e.forEach(function(e){n.forEach(function(n){e.overlaps(n)&&i.push({left:e,right:n})})});let o=[];return i.forEach(function(e){let n=iC.pairiteration(e.left,e.right,r);n.length>0&&(o=o.concat(n))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,r,i){let o=(i-r)/4,a=this.get(r+o),s=this.get(i-o),l=iC.dist(e,n),c=iC.dist(e,a),u=iC.dist(e,s);return iS(c-l)+iS(u-l)}_iterate(e,n){let r=0,i=1,o;do{o=0,i=1;let a=this.get(r),s,l,c,u,h=!1,d=!1,f,p=i,g=1;do if(d=h,u=c,p=(r+i)/2,s=this.get(p),l=this.get(i),(c=iC.getccenter(a,s,l)).interval={start:r,end:i},h=this._error(c,a,r,i)<=e,(f=d&&!h)||(g=i),h){if(i>=1){if(c.interval.end=g=1,u=c,i>1){let e={x:c.x+c.r*ij(c.e),y:c.y+c.r*iP(c.e)};c.e+=iC.angle({x:c.x,y:c.y},e,this.get(1))}break}i+=(i-r)/2}else i=p;while(!f&&o++<100);if(o>=100)break;u=u||c,n.push(u),r=g}while(i<1);return n}}var iz=r(3780),iH=r(9843),iF=r(6668);function iB(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function iV(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?iB(Object(r),!0).forEach(function(n){iG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iU(e){return(iU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iG(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:String(i))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function iq(e,n){return(iq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function iK(e,n,r){return(iK=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,n,r){var i=[null];i.push.apply(i,n);var o=new(Function.bind.apply(e,i));return r&&iq(o,r.prototype),o}:Reflect.construct.bind()).apply(null,arguments)}function iZ(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||iW(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i$(e){return function(e){if(Array.isArray(e))return iX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||iW(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iW(e,n){if(e){if("string"==typeof e)return iX(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iX(e,n)}}function iX(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}!function(e,n){void 0===n&&(n={});var r=n.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".force-graph-container canvas {\n  display: block;\n  user-select: none;\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.force-graph-container .graph-tooltip {\n  position: absolute;\n  top: 0;\n  font-family: sans-serif;\n  font-size: 16px;\n  padding: 4px;\n  border-radius: 3px;\n  color: #eee;\n  background: rgba(0,0,0,0.65);\n  visibility: hidden; /* by default */\n}\n\n.force-graph-container .clickable {\n  cursor: pointer;\n}\n\n.force-graph-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.force-graph-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n");var iY=(0,iH.Z)(iF.Z);function iQ(e,n,r){n&&"string"==typeof r&&e.filter(function(e){return!e[r]}).forEach(function(e){e[r]=iY(n(e))})}var iJ=function(e,n){return n.onNeedsRedraw&&n.onNeedsRedraw()},i0=function(e,n){if(!n.isShadow){var r=(0,x.default)(n.linkDirectionalParticles);n.graphData.links.forEach(function(e){var n=Math.round(Math.abs(r(e)));n?e.__photons=i$(Array(n)).map(function(){return{}}):delete e.__photons})}},i1=(0,w.Z)({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1,i0(e,n)}},dagMode:{onChange:function(e,n){e||(n.graphData.nodes||[]).forEach(function(e){return e.fx=e.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:iJ},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:iJ},nodeColor:{default:"color",triggerUpdate:!1,onChange:iJ},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:iJ},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:iJ},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:iJ},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:iJ},linkColor:{default:"color",triggerUpdate:!1,onChange:iJ},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:iJ},linkWidth:{default:1,triggerUpdate:!1,onChange:iJ},linkCurvature:{default:0,triggerUpdate:!1,onChange:iJ},linkCanvasObject:{triggerUpdate:!1,onChange:iJ},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:iJ},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:iJ},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:iJ},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:iJ},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:i0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,n,r){return void 0===r?e.forceLayout.force(n):(e.forceLayout.force(n,r),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){var n,r,i,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,w;return e.isShadow||e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick())),function(){var n=(0,x.default)(e.linkVisibility),r=(0,x.default)(e.linkColor),i=(0,x.default)(e.linkWidth),o=(0,x.default)(e.linkLineDash),a=(0,x.default)(e.linkCurvature),s=(0,x.default)(e.linkCanvasObjectMode),l=e.ctx,c=2*e.isShadow,u=e.graphData.links.filter(n);u.forEach(function(e){var n=a(e);if(!n){e.__controlPoints=null;return}var r=e.source,i=e.target;if(r&&i&&r.hasOwnProperty("x")&&i.hasOwnProperty("x")){var o=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2));if(o>0){var s=Math.atan2(i.y-r.y,i.x-r.x),l=o*n,c={x:(r.x+i.x)/2+l*Math.cos(s-Math.PI/2),y:(r.y+i.y)/2+l*Math.sin(s-Math.PI/2)};e.__controlPoints=[c.x,c.y]}else{var u=70*n;e.__controlPoints=[i.x,i.y-u,i.x+u,i.y]}}});var h=[],d=[],f=u;if(e.linkCanvasObject){var p=[],g=[];u.forEach(function(e){return(({before:h,after:d,replace:p})[s(e)]||g).push(e)}),f=[].concat(i$(h),d,g),h=h.concat(p)}l.save(),h.forEach(function(n){return e.linkCanvasObject(n,l,e.globalScale)}),l.restore();var m=(0,iz.Z)(f,[r,i,o]);l.save(),Object.entries(m).forEach(function(n){var r=iZ(n,2),i=r[0],a=r[1],s=i&&"undefined"!==i?i:"rgba(0,0,0,0.15)";Object.entries(a).forEach(function(n){var r=iZ(n,2),i=r[0],a=r[1],u=(i||1)/e.globalScale+c;Object.entries(a).forEach(function(e){var n=iZ(e,2);n[0];var r=n[1],i=o(r[0]);l.beginPath(),r.forEach(function(e){var n=e.source,r=e.target;if(n&&r&&n.hasOwnProperty("x")&&r.hasOwnProperty("x")){l.moveTo(n.x,n.y);var i=e.__controlPoints;i?l[2===i.length?"quadraticCurveTo":"bezierCurveTo"].apply(l,i$(i).concat([r.x,r.y])):l.lineTo(r.x,r.y)}}),l.strokeStyle=s,l.lineWidth=u,l.setLineDash(i||[]),l.stroke()})})}),l.restore(),l.save(),d.forEach(function(n){return e.linkCanvasObject(n,l,e.globalScale)}),l.restore()}(),e.isShadow||(n=(0,x.default)(e.linkDirectionalArrowLength),r=(0,x.default)(e.linkDirectionalArrowRelPos),i=(0,x.default)(e.linkVisibility),o=(0,x.default)(e.linkDirectionalArrowColor||e.linkColor),a=(0,x.default)(e.nodeVal),(s=e.ctx).save(),e.graphData.links.filter(i).forEach(function(i){var l=n(i);if(l&&!(l<0)){var c=i.source,u=i.target;if(c&&u&&c.hasOwnProperty("x")&&u.hasOwnProperty("x")){var h=Math.sqrt(Math.max(0,a(c)||1))*e.nodeRelSize,d=Math.sqrt(Math.max(0,a(u)||1))*e.nodeRelSize,f=Math.min(1,Math.max(0,r(i))),p=o(i)||"rgba(0,0,0,0.28)",g=l/1.6/2,m=i.__controlPoints&&iK(iI,[c.x,c.y].concat(i$(i.__controlPoints),[u.x,u.y])),v=m?function(e){return m.get(e)}:function(e){return{x:c.x+(u.x-c.x)*e||0,y:c.y+(u.y-c.y)*e||0}},y=m?m.length():Math.sqrt(Math.pow(u.x-c.x,2)+Math.pow(u.y-c.y,2)),b=h+l+(y-h-d-l)*f,w=v(b/y),x=v((b-l)/y),E=v((b-.8*l)/y),_=Math.atan2(w.y-x.y,w.x-x.x)-Math.PI/2;s.beginPath(),s.moveTo(w.x,w.y),s.lineTo(x.x+g*Math.cos(_),x.y+g*Math.sin(_)),s.lineTo(E.x,E.y),s.lineTo(x.x-g*Math.cos(_),x.y-g*Math.sin(_)),s.fillStyle=p,s.fill()}}}),s.restore()),e.isShadow||(l=(0,x.default)(e.linkDirectionalParticles),c=(0,x.default)(e.linkDirectionalParticleSpeed),u=(0,x.default)(e.linkDirectionalParticleWidth),h=(0,x.default)(e.linkVisibility),d=(0,x.default)(e.linkDirectionalParticleColor||e.linkColor),(f=e.ctx).save(),e.graphData.links.filter(h).forEach(function(n){var r=l(n);if(n.hasOwnProperty("__photons")&&n.__photons.length){var i=n.source,o=n.target;if(i&&o&&i.hasOwnProperty("x")&&o.hasOwnProperty("x")){var a=c(n),s=n.__photons||[],h=Math.max(0,u(n)/2)/Math.sqrt(e.globalScale),p=d(n)||"rgba(0,0,0,0.28)";f.fillStyle=p;var g=n.__controlPoints?iK(iI,[i.x,i.y].concat(i$(n.__controlPoints),[o.x,o.y])):null,m=0,v=!1;s.forEach(function(e){var n=!!e.__singleHop;if(e.hasOwnProperty("__progressRatio")||(e.__progressRatio=n?0:m/r),!n&&m++,e.__progressRatio+=a,e.__progressRatio>=1){if(n){v=!0;return}e.__progressRatio=e.__progressRatio%1}var s=e.__progressRatio,l=g?g.get(s):{x:i.x+(o.x-i.x)*s||0,y:i.y+(o.y-i.y)*s||0};f.beginPath(),f.arc(l.x,l.y,h,0,2*Math.PI,!1),f.fill()}),v&&(n.__photons=n.__photons.filter(function(e){return!e.__singleHop||e.__progressRatio<=1}))}}}),f.restore()),p=(0,x.default)(e.nodeVisibility),g=(0,x.default)(e.nodeVal),m=(0,x.default)(e.nodeColor),v=(0,x.default)(e.nodeCanvasObjectMode),y=e.ctx,b=e.isShadow/e.globalScale,w=e.graphData.nodes.filter(p),y.save(),w.forEach(function(n){var r=v(n);if(e.nodeCanvasObject&&("before"===r||"replace"===r)&&(e.nodeCanvasObject(n,y,e.globalScale),"replace"===r)){y.restore();return}var i=Math.sqrt(Math.max(0,g(n)||1))*e.nodeRelSize+b;y.beginPath(),y.arc(n.x,n.y,i,0,2*Math.PI,!1),y.fillStyle=m(n)||"rgba(31, 120, 180, 0.92)",y.fill(),e.nodeCanvasObject&&"after"===r&&e.nodeCanvasObject(n,e.ctx,e.globalScale)}),y.restore(),this},emitParticle:function(e,n){return n&&(n.__photons||(n.__photons=[]),n.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:(0,is.Z)().force("link",(0,il.Z)()).force("charge",(0,ic.Z)()).force("center",(0,iu.Z)()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.ctx=e},update:function(e){e.engineRunning=!1,e.onUpdate(),null!==e.nodeAutoColorBy&&iQ(e.graphData.nodes,(0,x.default)(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&iQ(e.graphData.links,(0,x.default)(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(n){n.source=n[e.linkSource],n.target=n[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var n=e.forceLayout.force("link");n&&n.id(function(n){return n[e.nodeId]}).links(e.graphData.links);var r=e.dagMode&&function(e,n){var r=e.nodes,i=e.links,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.nodeFilter,s=void 0===a?function(){return!0}:a,l=o.onLoopError,c=void 0===l?function(e){throw"Invalid DAG structure! Found cycle in node path: ".concat(e.join(" -> "),".")}:l,u={};r.forEach(function(e){return u[n(e)]={data:e,out:[],depth:-1,skip:!s(e)}}),i.forEach(function(e){var r=e.source,i=e.target,o=c(r),a=c(i);if(!u.hasOwnProperty(o))throw"Missing source node with id: ".concat(o);if(!u.hasOwnProperty(a))throw"Missing target node with id: ".concat(a);var s=u[o],l=u[a];function c(e){return"object"===iU(e)?n(e):e}s.out.push(l)});var h=[];return function e(r){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=0,s=r.length;a<s;a++)if("continue"===function(){var s=r[a];if(-1!==i.indexOf(s)){var l=[].concat(i$(i.slice(i.indexOf(s))),[s]).map(function(e){return n(e.data)});return h.some(function(e){return e.length===l.length&&e.every(function(e,n){return e===l[n]})})||(h.push(l),c(l)),"continue"}o>s.depth&&(s.depth=o,e(s.out,[].concat(i$(i),[s]),o+(s.skip?0:1)))}())continue}(Object.values(u)),Object.assign.apply(Object,[{}].concat(i$(Object.entries(u).filter(function(e){return!iZ(e,2)[1].skip}).map(function(e){var n=iZ(e,2);return iG({},n[0],n[1].depth)}))))}(e.graphData,function(n){return n[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),i=Math.max.apply(Math,i$(Object.values(r||[]))),o=e.dagLevelDistance||e.graphData.nodes.length/(i||1)*2*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(e.dagMode){var a=function(n,a){return function(s){return n?(r[s[e.nodeId]]-i/2)*o*(a?-1:1):void 0}},s=a(-1!==["lr","rl"].indexOf(e.dagMode),"rl"===e.dagMode),l=a(-1!==["td","bu"].indexOf(e.dagMode),"bu"===e.dagMode);e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(e){e.fx=s(e),e.fy=l(e)})}e.forceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?(0,ih.Z)(function(n){var a=r[n[e.nodeId]]||-1;return("radialin"===e.dagMode?i-a:a)*o}).strength(function(n){return e.dagNodeFilter(n)?1:0}):null);for(var c=0;c<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);c++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function i2(e,n){var r=e instanceof Array?e:[e],i=new n;return{linkProp:function(e){return{default:i[e](),onChange:function(n,i){r.forEach(function(r){return i[r][e](n)})},triggerUpdate:!1}},linkMethod:function(e){return function(n){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=[];return r.forEach(function(r){var i=n[r],a=i[e].apply(i,o);a!==i&&s.push(a)}),s.length?s[0]:this}}}}var i3=i2("forceGraph",i1),i5=i2(["forceGraph","shadowGraph"],i1),i6=Object.assign.apply(Object,i$(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return iG({},e,i3.linkProp(e))})).concat(i$(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return iG({},e,i5.linkProp(e))})))),i4=Object.assign.apply(Object,i$(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return iG({},e,i3.linkMethod(e))})));function i8(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;300===n&&150===r&&(n=r=0);var i=window.devicePixelRatio;n/=i,r/=i,[e.canvas,e.shadowCanvas].forEach(function(o){o.style.width="".concat(e.width,"px"),o.style.height="".concat(e.height,"px"),o.width=e.width*i,o.height=e.height*i,n||r||o.getContext("2d").scale(i,i)});var o=rU(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/o,(e.height-r)/2/o),e.needsRedraw=!0}}function i9(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function i7(e,n,r){e.save(),i9(e),e.clearRect(0,0,n,r),e.restore()}var oe=(0,w.Z)({props:iV({width:{default:window.innerWidth,onChange:function(e,n){return i8(n)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,n){return i8(n)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(function(e){var r=e.type;e.objs.filter(function(e){if(!e.hasOwnProperty("__indexColor"))return!0;var r=n.colorTracker.lookup(e.__indexColor);return!r||!r.hasOwnProperty("d")||r.d!==e}).forEach(function(e){e.__indexColor=n.colorTracker.register({type:r,d:e})})}),n.forceGraph.graphData(e),n.shadowGraph.graphData(e)},triggerUpdate:!1},backgroundColor:{onChange:function(e,n){n.canvas&&e&&(n.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,n){n.shadowGraph.nodeCanvasObject(e?function(n,r,i){return e(n,n.__indexColor,r,i)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,n){n.shadowGraph.linkCanvasObject(e?function(n,r,i){return e(n,n.__indexColor,r,i)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,n){n.zoom.scaleExtent([e,n.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,n){n.zoom.scaleExtent([n.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,n){n.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},i6),aliases:{stopAnimation:"pauseAnimation"},methods:iV({graph2ScreenCoords:function(e,n,r){var i=rU(e.canvas);return{x:n*i.k+i.x,y:r*i.k+i.y}},screen2GraphCoords:function(e,n,r){var i=rU(e.canvas);return{x:(n-i.x)/i.k,y:(r-i.y)/i.k}},centerAt:function(e,n,r,i){if(!e.canvas)return null;if(void 0!==n||void 0!==r){var o=Object.assign({},void 0!==n?{x:n}:{},void 0!==r?{y:r}:{});return i?new e2.Tween(a()).to(o,i).easing(e2.Easing.Quadratic.Out).onUpdate(s).start():s(o),this}return a();function a(){var n=rU(e.canvas);return{x:(e.width/2-n.x)/n.k,y:(e.height/2-n.y)/n.k}}function s(n){var r=n.x,i=n.y;e.zoom.translateTo(e.zoom.__baseElem,void 0===r?a().x:r,void 0===i?a().y:i),e.needsRedraw=!0}},zoom:function(e,n,r){if(!e.canvas)return null;if(void 0!==n)return r?new e2.Tween({k:i()}).to({k:n},r).easing(e2.Easing.Quadratic.Out).onUpdate(function(e){return o(e.k)}).start():o(n),this;return i();function i(){return rU(e.canvas).k}function o(n){e.zoom.scaleTo(e.zoom.__baseElem,n),e.needsRedraw=!0}},zoomToFit:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length,o=Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];var s=this.getGraphBbox.apply(this,o);if(s){var l={x:(s.x[0]+s.x[1])/2,y:(s.y[0]+s.y[1])/2},c=Math.max(1e-12,Math.min(1e12,(e.width-2*r)/(s.x[1]-s.x[0]),(e.height-2*r)/(s.y[1]-s.y[0])));this.centerAt(l.x,l.y,n),this.zoom(c,n)}return this},getGraphBbox:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=(0,x.default)(e.nodeVal),i=e.graphData.nodes.filter(n).map(function(n){return{x:n.x,y:n.y,r:Math.sqrt(Math.max(0,r(n)||1))*e.nodeRelSize}});return i.length?{x:[(0,r5.Z)(i,function(e){return e.x-e.r}),(0,r6.Z)(i,function(e){return e.x+e.r})],y:[(0,r5.Z)(i,function(e){return e.y-e.r}),(0,r6.Z)(i,function(e){return e.y+e.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},i4),stateInit:function(){return{lastSetZoom:1,zoom:function(){var e,n,r,i=rK,o=rZ,a=rY,s=rW,l=rX,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],h=250,d=n_,f=(0,ng.Z)("start","zoom","end"),p=0,g=10;function m(e){e.property("__zoom",r$).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",T).filter(l).on("touchstart.zoom",O).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,n){return(n=Math.max(c[0],Math.min(c[1],n)))===e.k?e:new rB(n,e.x,e.y)}function y(e,n,r){var i=n[0]-r[0]*e.k,o=n[1]-r[1]*e.k;return i===e.x&&o===e.y?e:new rB(e.k,i,o)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,n,r,i){e.on("start.zoom",function(){x(this,arguments).event(i).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(i).end()}).tween("zoom",function(){var e=arguments,a=x(this,e).event(i),s=o.apply(this,e),l=null==r?b(s):"function"==typeof r?r.apply(this,e):r,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=this.__zoom,h="function"==typeof n?n.apply(this,e):n,f=d(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var n=f(e),r=c/n[2];e=new rB(r,l[0]-n[0]*r,l[1]-n[1]*r)}a.zoom(null,e)}})}function x(e,n,r){return!r&&e.__zooming||new E(e,n)}function E(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,n),this.taps=0}function _(e,...n){if(i.apply(this,arguments)){var r=x(this,n).event(e),o=this.__zoom,l=Math.max(c[0],Math.min(c[1],o.k*Math.pow(2,s.apply(this,arguments)))),h=nk(e);if(r.wheel)(r.mouse[0][0]!==h[0]||r.mouse[0][1]!==h[1])&&(r.mouse[1]=o.invert(r.mouse[0]=h)),clearTimeout(r.wheel);else{if(o.k===l)return;r.mouse=[h,o.invert(h)],nP(this),r.start()}rq(e),r.wheel=setTimeout(function(){r.wheel=null,r.end()},150),r.zoom("mouse",a(y(v(o,l),r.mouse[0],r.mouse[1]),r.extent,u))}}function k(e,...n){if(!r&&i.apply(this,arguments)){var o=e.currentTarget,s=x(this,n,!0).event(e),l=np(e.view).on("mousemove.zoom",function(e){if(rq(e),!s.moved){var n=e.clientX-h,r=e.clientY-d;s.moved=n*n+r*r>p}s.event(e).zoom("mouse",a(y(s.that.__zoom,s.mouse[0]=nk(e,o),s.mouse[1]),s.extent,u))},!0).on("mouseup.zoom",function(e){l.on("mousemove.zoom mouseup.zoom",null),nx(e.view,s.moved),rq(e),s.event(e).end()},!0),c=nk(e,o),h=e.clientX,d=e.clientY;nw(e.view),rG(e),s.mouse=[c,this.__zoom.invert(c)],nP(this),s.start()}}function T(e,...n){if(i.apply(this,arguments)){var r=this.__zoom,s=nk(e.changedTouches?e.changedTouches[0]:e,this),l=r.invert(s),c=r.k*(e.shiftKey?.5:2),d=a(y(v(r,c),s,l),o.apply(this,n),u);rq(e),h>0?np(this).transition().duration(h).call(w,d,s,e):np(this).call(m.transform,d,s,e)}}function O(r,...o){if(i.apply(this,arguments)){var a,s,l,c,u=r.touches,h=u.length,d=x(this,o,r.changedTouches.length===h).event(r);for(rG(r),s=0;s<h;++s)c=[c=nk(l=u[s],this),this.__zoom.invert(c),l.identifier],d.touch0?d.touch1||d.touch0[2]===c[2]||(d.touch1=c,d.taps=0):(d.touch0=c,a=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(d.taps<2&&(n=c[0],e=setTimeout(function(){e=null},500)),nP(this),d.start())}}function C(e,...n){if(this.__zooming){var r,i,o,s,l=x(this,n).event(e),c=e.changedTouches,h=c.length;for(rq(e),r=0;r<h;++r)o=nk(i=c[r],this),l.touch0&&l.touch0[2]===i.identifier?l.touch0[0]=o:l.touch1&&l.touch1[2]===i.identifier&&(l.touch1[0]=o);if(i=l.that.__zoom,l.touch1){var d=l.touch0[0],f=l.touch0[1],p=l.touch1[0],g=l.touch1[1],m=(m=p[0]-d[0])*m+(m=p[1]-d[1])*m,b=(b=g[0]-f[0])*b+(b=g[1]-f[1])*b;i=v(i,Math.sqrt(m/b)),o=[(d[0]+p[0])/2,(d[1]+p[1])/2],s=[(f[0]+g[0])/2,(f[1]+g[1])/2]}else{if(!l.touch0)return;o=l.touch0[0],s=l.touch0[1]}l.zoom("touch",a(y(i,o,s),l.extent,u))}}function A(e,...i){if(this.__zooming){var o,a,s=x(this,i).event(e),l=e.changedTouches,c=l.length;for(rG(e),r&&clearTimeout(r),r=setTimeout(function(){r=null},500),o=0;o<c;++o)a=l[o],s.touch0&&s.touch0[2]===a.identifier?delete s.touch0:s.touch1&&s.touch1[2]===a.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(a=nk(a,this),Math.hypot(n[0]-a[0],n[1]-a[1])<g)){var u=np(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return m.transform=function(e,n,r,i){var o=e.selection?e.selection():e;o.property("__zoom",r$),e!==o?w(e,n,r,i):o.interrupt().each(function(){x(this,arguments).event(i).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()})},m.scaleBy=function(e,n,r,i){m.scaleTo(e,function(){var e=this.__zoom.k,r="function"==typeof n?n.apply(this,arguments):n;return e*r},r,i)},m.scaleTo=function(e,n,r,i){m.transform(e,function(){var e=o.apply(this,arguments),i=this.__zoom,s=null==r?b(e):"function"==typeof r?r.apply(this,arguments):r,l=i.invert(s),c="function"==typeof n?n.apply(this,arguments):n;return a(y(v(i,c),s,l),e,u)},r,i)},m.translateBy=function(e,n,r,i){m.transform(e,function(){return a(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),o.apply(this,arguments),u)},null,i)},m.translateTo=function(e,n,r,i,s){m.transform(e,function(){var e=o.apply(this,arguments),s=this.__zoom,l=null==i?b(e):"function"==typeof i?i.apply(this,arguments):i;return a(rV.translate(l[0],l[1]).scale(s.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof r?-r.apply(this,arguments):-r),e,u)},i,s)},E.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,n){return this.mouse&&"mouse"!==e&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var n=np(this.that).datum();f.call(e,this.that,new rF(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),n)}},m.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:rH(+e),m):s},m.filter=function(e){return arguments.length?(i="function"==typeof e?e:rH(!!e),m):i},m.touchable=function(e){return arguments.length?(l="function"==typeof e?e:rH(!!e),m):l},m.extent=function(e){return arguments.length?(o="function"==typeof e?e:rH([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(c[0]=+e[0],c[1]=+e[1],m):[c[0],c[1]]},m.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],m):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},m.constrain=function(e){return arguments.length?(a=e,m):a},m.duration=function(e){return arguments.length?(h=+e,m):h},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,m):Math.sqrt(p)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}(),forceGraph:new i1,shadowGraph:new i1().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new ia}},init:function(e,n){var r=this;e.innerHTML="";var i=document.createElement("div");i.classList.add("force-graph-container"),i.style.position="relative",e.appendChild(i),n.canvas=document.createElement("canvas"),n.backgroundColor&&(n.canvas.style.background=n.backgroundColor),i.appendChild(n.canvas),n.shadowCanvas=document.createElement("canvas");var o=n.canvas.getContext("2d"),a=n.shadowCanvas.getContext("2d",{willReadFrequently:!0}),s={x:-1e12,y:-1e12},l=function(){var e=null,r=window.devicePixelRatio,i=s.x>0&&s.y>0?a.getImageData(s.x*r,s.y*r,1,1):null;return i&&(e=n.colorTracker.lookup(i.data)),e};np(n.canvas).call((function(){var e,n,r,i,o=r0,a=r1,s=r2,l=r3,c={},u=(0,ng.Z)("start","drag","end"),h=0,d=0;function f(e){e.on("mousedown.drag",p).filter(l).on("touchstart.drag",v).on("touchmove.drag",y,nm).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(s,l){if(!i&&o.call(this,s,l)){var c=w(this,a.call(this,s,l),s,l,"mouse");c&&(np(s.view).on("mousemove.drag",g,nv).on("mouseup.drag",m,nv),nw(s.view),ny(s),r=!1,e=s.clientX,n=s.clientY,c("start",s))}}function g(i){if(nb(i),!r){var o=i.clientX-e,a=i.clientY-n;r=o*o+a*a>d}c.mouse("drag",i)}function m(e){np(e.view).on("mousemove.drag mouseup.drag",null),nx(e.view,r),nb(e),c.mouse("end",e)}function v(e,n){if(o.call(this,e,n)){var r,i,s=e.changedTouches,l=a.call(this,e,n),c=s.length;for(r=0;r<c;++r)(i=w(this,l,e,n,s[r].identifier,s[r]))&&(ny(e),i("start",e,s[r]))}}function y(e){var n,r,i=e.changedTouches,o=i.length;for(n=0;n<o;++n)(r=c[i[n].identifier])&&(nb(e),r("drag",e,i[n]))}function b(e){var n,r,o=e.changedTouches,a=o.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),n=0;n<a;++n)(r=c[o[n].identifier])&&(ny(e),r("end",e,o[n]))}function w(e,n,r,i,o,a){var l,d,p,g=u.copy(),m=nk(a||r,n);if(null!=(p=s.call(e,new rJ("beforestart",{sourceEvent:r,target:f,identifier:o,active:h,x:m[0],y:m[1],dx:0,dy:0,dispatch:g}),i)))return l=p.x-m[0]||0,d=p.y-m[1]||0,function r(a,s,u){var v,y=m;switch(a){case"start":c[o]=r,v=h++;break;case"end":delete c[o],--h;case"drag":m=nk(u||s,n),v=h}g.call(a,e,new rJ(a,{sourceEvent:s,subject:p,target:f,identifier:o,active:v,x:m[0]+l,y:m[1]+d,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:g}),i)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:rQ(!!e),f):o},f.container=function(e){return arguments.length?(a="function"==typeof e?e:rQ(e),f):a},f.subject=function(e){return arguments.length?(s="function"==typeof e?e:rQ(e),f):s},f.touchable=function(e){return arguments.length?(l="function"==typeof e?e:rQ(!!e),f):l},f.on=function(){var e=u.on.apply(u,arguments);return e===u?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f})().subject(function(){if(!n.enableNodeDrag)return null;var e=l();return e&&"Node"===e.type?e.d:null}).on("start",function(e){var r=e.subject;r.__initialDragPos={x:r.x,y:r.y,fx:r.fx,fy:r.fy},e.active||(r.fx=r.x,r.fy=r.y),n.canvas.classList.add("grabbable")}).on("drag",function(e){var r=e.subject,i=r.__initialDragPos,o=rU(n.canvas).k,a={x:i.x+(e.x-i.x)/o-r.x,y:i.y+(e.y-i.y)/o-r.y};["x","y"].forEach(function(n){return r["f".concat(n)]=r[n]=i[n]+(e[n]-i[n])/o}),n.forceGraph.d3AlphaTarget(.3).resetCountdown(),n.isPointerDragging=!0,r.__dragged=!0,n.onNodeDrag(r,a)}).on("end",function(e){var r=e.subject,i=r.__initialDragPos,o={x:r.x-i.x,y:r.y-i.y};void 0===i.fx&&(r.fx=void 0),void 0===i.fy&&(r.fy=void 0),delete r.__initialDragPos,n.forceGraph.d3AlphaTarget()&&n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.canvas.classList.remove("grabbable"),n.isPointerDragging=!1,r.__dragged&&(delete r.__dragged,n.onNodeDragEnd(r,o))})),n.zoom(n.zoom.__baseElem=np(n.canvas)),n.zoom.__baseElem.on("dblclick.zoom",null),n.zoom.filter(function(e){return!e.button&&n.enableZoomPanInteraction&&(n.enableZoomInteraction||"wheel"!==e.type)&&(n.enablePanInteraction||"wheel"===e.type)}).on("zoom",function(e){var i=e.transform;[o,a].forEach(function(e){i9(e),e.translate(i.x,i.y),e.scale(i.k,i.k)}),n.onZoom&&n.onZoom(iV(iV({},i),r.centerAt())),n.needsRedraw=!0}).on("end",function(e){return n.onZoomEnd&&n.onZoomEnd(iV(iV({},e.transform),r.centerAt()))}),i8(n),n.forceGraph.onNeedsRedraw(function(){return n.needsRedraw=!0}).onFinishUpdate(function(){rU(n.canvas).k===n.lastSetZoom&&n.graphData.nodes.length&&(n.zoom.scaleTo(n.zoom.__baseElem,n.lastSetZoom=4/Math.cbrt(n.graphData.nodes.length)),n.needsRedraw=!0)});var c=document.createElement("div");c.classList.add("graph-tooltip"),i.appendChild(c),["pointermove","pointerdown"].forEach(function(e){return i.addEventListener(e,function(r){"pointerdown"===e&&(n.isPointerPressed=!0,n.pointerDownEvent=r),!n.isPointerDragging&&"pointermove"===r.type&&n.onBackgroundClick&&(r.pressure>0||n.isPointerPressed)&&("touch"!==r.pointerType||void 0===r.movementX||[r.movementX,r.movementY].some(function(e){return Math.abs(e)>1}))&&(n.isPointerDragging=!0);var o,a,l,u=(o=i.getBoundingClientRect(),a=window.pageXOffset||document.documentElement.scrollLeft,l=window.pageYOffset||document.documentElement.scrollTop,{top:o.top+l,left:o.left+a});s.x=r.pageX-u.left,s.y=r.pageY-u.top,c.style.top="".concat(s.y,"px"),c.style.left="".concat(s.x,"px"),c.style.transform="translate(-".concat(s.x/n.width*100,"%, ").concat(n.height-s.y<100?"calc(-100% - 8px)":"21px",")")},{passive:!0})}),i.addEventListener("pointerup",function(e){if(n.isPointerPressed=!1,n.isPointerDragging){n.isPointerDragging=!1;return}var r=[e,n.pointerDownEvent];requestAnimationFrame(function(){if(0===e.button){if(n.hoverObj){var i=n["on".concat(n.hoverObj.type,"Click")];i&&i.apply(void 0,[n.hoverObj.d].concat(r))}else n.onBackgroundClick&&n.onBackgroundClick.apply(n,r)}if(2===e.button){if(n.hoverObj){var o=n["on".concat(n.hoverObj.type,"RightClick")];o&&o.apply(void 0,[n.hoverObj.d].concat(r))}else n.onBackgroundRightClick&&n.onBackgroundRightClick.apply(n,r)}})},{passive:!0}),i.addEventListener("contextmenu",function(e){return!n.onBackgroundRightClick&&!n.onNodeRightClick&&!n.onLinkRightClick||(e.preventDefault(),!1)}),n.forceGraph(o),n.shadowGraph(a);var u=r9(function(){i7(a,n.width,n.height),n.shadowGraph.linkWidth(function(e){return(0,x.default)(n.linkWidth)(e)+n.linkHoverPrecision});var e=rU(n.canvas);n.shadowGraph.globalScale(e.k).tickFrame()},800);n.flushShadowCanvas=u.flush,(this._animationCycle=function e(){var r=!n.autoPauseRedraw||!!n.needsRedraw||n.forceGraph.isEngineRunning()||n.graphData.links.some(function(e){return e.__photons&&e.__photons.length});if(n.needsRedraw=!1,n.enablePointerInteraction){var i=n.isPointerDragging?null:l();if(i!==n.hoverObj){var a=n.hoverObj,s=a?a.type:null,h=i?i.type:null;if(s&&s!==h){var d=n["on".concat(s,"Hover")];d&&d(null,a.d)}if(h){var f=n["on".concat(h,"Hover")];f&&f(i.d,s===h?a.d:null)}var p=i&&(0,x.default)(n["".concat(i.type.toLowerCase(),"Label")])(i.d)||"";c.style.visibility=p?"visible":"hidden",c.innerHTML=p,n.canvas.classList[i&&n["on".concat(h,"Click")]||!i&&n.onBackgroundClick?"add":"remove"]("clickable"),n.hoverObj=i}r&&u()}if(r){i7(o,n.width,n.height);var g=rU(n.canvas).k;n.onRenderFramePre&&n.onRenderFramePre(o,g),n.forceGraph.globalScale(g).tickFrame(),n.onRenderFramePost&&n.onRenderFramePost(o,g)}e2.update(),n.animationFrameRequestId=requestAnimationFrame(e)})()},update:function(e){}}),ot={width:en.number,height:en.number,graphData:en.shape({nodes:en.arrayOf(en.object).isRequired,links:en.arrayOf(en.object).isRequired}),backgroundColor:en.string,nodeRelSize:en.number,nodeId:en.string,nodeLabel:en.oneOfType([en.string,en.func]),nodeVal:en.oneOfType([en.number,en.string,en.func]),nodeVisibility:en.oneOfType([en.bool,en.string,en.func]),nodeColor:en.oneOfType([en.string,en.func]),nodeAutoColorBy:en.oneOfType([en.string,en.func]),onNodeHover:en.func,onNodeClick:en.func,linkSource:en.string,linkTarget:en.string,linkLabel:en.oneOfType([en.string,en.func]),linkVisibility:en.oneOfType([en.bool,en.string,en.func]),linkColor:en.oneOfType([en.string,en.func]),linkAutoColorBy:en.oneOfType([en.string,en.func]),linkWidth:en.oneOfType([en.number,en.string,en.func]),linkCurvature:en.oneOfType([en.number,en.string,en.func]),linkDirectionalArrowLength:en.oneOfType([en.number,en.string,en.func]),linkDirectionalArrowColor:en.oneOfType([en.string,en.func]),linkDirectionalArrowRelPos:en.oneOfType([en.number,en.string,en.func]),linkDirectionalParticles:en.oneOfType([en.number,en.string,en.func]),linkDirectionalParticleSpeed:en.oneOfType([en.number,en.string,en.func]),linkDirectionalParticleWidth:en.oneOfType([en.number,en.string,en.func]),linkDirectionalParticleColor:en.oneOfType([en.string,en.func]),onLinkHover:en.func,onLinkClick:en.func,dagMode:en.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:en.number,dagNodeFilter:en.func,onDagError:en.func,d3AlphaMin:en.number,d3AlphaDecay:en.number,d3VelocityDecay:en.number,warmupTicks:en.number,cooldownTicks:en.number,cooldownTime:en.number,onEngineTick:en.func,onEngineStop:en.func,getGraphBbox:en.func},on={zoomToFit:en.func,onNodeRightClick:en.func,onNodeDrag:en.func,onNodeDragEnd:en.func,onLinkRightClick:en.func,linkHoverPrecision:en.number,onBackgroundClick:en.func,onBackgroundRightClick:en.func,enablePointerInteraction:en.bool,enableNodeDrag:en.bool},or={showNavInfo:en.bool,nodeOpacity:en.number,nodeResolution:en.number,nodeThreeObject:en.oneOfType([en.object,en.string,en.func]),nodeThreeObjectExtend:en.oneOfType([en.bool,en.string,en.func]),linkOpacity:en.number,linkResolution:en.number,linkCurveRotation:en.oneOfType([en.number,en.string,en.func]),linkMaterial:en.oneOfType([en.object,en.string,en.func]),linkThreeObject:en.oneOfType([en.object,en.string,en.func]),linkThreeObjectExtend:en.oneOfType([en.bool,en.string,en.func]),linkPositionUpdate:en.func,linkDirectionalArrowResolution:en.number,linkDirectionalParticleResolution:en.number,forceEngine:en.oneOf(["d3","ngraph"]),ngraphPhysics:en.object,numDimensions:en.oneOf([1,2,3])},oi=Object.assign({},ot,on,{linkLineDash:en.oneOfType([en.arrayOf(en.number),en.string,en.func]),nodeCanvasObjectMode:en.oneOfType([en.string,en.func]),nodeCanvasObject:en.func,nodePointerAreaPaint:en.func,linkCanvasObjectMode:en.oneOfType([en.string,en.func]),linkCanvasObject:en.func,linkPointerAreaPaint:en.func,autoPauseRedraw:en.bool,minZoom:en.number,maxZoom:en.number,enableZoomInteraction:en.bool,enablePanInteraction:en.bool,onZoom:en.func,onZoomEnd:en.func,onRenderFramePre:en.func,onRenderFramePost:en.func}),oo=Object.assign({},ot,on,or,{enableNavigationControls:en.bool,controlType:en.oneOf(["trackball","orbit","fly"]),rendererConfig:en.object,extraRenderers:en.arrayOf(en.shape({render:en.func.isRequired}))}),oa=Object.assign({},ot,or,{nodeDesc:en.oneOfType([en.string,en.func]),linkDesc:en.oneOfType([en.string,en.func])}),os=Object.assign({},ot,or,{markerAttrs:en.object,yOffset:en.number,glScale:en.number});let ol=y(et,{methodNames:["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"]});ol.displayName="ForceGraphVR",ol.propTypes=oa;let oc=y(eu,{methodNames:["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"],initPropNames:["markerAttrs"]});oc.displayName="ForceGraphAR",oc.propTypes=os;let ou=y(th,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});ou.displayName="ForceGraph3D",ou.propTypes=oo;let oh=y(oe,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});oh.displayName="ForceGraph2D",oh.propTypes=oi},2752:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return et}});var i=r(9477),o=r(9330),a=r(6248),s=r(3581),l=r(4903),c=r(8376),u=r(4736),h=r(6505),d=r(2650),f=r(8710),p=r(8398),g=r(8776),m=r(3780);function v(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function y(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:String(i))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function b(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||x(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,n){if(e){if("string"==typeof e)return E(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,n)}}function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}var _=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"],k=r(9843),T=r(6668),O=r(7234);function C(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function A(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?C(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,B(i.key),i)}}function R(e,n,r){return(n=B(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,n){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function N(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function D(e,n,r){return(D=N()?Reflect.construct.bind():function(e,n,r){var i=[null];i.push.apply(i,n);var o=new(Function.bind.apply(e,i));return r&&P(o,r.prototype),o}).apply(null,arguments)}function L(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||H(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,n){if(e){if("string"==typeof e)return F(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,n)}}function F(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function B(e){var n=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:String(n)}var V=function e(n){n instanceof Array?n.forEach(e):(n.map&&n.map.dispose(),n.dispose())},U=function e(n){n.geometry&&n.geometry.dispose(),n.material&&V(n.material),n.texture&&n.texture.dispose(),n.children&&n.children.forEach(e)},G=function(e){for(;e.children.length;){var n=e.children[0];e.remove(n),U(n)}},q=["objFilter"];function K(e,n){var r,i,o,a,s,l,c,u,h,d,f,p,g,x,E,k,T,O,C,S,M,R,j,P,N,D,L,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},z=I.objFilter,H=function(e,n){if(null==e)return{};var r,i,o=function(e,n){if(null==e)return{};var r,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(I,q);return i=n.children.filter(void 0===z?function(){return!0}:z),o=function(e){n.remove(e),G(e)},l=void 0===(s=(a=A({objBindAttr:"__threeObj"},H)).createObj)?function(e){return{}}:s,u=void 0===(c=a.updateObj)?function(e,n){}:c,d=void 0===(h=a.exitObj)?function(e){}:h,p=void 0===(f=a.objBindAttr)?"__obj":f,T=void 0===(k=(E=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?v(Object(r),!0).forEach(function(n){y(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}({objBindAttr:p,dataBindAttr:x=void 0===(g=a.dataBindAttr)?"__data":g},function(e,n){if(null==e)return{};var r,i,o=function(e,n){if(null==e)return{};var r,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(a,_))).objBindAttr)?"__obj":k,C=void 0===(O=E.dataBindAttr)?"__data":O,S=E.idAccessor,M=E.purge,R=function(e){return e.hasOwnProperty(C)},j=i.filter(function(e){return!R(e)}),P=i.filter(R).map(function(e){return e[C]}),(N=void 0!==M&&M?{enter:e,exit:P,update:[]}:function(e,n,r){var i={enter:[],update:[],exit:[]};if(r){var o=(0,m.Z)(e,r,!1),a=(0,m.Z)(n,r,!1);Object.entries(Object.assign({},o,a)).forEach(function(e){var n=b(e,2),r=n[0],s=n[1],l=o.hasOwnProperty(r)?a.hasOwnProperty(r)?"update":"exit":"enter";i[l].push("update"===l?[o[r],a[r]]:s)})}else{var s=new Set(e),l=new Set(n);new Set([].concat(w(s),w(l))).forEach(function(e){var n=s.has(e)?l.has(e)?"update":"exit":"enter";i[n].push("update"===n?[e,e]:e)})}return i}(P,e,S)).update=N.update.map(function(e){var n=b(e,2),r=n[0],i=n[1];return r!==i&&(i[T]=r[T],i[T][C]=i),i}),N.exit=N.exit.concat(j.map(function(e){return y({},T,e)})),D=N.enter,L=N.update,N.exit.forEach(function(e){var n=e[p];delete e[p],d(n),o(n)}),r=[],D.forEach(function(e){var n=l(e);n&&(n[x]=e,e[p]=n,r.push(n))}),void(function(e){e.forEach(function(e){var n=e[p];n&&(n[x]=e,u(n,e))})}([].concat(w(D),w(L))),r.forEach(function(e){return n.add(e)}))}var Z=function(e){return isNaN(e)?parseInt((0,O.Z)(e).toHex(),16):e},$=function(e){return isNaN(e)?(0,O.Z)(e).getAlpha():1},W=(0,k.Z)(T.Z);function X(e,n,r){n&&"string"==typeof r&&e.filter(function(e){return!e[r]}).forEach(function(e){e[r]=W(n(e))})}var Y=window.THREE?window.THREE:{Group:i.Group,Mesh:i.Mesh,MeshLambertMaterial:i.MeshLambertMaterial,Color:i.Color,BufferGeometry:i.BufferGeometry,BufferAttribute:i.BufferAttribute,Matrix4:i.Matrix4,Vector3:i.Vector3,SphereGeometry:i.SphereGeometry,CylinderGeometry:i.CylinderGeometry,TubeGeometry:i.TubeGeometry,ConeGeometry:i.ConeGeometry,Line:i.Line,LineBasicMaterial:i.LineBasicMaterial,QuadraticBezierCurve3:i.QuadraticBezierCurve3,CubicBezierCurve3:i.CubicBezierCurve3,Box3:i.Box3},Q={graph:u,forcelayout:h},J=new Y.BufferGeometry().setAttribute?"setAttribute":"addAttribute",ee=new Y.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",et=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=function(n){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&P(e,n)}(l,n);var i,o,a,s=(i=N(),function(){var e,n=j(l);if(i){var r=j(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return L(e)}(this,e)});function l(){var n;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,l);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=s.call.apply(s,[this].concat(o))).__kapsuleInstance=e().apply(void 0,[].concat(z(r?[L(n)]:[]),o)),n}return o&&M(l.prototype,o),a&&M(l,a),Object.defineProperty(l,"prototype",{writable:!1}),l}(n);return Object.keys(e()).forEach(function(e){return i.prototype[e]=function(){var n,r=(n=this.__kapsuleInstance)[e].apply(n,arguments);return r===this.__kapsuleInstance?this:r}}),i}((0,d.Z)({props:{jsonUrl:{onChange:function(e,n){var r=this;e&&!n.fetchingJson&&(n.fetchingJson=!0,n.onLoading(),fetch(e).then(function(e){return e.json()}).then(function(e){n.fetchingJson=!1,n.onFinishLoading(e),r.graphData(e)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,n){var r=n.d3ForceLayout.force("charge");function i(e,n){e.forEach(function(e){delete e[n],delete e["v".concat(n)]})}r&&r.strength(e>2?-60:-30),e<3&&i(n.graphData.nodes,"z"),e<2&&i(n.graphData.nodes,"y")}},dagMode:{onChange:function(e,n){e||"d3"!==n.forceEngine||(n.graphData.nodes||[]).forEach(function(e){return e.fx=e.fy=e.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,n,r){return void 0===r?e.d3ForceLayout.force(n):(e.d3ForceLayout.force(n,r),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var n,r,i,o,a,s,l,c,u,h="ngraph"!==e.forceEngine;return e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||h&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[h?"tick":"step"](),e.onEngineTick()),n=(0,f.default)(e.nodeThreeObjectExtend),e.graphData.nodes.forEach(function(r){var i=r.__threeObj;if(i){var o=h?r:e.layout.getNodePosition(r[e.nodeId]),a=n(r);e.nodePositionUpdate&&e.nodePositionUpdate(a?i.children[0]:i,{x:o.x,y:o.y,z:o.z},r)&&!a||(i.position.x=o.x,i.position.y=o.y||0,i.position.z=o.z||0)}}),r=(0,f.default)(e.linkWidth),i=(0,f.default)(e.linkCurvature),o=(0,f.default)(e.linkCurveRotation),a=(0,f.default)(e.linkThreeObjectExtend),e.graphData.links.forEach(function(n){var s=n.__lineObj;if(s){var l=h?n:e.layout.getLinkPosition(e.layout.graph.getLink(n.source,n.target).id),c=l[h?"source":"from"],u=l[h?"target":"to"];if(c&&u&&c.hasOwnProperty("x")&&u.hasOwnProperty("x")){(function(n){var r=h?n:e.layout.getLinkPosition(e.layout.graph.getLink(n.source,n.target).id),a=r[h?"source":"from"],s=r[h?"target":"to"];if(a&&s&&a.hasOwnProperty("x")&&s.hasOwnProperty("x")){var l=i(n);if(l){var c,u=new Y.Vector3(a.x,a.y||0,a.z||0),d=new Y.Vector3(s.x,s.y||0,s.z||0),f=u.distanceTo(d),p=o(n);if(f>0){var g=s.x-a.x,m=s.y-a.y||0,v=new Y.Vector3().subVectors(d,u),y=v.clone().multiplyScalar(l).cross(0!==g||0!==m?new Y.Vector3(0,0,1):new Y.Vector3(0,1,0)).applyAxisAngle(v.normalize(),p).add(new Y.Vector3().addVectors(u,d).divideScalar(2));c=new Y.QuadraticBezierCurve3(u,y,d)}else{var b=70*l,w=-p,x=w+Math.PI/2;c=new Y.CubicBezierCurve3(u,new Y.Vector3(b*Math.cos(x),b*Math.sin(x),0).add(u),new Y.Vector3(b*Math.cos(w),b*Math.sin(w),0).add(u),d)}n.__curve=c}else n.__curve=null}})(n);var d=a(n);if(e.linkPositionUpdate&&e.linkPositionUpdate(d?s.children[1]:s,{start:{x:c.x,y:c.y,z:c.z},end:{x:u.x,y:u.y,z:u.z}},n)&&!d)return;var f=n.__curve,p=s.children.length?s.children[0]:s;if("Line"===p.type){if(f)p.geometry.setFromPoints(f.getPoints(30));else{var g=p.geometry.getAttribute("position");g&&g.array&&6===g.array.length||p.geometry[J]("position",g=new Y.BufferAttribute(new Float32Array(6),3)),g.array[0]=c.x,g.array[1]=c.y||0,g.array[2]=c.z||0,g.array[3]=u.x,g.array[4]=u.y||0,g.array[5]=u.z||0,g.needsUpdate=!0}p.geometry.computeBoundingSphere()}else if("Mesh"===p.type){if(f){p.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(p.position.set(0,0,0),p.rotation.set(0,0,0),p.scale.set(1,1,1));var m=Math.ceil(10*r(n))/10,v=new Y.TubeGeometry(f,30,m/2,e.linkResolution,!1);p.geometry.dispose(),p.geometry=v}else{if(!p.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var y=Math.ceil(10*r(n))/10/2,b=new Y.CylinderGeometry(y,y,1,e.linkResolution,1,!1);b[ee](new Y.Matrix4().makeTranslation(0,.5,0)),b[ee](new Y.Matrix4().makeRotationX(Math.PI/2)),p.geometry.dispose(),p.geometry=b}var w=new Y.Vector3(c.x,c.y||0,c.z||0),x=new Y.Vector3(u.x,u.y||0,u.z||0),E=w.distanceTo(x);p.position.x=w.x,p.position.y=w.y,p.position.z=w.z,p.scale.z=E,p.parent.localToWorld(x),p.lookAt(x)}}}}})),s=(0,f.default)(e.linkDirectionalArrowRelPos),l=(0,f.default)(e.linkDirectionalArrowLength),c=(0,f.default)(e.nodeVal),e.graphData.links.forEach(function(n){var r=n.__arrowObj;if(r){var i=h?n:e.layout.getLinkPosition(e.layout.graph.getLink(n.source,n.target).id),o=i[h?"source":"from"],a=i[h?"target":"to"];if(o&&a&&o.hasOwnProperty("x")&&a.hasOwnProperty("x")){var u=Math.cbrt(Math.max(0,c(o)||1))*e.nodeRelSize,d=Math.cbrt(Math.max(0,c(a)||1))*e.nodeRelSize,f=l(n),p=s(n),g=n.__curve?function(e){return n.__curve.getPoint(e)}:function(e){var n=function(e,n,r,i){return n[e]+(r[e]-n[e])*i||0};return{x:n("x",o,a,e),y:n("y",o,a,e),z:n("z",o,a,e)}},m=n.__curve?n.__curve.getLength():Math.sqrt(["x","y","z"].map(function(e){return Math.pow((a[e]||0)-(o[e]||0),2)}).reduce(function(e,n){return e+n},0)),v=u+f+(m-u-d-f)*p,y=g(v/m),b=g((v-f)/m);["x","y","z"].forEach(function(e){return r.position[e]=b[e]});var w=D(Y.Vector3,z(["x","y","z"].map(function(e){return y[e]})));r.parent.localToWorld(w),r.lookAt(w)}}}),u=(0,f.default)(e.linkDirectionalParticleSpeed),e.graphData.links.forEach(function(n){var r=n.__photonsObj&&n.__photonsObj.children,i=n.__singleHopPhotonsObj&&n.__singleHopPhotonsObj.children;if(i&&i.length||r&&r.length){var o=h?n:e.layout.getLinkPosition(e.layout.graph.getLink(n.source,n.target).id),a=o[h?"source":"from"],s=o[h?"target":"to"];if(a&&s&&a.hasOwnProperty("x")&&s.hasOwnProperty("x")){var l=u(n),c=n.__curve?function(e){return n.__curve.getPoint(e)}:function(e){var n=function(e,n,r,i){return n[e]+(r[e]-n[e])*i||0};return{x:n("x",a,s,e),y:n("y",a,s,e),z:n("z",a,s,e)}};[].concat(z(r||[]),z(i||[])).forEach(function(e,n){var i="singleHopPhotons"===e.parent.__linkThreeObjType;if(e.hasOwnProperty("__progressRatio")||(e.__progressRatio=i?0:n/r.length),e.__progressRatio+=l,e.__progressRatio>=1){if(i){e.parent.remove(e),G(e);return}e.__progressRatio=e.__progressRatio%1}var o=c(e.__progressRatio);["x","y","z"].forEach(function(n){return e.position[n]=o[n]})})}}}),this},emitParticle:function(e,n){if(n&&e.graphData.links.includes(n)){if(!n.__singleHopPhotonsObj){var r=new Y.Group;r.__linkThreeObjType="singleHopPhotons",n.__singleHopPhotonsObj=r,e.graphScene.add(r)}var i=Math.ceil(10*(0,f.default)(e.linkDirectionalParticleWidth)(n))/10/2,o=e.linkDirectionalParticleResolution,a=new Y.SphereGeometry(i,o,o),s=(0,f.default)(e.linkColor),l=(0,f.default)(e.linkDirectionalParticleColor)(n)||s(n)||"#f0f0f0",c=new Y.Color(Z(l)),u=3*e.linkOpacity,h=new Y.MeshLambertMaterial({color:c,transparent:!0,opacity:u});n.__singleHopPhotonsObj.add(new Y.Mesh(a,h))}return this},getGraphBbox:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!e.initialised)return null;var r=function e(r){var i=[];if(r.geometry){r.geometry.computeBoundingBox();var o=new Y.Box3;o.copy(r.geometry.boundingBox).applyMatrix4(r.matrixWorld),i.push(o)}return i.concat.apply(i,z((r.children||[]).filter(function(e){return!e.hasOwnProperty("__graphObjType")||"node"===e.__graphObjType&&n(e.__data)}).map(e)))}(e.graphScene);return r.length?Object.assign.apply(Object,z(["x","y","z"].map(function(e){return R({},e,[(0,p.Z)(r,function(n){return n.min[e]}),(0,g.Z)(r,function(n){return n.max[e]})])}))):null}},stateInit:function(){return{d3ForceLayout:(0,o.Z)().force("link",(0,a.Z)()).force("charge",(0,s.Z)()).force("center",(0,l.Z)()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.graphScene=e},update:function(e,n){var r=function(e){return e.some(function(e){return n.hasOwnProperty(e)})};if(e.engineRunning=!1,e.onUpdate(),null!==e.nodeAutoColorBy&&r(["nodeAutoColorBy","graphData","nodeColor"])&&X(e.graphData.nodes,(0,f.default)(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&r(["linkAutoColorBy","graphData","linkColor"])&&X(e.graphData.links,(0,f.default)(e.linkAutoColorBy),e.linkColor),e._flushObjects||r(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var i=(0,f.default)(e.nodeThreeObject),o=(0,f.default)(e.nodeThreeObjectExtend),a=(0,f.default)(e.nodeVal),s=(0,f.default)(e.nodeColor),l=(0,f.default)(e.nodeVisibility),u={},h={};K(e.graphData.nodes.filter(l),e.graphScene,{purge:e._flushObjects||r(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(e){return"node"===e.__graphObjType},createObj:function(n){var r,a=i(n),s=o(n);return a&&e.nodeThreeObject===a&&(a=a.clone()),a&&!s?r=a:((r=new Y.Mesh).__graphDefaultObj=!0,a&&s&&r.add(a)),r.__graphObjType="node",r},updateObj:function(n,r){if(n.__graphDefaultObj){var i=a(r)||1,o=Math.cbrt(i)*e.nodeRelSize,l=e.nodeResolution;n.geometry.type.match(/^Sphere(Buffer)?Geometry$/)&&n.geometry.parameters.radius===o&&n.geometry.parameters.widthSegments===l||(u.hasOwnProperty(i)||(u[i]=new Y.SphereGeometry(o,l,l)),n.geometry.dispose(),n.geometry=u[i]);var c=s(r),d=new Y.Color(Z(c||"#ffffaa")),f=e.nodeOpacity*$(c);"MeshLambertMaterial"===n.material.type&&n.material.color.equals(d)&&n.material.opacity===f||(h.hasOwnProperty(c)||(h[c]=new Y.MeshLambertMaterial({color:d,transparent:!0,opacity:f})),n.material.dispose(),n.material=h[c])}}})}if(e._flushObjects||r(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var d=(0,f.default)(e.linkThreeObject),p=(0,f.default)(e.linkThreeObjectExtend),g=(0,f.default)(e.linkMaterial),m=(0,f.default)(e.linkVisibility),v=(0,f.default)(e.linkColor),y=(0,f.default)(e.linkWidth),b={},w={},x={},E=e.graphData.links.filter(m);if(K(E,e.graphScene,{objBindAttr:"__lineObj",purge:e._flushObjects||r(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(e){return"link"===e.__graphObjType},exitObj:function(e){var n=e.__data&&e.__data.__singleHopPhotonsObj;n&&(n.parent.remove(n),G(n),delete e.__data.__singleHopPhotonsObj)},createObj:function(n){var r,i,o=d(n),a=p(n);if(o&&e.linkThreeObject===o&&(o=o.clone()),!o||a){if(y(n))r=new Y.Mesh;else{var s=new Y.BufferGeometry;s[J]("position",new Y.BufferAttribute(new Float32Array(6),3)),r=new Y.Line(s)}}return o?a?((i=new Y.Group).__graphDefaultObj=!0,i.add(r),i.add(o)):i=o:(i=r).__graphDefaultObj=!0,i.renderOrder=10,i.__graphObjType="link",i},updateObj:function(n,r){if(n.__graphDefaultObj){var i=n.children.length?n.children[0]:n,o=Math.ceil(10*y(r))/10,a=!!o;if(a){var s=o/2,l=e.linkResolution;if(!i.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||i.geometry.parameters.radiusTop!==s||i.geometry.parameters.radialSegments!==l){if(!b.hasOwnProperty(o)){var c=new Y.CylinderGeometry(s,s,1,l,1,!1);c[ee](new Y.Matrix4().makeTranslation(0,.5,0)),c[ee](new Y.Matrix4().makeRotationX(Math.PI/2)),b[o]=c}i.geometry.dispose(),i.geometry=b[o]}}var u=g(r);if(u)i.material=u;else{var h=v(r),d=new Y.Color(Z(h||"#f0f0f0")),f=e.linkOpacity*$(h),p=a?"MeshLambertMaterial":"LineBasicMaterial";if(i.material.type!==p||!i.material.color.equals(d)||i.material.opacity!==f){var m=a?w:x;m.hasOwnProperty(h)||(m[h]=new Y[p]({color:d,transparent:f<1,opacity:f,depthWrite:f>=1})),i.material.dispose(),i.material=m[h]}}}}}),e.linkDirectionalArrowLength||n.hasOwnProperty("linkDirectionalArrowLength")){var _=(0,f.default)(e.linkDirectionalArrowLength),k=(0,f.default)(e.linkDirectionalArrowColor);K(E.filter(_),e.graphScene,{objBindAttr:"__arrowObj",objFilter:function(e){return"arrow"===e.__linkThreeObjType},createObj:function(){var e=new Y.Mesh(void 0,new Y.MeshLambertMaterial({transparent:!0}));return e.__linkThreeObjType="arrow",e},updateObj:function(n,r){var i=_(r),o=e.linkDirectionalArrowResolution;if(!n.geometry.type.match(/^Cone(Buffer)?Geometry$/)||n.geometry.parameters.height!==i||n.geometry.parameters.radialSegments!==o){var a=new Y.ConeGeometry(.25*i,i,o);a.translate(0,i/2,0),a.rotateX(Math.PI/2),n.geometry.dispose(),n.geometry=a}var s=k(r)||v(r)||"#f0f0f0";n.material.color=new Y.Color(Z(s)),n.material.opacity=3*e.linkOpacity*$(s)}})}if(e.linkDirectionalParticles||n.hasOwnProperty("linkDirectionalParticles")){var T=(0,f.default)(e.linkDirectionalParticles),O=(0,f.default)(e.linkDirectionalParticleWidth),C=(0,f.default)(e.linkDirectionalParticleColor),M={},j={};K(E.filter(T),e.graphScene,{objBindAttr:"__photonsObj",objFilter:function(e){return"photons"===e.__linkThreeObjType},createObj:function(){var e=new Y.Group;return e.__linkThreeObjType="photons",e},updateObj:function(n,r){var i,o,a=Math.round(Math.abs(T(r))),s=!!n.children.length&&n.children[0],l=Math.ceil(10*O(r))/10/2,c=e.linkDirectionalParticleResolution;s&&s.geometry.parameters.radius===l&&s.geometry.parameters.widthSegments===c?i=s.geometry:(j.hasOwnProperty(l)||(j[l]=new Y.SphereGeometry(l,c,c)),i=j[l],s&&s.geometry.dispose());var u=C(r)||v(r)||"#f0f0f0",h=new Y.Color(Z(u)),d=3*e.linkOpacity;s&&s.material.color.equals(h)&&s.material.opacity===d?o=s.material:(M.hasOwnProperty(u)||(M[u]=new Y.MeshLambertMaterial({color:h,transparent:!0,opacity:d})),o=M[u],s&&s.material.dispose()),K(z(Array(a)).map(function(e,n){return{idx:n}}),n,{idAccessor:function(e){return e.idx},createObj:function(){return new Y.Mesh(i,o)},updateObj:function(e){e.geometry=i,e.material=o}})}})}}if(e._flushObjects=!1,r(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(n){n.source=n[e.linkSource],n.target=n[e.linkTarget]});var P,N="ngraph"!==e.forceEngine;if(N){(P=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var D=e.d3ForceLayout.force("link");D&&D.id(function(n){return n[e.nodeId]}).links(e.graphData.links);var L=e.dagMode&&function(e,n){var r=e.nodes,i=e.links,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.nodeFilter,s=void 0===a?function(){return!0}:a,l=o.onLoopError,c=void 0===l?function(e){throw"Invalid DAG structure! Found cycle in node path: ".concat(e.join(" -> "),".")}:l,u={};r.forEach(function(e){return u[n(e)]={data:e,out:[],depth:-1,skip:!s(e)}}),i.forEach(function(e){var r=e.source,i=e.target,o=c(r),a=c(i);if(!u.hasOwnProperty(o))throw"Missing source node with id: ".concat(o);if(!u.hasOwnProperty(a))throw"Missing target node with id: ".concat(a);var s=u[o],l=u[a];function c(e){return"object"===S(e)?n(e):e}s.out.push(l)});var h=[];return function e(r){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=0,s=r.length;a<s;a++)if("continue"===function(){var s=r[a];if(-1!==i.indexOf(s)){var l=[].concat(z(i.slice(i.indexOf(s))),[s]).map(function(e){return n(e.data)});return h.some(function(e){return e.length===l.length&&e.every(function(e,n){return e===l[n]})})||(h.push(l),c(l)),"continue"}o>s.depth&&(s.depth=o,e(s.out,[].concat(z(i),[s]),o+(s.skip?0:1)))}())continue}(Object.values(u)),Object.assign.apply(Object,[{}].concat(z(Object.entries(u).filter(function(e){return!I(e,2)[1].skip}).map(function(e){var n=I(e,2);return R({},n[0],n[1].depth)}))))}(e.graphData,function(n){return n[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),H=Math.max.apply(Math,z(Object.values(L||[]))),F=e.dagLevelDistance||e.graphData.nodes.length/(H||1)*2*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(e.dagMode){var B=function(n,r){return function(i){return n?(L[i[e.nodeId]]-H/2)*F*(r?-1:1):void 0}},V=B(-1!==["lr","rl"].indexOf(e.dagMode),"rl"===e.dagMode),U=B(-1!==["td","bu"].indexOf(e.dagMode),"td"===e.dagMode),q=B(-1!==["zin","zout"].indexOf(e.dagMode),"zout"===e.dagMode);e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(e){e.fx=V(e),e.fy=U(e),e.fz=q(e)})}e.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?(0,c.Z)(function(n){var r=L[n[e.nodeId]]||-1;return("radialin"===e.dagMode?H-r:r)*F}).strength(function(n){return e.dagNodeFilter(n)?1:0}):null)}else{var W=Q.graph();e.graphData.nodes.forEach(function(n){W.addNode(n[e.nodeId])}),e.graphData.links.forEach(function(e){W.addLink(e.source,e.target)}),(P=Q.forcelayout(W,A({dimensions:e.numDimensions},e.ngraphPhysics))).graph=W}for(var et=0;et<e.warmupTicks&&!(N&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);et++)P[N?"tick":"step"]();e.layout=P,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}}),(window.THREE?window.THREE:{Group:i.Group}).Group,!0)},7234:function(e,n,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(n,{Z:function(){return u}});var o,a,s,l=/^\s+/,c=/\s+$/;function u(e,n){if(n=n||{},(e=e||"")instanceof u)return e;if(!(this instanceof u))return new u(e,n);var r,o,a,s,h,d,f,p,g,m,v,y,b,w,x,E,_,k,T,O,A=(o={r:0,g:0,b:0},a=1,s=null,h=null,d=null,f=!1,p=!1,"string"==typeof(r=e)&&(r=function(e){e=e.replace(l,"").replace(c,"").toLowerCase();var n,r=!1;if(C[e])e=C[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(n=L.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=L.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=L.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=L.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=L.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=L.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=L.hex8.exec(e))?{r:j(n[1]),g:j(n[2]),b:j(n[3]),a:j(n[4])/255,format:r?"name":"hex8"}:(n=L.hex6.exec(e))?{r:j(n[1]),g:j(n[2]),b:j(n[3]),format:r?"name":"hex"}:(n=L.hex4.exec(e))?{r:j(n[1]+""+n[1]),g:j(n[2]+""+n[2]),b:j(n[3]+""+n[3]),a:j(n[4]+""+n[4])/255,format:r?"name":"hex8"}:!!(n=L.hex3.exec(e))&&{r:j(n[1]+""+n[1]),g:j(n[2]+""+n[2]),b:j(n[3]+""+n[3]),format:r?"name":"hex"}}(r)),"object"==i(r)&&(I(r.r)&&I(r.g)&&I(r.b)?(g=r.r,m=r.g,v=r.b,o={r:255*M(g,255),g:255*M(m,255),b:255*M(v,255)},f=!0,p="%"===String(r.r).substr(-1)?"prgb":"rgb"):I(r.h)&&I(r.s)&&I(r.v)?(s=N(r.s),h=N(r.v),y=r.h,b=s,w=h,y=6*M(y,360),b=M(b,100),w=M(w,100),x=Math.floor(y),E=y-x,_=w*(1-b),k=w*(1-E*b),T=w*(1-(1-E)*b),o={r:255*[w,k,_,_,T,w][O=x%6],g:255*[T,w,w,k,_,_][O],b:255*[_,_,T,w,w,k][O]},f=!0,p="hsv"):I(r.h)&&I(r.s)&&I(r.l)&&(s=N(r.s),d=N(r.l),o=function(e,n,r){var i,o,a;function s(e,n,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(n-e)*6*r:r<.5?n:r<2/3?e+(n-e)*(2/3-r)*6:e}if(e=M(e,360),n=M(n,100),r=M(r,100),0===n)i=o=a=r;else{var l=r<.5?r*(1+n):r+n-r*n,c=2*r-l;i=s(c,l,e+1/3),o=s(c,l,e),a=s(c,l,e-1/3)}return{r:255*i,g:255*o,b:255*a}}(r.h,s,d),f=!0,p="hsl"),r.hasOwnProperty("a")&&(a=r.a)),a=S(a),{ok:f,format:r.format||p,r:Math.min(255,Math.max(o.r,0)),g:Math.min(255,Math.max(o.g,0)),b:Math.min(255,Math.max(o.b,0)),a:a});this._originalInput=e,this._r=A.r,this._g=A.g,this._b=A.b,this._a=A.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||A.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=A.ok}function h(e,n,r){var i,o,a=Math.max(e=M(e,255),n=M(n,255),r=M(r,255)),s=Math.min(e,n,r),l=(a+s)/2;if(a==s)i=o=0;else{var c=a-s;switch(o=l>.5?c/(2-a-s):c/(a+s),a){case e:i=(n-r)/c+(n<r?6:0);break;case n:i=(r-e)/c+2;break;case r:i=(e-n)/c+4}i/=6}return{h:i,s:o,l:l}}function d(e,n,r){var i,o=Math.max(e=M(e,255),n=M(n,255),r=M(r,255)),a=Math.min(e,n,r),s=o-a;if(o==a)i=0;else{switch(o){case e:i=(n-r)/s+(n<r?6:0);break;case n:i=(r-e)/s+2;break;case r:i=(e-n)/s+4}i/=6}return{h:i,s:0===o?0:s/o,v:o}}function f(e,n,r,i){var o=[P(Math.round(e).toString(16)),P(Math.round(n).toString(16)),P(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function p(e,n,r,i){return[P(D(i)),P(Math.round(e).toString(16)),P(Math.round(n).toString(16)),P(Math.round(r).toString(16))].join("")}function g(e,n){n=0===n?0:n||10;var r=u(e).toHsl();return r.s-=n/100,r.s=R(r.s),u(r)}function m(e,n){n=0===n?0:n||10;var r=u(e).toHsl();return r.s+=n/100,r.s=R(r.s),u(r)}function v(e){return u(e).desaturate(100)}function y(e,n){n=0===n?0:n||10;var r=u(e).toHsl();return r.l+=n/100,r.l=R(r.l),u(r)}function b(e,n){n=0===n?0:n||10;var r=u(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-(255*(n/100))))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-(255*(n/100))))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-(255*(n/100))))),u(r)}function w(e,n){n=0===n?0:n||10;var r=u(e).toHsl();return r.l-=n/100,r.l=R(r.l),u(r)}function x(e,n){var r=u(e).toHsl(),i=(r.h+n)%360;return r.h=i<0?360+i:i,u(r)}function E(e){var n=u(e).toHsl();return n.h=(n.h+180)%360,u(n)}function _(e,n){if(isNaN(n)||n<=0)throw Error("Argument to polyad must be a positive number");for(var r=u(e).toHsl(),i=[u(e)],o=360/n,a=1;a<n;a++)i.push(u({h:(r.h+a*o)%360,s:r.s,l:r.l}));return i}function k(e){var n=u(e).toHsl(),r=n.h;return[u(e),u({h:(r+72)%360,s:n.s,l:n.l}),u({h:(r+216)%360,s:n.s,l:n.l})]}function T(e,n,r){n=n||6,r=r||30;var i=u(e).toHsl(),o=360/r,a=[u(e)];for(i.h=(i.h-(o*n>>1)+720)%360;--n;)i.h=(i.h+o)%360,a.push(u(i));return a}function O(e,n){n=n||6;for(var r=u(e).toHsv(),i=r.h,o=r.s,a=r.v,s=[],l=1/n;n--;)s.push(u({h:i,s:o,v:a})),a=(a+l)%1;return s}u.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,r,i=this.toRgb();return e=i.r/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*((n=i.g/255)<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*((r=i.b/255)<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),n=Math.round(360*e.h),r=Math.round(100*e.s),i=Math.round(100*e.v);return 1==this._a?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=h(this._r,this._g,this._b),n=Math.round(360*e.h),r=Math.round(100*e.s),i=Math.round(100*e.l);return 1==this._a?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return f(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){var n,r,i,o,a;return n=this._r,r=this._g,i=this._b,o=this._a,a=[P(Math.round(n).toString(16)),P(Math.round(r).toString(16)),P(Math.round(i).toString(16)),P(D(o))],e&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*M(this._r,255))+"%",g:Math.round(100*M(this._g,255))+"%",b:Math.round(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*M(this._r,255))+"%, "+Math.round(100*M(this._g,255))+"%, "+Math.round(100*M(this._b,255))+"%)":"rgba("+Math.round(100*M(this._r,255))+"%, "+Math.round(100*M(this._g,255))+"%, "+Math.round(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var n="#"+p(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(e){var o=u(e);r="#"+p(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0;return!n&&i&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(_,[3])},tetrad:function(){return this._applyCombination(_,[4])}},u.fromRatio=function(e,n){if("object"==i(e)){var r={};for(var o in e)e.hasOwnProperty(o)&&("a"===o?r[o]=e[o]:r[o]=N(e[o]));e=r}return u(e,n)},u.equals=function(e,n){return!!e&&!!n&&u(e).toRgbString()==u(n).toRgbString()},u.random=function(){return u.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},u.mix=function(e,n,r){r=0===r?0:r||50;var i=u(e).toRgb(),o=u(n).toRgb(),a=r/100;return u({r:(o.r-i.r)*a+i.r,g:(o.g-i.g)*a+i.g,b:(o.b-i.b)*a+i.b,a:(o.a-i.a)*a+i.a})},u.readability=function(e,n){var r=u(e),i=u(n);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)},u.isReadable=function(e,n,r){var i,o,a,s,l,c=u.readability(e,n);switch(l=!1,(o=((i=(i=r)||{level:"AA",size:"small"}).level||"AA").toUpperCase(),a=(i.size||"small").toLowerCase(),"AA"!==o&&"AAA"!==o&&(o="AA"),"small"!==a&&"large"!==a&&(a="small"),s={level:o,size:a}).level+s.size){case"AAsmall":case"AAAlarge":l=c>=4.5;break;case"AAlarge":l=c>=3;break;case"AAAsmall":l=c>=7}return l},u.mostReadable=function(e,n,r){var i,o,a,s,l=null,c=0;o=(r=r||{}).includeFallbackColors,a=r.level,s=r.size;for(var h=0;h<n.length;h++)(i=u.readability(e,n[h]))>c&&(c=i,l=u(n[h]));return u.isReadable(e,l,{level:a,size:s})||!o?l:(r.includeFallbackColors=!1,u.mostReadable(e,["#fff","#000"],r))};var C=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=u.hexNames=function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}(C);function S(e){return(isNaN(e=parseFloat(e))||e<0||e>1)&&(e=1),e}function M(e,n){"string"==typeof(r=e)&&-1!=r.indexOf(".")&&1===parseFloat(r)&&(e="100%");var r,i,o="string"==typeof(i=e)&&-1!=i.indexOf("%");return(e=Math.min(n,Math.max(0,parseFloat(e))),o&&(e=parseInt(e*n,10)/100),1e-6>Math.abs(e-n))?1:e%n/parseFloat(n)}function R(e){return Math.min(1,Math.max(0,e))}function j(e){return parseInt(e,16)}function P(e){return 1==e.length?"0"+e:""+e}function N(e){return e<=1&&(e=100*e+"%"),e}function D(e){return Math.round(255*parseFloat(e)).toString(16)}var L=(a="[\\s|\\(]+("+(o="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?",s="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?",{CSS_UNIT:new RegExp(o),rgb:RegExp("rgb"+a),rgba:RegExp("rgba"+s),hsl:RegExp("hsl"+a),hsla:RegExp("hsla"+s),hsv:RegExp("hsv"+a),hsva:RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function I(e){return!!L.CSS_UNIT.exec(e)}}}]);